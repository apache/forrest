<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Forrestbot Web Interface</title>
<link type="text/css" href="../skin/page.css" rel="stylesheet">
<link rel="shortcut icon" href="../favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF">
<!--================= start Navigation Path ==================-->
<table summary="navigation path" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td nowrap="nowrap" valign="middle" bgcolor="#CFDCED" height="20"><img height="1" width="5" alt="" src="../skin/images/spacer.gif" class="spacer"><!--===== breadcrumb trail (javascript-generated) ====--><font size="2" face="Arial, Helvetica, Sans-serif"><a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script></font></td>
</tr>
<tr>
<td bgcolor="#4C6C8F" height="2"><img height="2" width="2" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
<!--================= end Navigation Path ==================-->
<!--================= start Banner ==================-->
<table summary="header with logos" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<!--================= start Group Logo ==================-->
<td bgcolor="#294563"><a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../images/apache-forrest.png" title="The Apache Software Foundation"></a></td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td width="100%" align="center" bgcolor="#294563"><a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../images/project-logo.gif" title="Apache Forrest"></a></td>
<!--================= end Project Logo ==================-->
<!--================= start Search ==================--><td valign="top" rowspan="2" bgcolor="#294563">
<form target="_blank" action="http://www.google.com/search" method="get">
<table summary="search" border="0" cellspacing="0" cellpadding="0" bgcolor="#4C6C8F">
<tr>
<td colspan="3"><img height="10" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap"><input value="forrest.apache.org" name="as_sitesearch" type="hidden"><input size="15" name="as_q" id="query" type="text"><img height="1" width="5" alt="" src="../skin/images/spacer.gif" class="spacer"><input name="Search" value="Search" type="submit">
<br>
<font face="Arial, Helvetica, Sans-serif" size="2" color="white">
                          the Apache Forrest site
                          
                          
                        </font></td><td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img alt="" border="0" height="10" width="9" src="../skin/images/search-left.gif"></td><td><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td><img alt="" border="0" height="10" width="9" src="../skin/images/search-right.gif"></td>
</tr>
</table>
</form>
</td>
<!--================= end Search ==================--><td bgcolor="#294563"><img height="10" width="10" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td valign="bottom" bgcolor="#294563" colspan="2">
<!--================= start Tabs ==================-->
<div class="tab">
<table summary="tab bar" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="6"><img alt="" height="8" width="6" src="../skin/images/spacer.gif"></td><td valign="bottom">
<table summary="non selected tab" style="height: 1.6em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-left.gif"></td><td valign="middle" bgcolor="#B2C4E0"><a class="base-not-selected" href="../index.html">Welcome</a></td><td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-right.gif"></td>
</tr>
<tr>
<td colspan="3" height="1"></td>
</tr>
</table>
</td><td width="6"><img alt="" height="8" width="6" src="../skin/images/spacer.gif"></td><td valign="bottom">
<table summary="non selected tab" style="height: 1.6em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-left.gif"></td><td valign="middle" bgcolor="#B2C4E0"><a class="base-not-selected" href="../contrib.html">Project</a></td><td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-right.gif"></td>
</tr>
<tr>
<td colspan="3" height="1"></td>
</tr>
</table>
</td><td width="6"><img alt="" height="8" width="6" src="../skin/images/spacer.gif"></td><td valign="bottom">
<table summary="selected tab" style="height: 1.8em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#4C6C8F"><img height="5" width="5" alt="" src="../skin/images/tabSel-left.gif"></td><td valign="middle" bgcolor="#4C6C8F"><font color="#ffffff" size="2" face="Arial, Helvetica, Sans-serif"><b><a class="base-selected" href="../docs/your-project.html">Documentation</a></b></font></td><td valign="top" width="5" bgcolor="#4C6C8F"><img height="5" width="5" alt="" src="../skin/images/tabSel-right.gif"></td>
</tr>
</table>
</td><td width="6"><img alt="" height="8" width="6" src="../skin/images/spacer.gif"></td><td valign="bottom">
<table summary="non selected tab" style="height: 1.6em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-left.gif"></td><td valign="middle" bgcolor="#B2C4E0"><a class="base-not-selected" href="../howto/index.html">How-To</a></td><td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="../skin/images/tab-right.gif"></td>
</tr>
<tr>
<td colspan="3" height="1"></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<!--================= end Tabs ==================-->
</td><td bgcolor="#294563"></td>
</tr>
<tr>
<td height="10" bgcolor="#4C6C8F" colspan="4">
<div class="level2tab">
<a class="base-selected" href="../docs/your-project.html">Core</a>&nbsp;|&nbsp;<a class="base-selected" href="../docs/forrestbot.html">ForrestBot</a>&nbsp;|&nbsp;<a class="base-selected" href="../docs/forrestbar.html">ForrestBar</a>
</div>
</td>
</tr>
</table>
<!--================= end Banner ==================-->
<!--================= start Menu, NavBar, Content ==================-->
<table summary="page content" bgcolor="#ffffff" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top">
<table summary="menu" border="0" cellspacing="0" cellpadding="0">
<tr>
<!--================= start left top NavBar ==================-->
<td rowspan="3" valign="top">
<table summary="blue line" border="0" cellpadding="0" cellspacing="0">
<tr>
<td bgcolor="#294563"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td bgcolor="#CFDCED"><font color="#4C6C8F" size="4" face="Arial, Helvetica, Sans-serif">&nbsp;</font></td>
</tr>
<tr>
<td bgcolor="#294563"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
</td>
<!--================= end left top NavBar ==================--><td bgcolor="#294563"><img width="1" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td valign="bottom" bgcolor="#4C6C8F"><img width="10" height="10" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap" valign="top" bgcolor="#4C6C8F">
<!--================= start Menu items ==================-->
<div class="menu">
<ul>
<li>
<font color="#CFDCED">Documentation</font>
<ul>
    
<li>
<a href="../docs/your-project.html">Using Forrest</a>
</li>
    
<li>
<a href="../docs/validation.html">XML Validation</a>
</li>
    
<li>
<a href="../docs/linking.html">Menus and Linking</a>
</li>
    
<li>
<a href="../docs/searching.html">Searching</a>
</li>
    
<li>
<a href="../docs/skin-package.html">Skin Packages</a>
</li>
    
    
<li>
<a href="../docs/forrest-contract.html">Our Contract</a>
</li>
    
<li>
<a href="../docs/compliance.html">Standards Compliance</a>
</li>
   
    
    
<li>
<font color="#CFDCED">Advanced Topics</font>
<ul>
      
<li>
<a href="../docs/catalog.html">Using DTD Catalogs</a>
</li>
      
<li>
<a href="../docs/sitemap-ref.html">Sitemap Reference</a>
</li>
      
<li>
<a href="../docs/cap.html">Sourcetype Action</a>
</li>
    
</ul>
</li>
    
    
<li>
<font color="#CFDCED">Upgrading</font>
<ul>
      
<li>
<a href="../docs/upgrading_06.html">Upgrading to 0.6</a>
</li>
      
<li>
<a href="../docs/upgrading_05.html">Upgrading to 0.5</a>
</li>
    
</ul>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">SubProjects</font>
<ul>
    
<li>
<a href="../docs/forrestbar.html">ForrestBar</a>
</li>
    
<li>
<a href="../docs/forrestbot.html">Forrestbot</a>
</li>
    
<li>
<span class="sel"><font color="#ffcc00">Forrestbot Webapp</font></span>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">References</font>
<ul>
    
<li>
<font color="#CFDCED">DTD documentation</font>
<ul>
      
<li>
<a href="../docs/dtd-docs.html">index</a>
</li>
      
<li>
<a href="../docs/document-v13.dtdx.html">document-v13</a>
</li>
      
<li>
<a href="../docs/howto-v13.dtdx.html">howto-v13</a>
</li>
      
<li>
<a href="../docs/faq-v13.dtdx.html">faq-v13</a>
</li>
    
</ul>
</li>
    
<li>
<a href="../docs/document-v12.html">document-v12</a>
</li>
    
<li>
<a href="../docs/wiki-sample.html">Wiki Reference</a>
</li>
    
<li>
<a href="../docs/oowriter.html">OpenOffice Writer</a>
</li>    
 
</ul>
</li>
<li>
<font color="#CFDCED">Older Docs</font>
<ul>
    
<li>
<a href="../docs/primer.html">Forrest Primer</a>
</li>
    
<li>
<a href="../docs/libre-intro.html">Libre</a>
</li>
    
<li>
<a href="../docs/dreams.html">Dream list</a>
</li>
  
</ul>
</li>
</ul>
</div>
<!--================= end Menu items ==================-->
</td><td valign="bottom" bgcolor="#4C6C8F"><img width="10" height="10" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td bgcolor="#294563"><img width="1" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td valign="bottom" align="left" colspan="2" rowspan="2" bgcolor="#4C6C8F"><img height="10" width="10" border="0" alt="" src="../skin/images/menu-left.gif"></td><td bgcolor="#4C6C8F"><img height="10" width="10" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td valign="bottom" align="right" colspan="2" rowspan="2" bgcolor="#4C6C8F"><img height="10" width="10" border="0" alt="" src="../skin/images/menu-right.gif"></td>
</tr>
<tr>
<td height="1" bgcolor="#294563"><img width="1" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
</td><td valign="top" width="100%">
<table summary="content" width="100%" border="0" cellpadding="0" cellspacing="0">
<!--================= start middle NavBar ==================-->
<tr>
<td colspan="4" bgcolor="#294563"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td align="left" width="10" bgcolor="#CFDCED"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td align="left" width="50%" bgcolor="#CFDCED"><font color="#4C6C8F" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                
                </font><img width="10" height="8" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td align="right" width="50%" bgcolor="#CFDCED"><font color="#4C6C8F" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                
                </font><img width="10" height="8" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td width="10" bgcolor="#CFDCED"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="4" bgcolor="#294563"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<!--================= end middle NavBar ==================-->
<!--================= start Content==================-->
<tr>
<td align="left" width="10"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td><td colspan="2" align="left" width="100%">
<div class="content">
<table class="title" summary="">
<tr>
<td valign="middle">
<h1>Forrestbot Web Interface</h1>
</td><td nowrap="nowrap" width="40" align="center"><a class="dida" href="forrestbot-web-interface.pdf"><img alt="PDF" src="../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a></td>
</tr>
</table>
<ul class="minitoc">
<li>
<a href="#Build">Build</a>
</li>
<li>
<a href="#Requirements">Requirements</a>
</li>
<li>
<a href="#Installation">Installation</a>
</li>
<li>
<a href="#FAQ">FAQ</a>
<ul class="minitoc">
<li>
<a href="#The+build+and%2For+deploy+commands+don%27t+seem+to+work">The build and/or deploy commands don't seem to work</a>
</li>
<li>
<a href="#Can+I+do+anything+with+this+besides+just+running+the%0A++++++++forrestbot%3F">Can I do anything with this besides just running the
        forrestbot?</a>
</li>
</ul>
</li>
<li>
<a href="#TODO+Wishlist">TODO Wishlist</a>
</li>
</ul>
    
<p>This webapp implements a website staging application for sites built with
    Apache Forrest. The webapp hosts HTML for a number of managed websites. The
    user can regenerate these sites at will. Once the user is satisfied with the
    site, they may 'deploy' the site, making it live.</p>

    
<a name="N10010"></a><a name="Build"></a>
<h3>Build</h3>
<div style="margin-left: 0 ; border: 2px">
<p>To build the webapp from source, you need <a class="external" href="http://maven.apache.org/">Apache Maven</a> installed. From a
      command prompt, go to the <span class="codefrag">forrest/src/forrestbot/webapp</span>
      directory and execute "<span class="codefrag">maven war</span>".</p>
</div>

    
<a name="N10024"></a><a name="Requirements"></a>
<h3>Requirements</h3>
<div style="margin-left: 0 ; border: 2px">
<ul>
        
<li>Forrest</li>

        
<li>A servlet container such as <a class="external" href="http://jakarta.apache.org/tomcat">Apache Tomcat</a>
</li>

        
<li>Directories for:</li>

        
<ul>
          
<li>forrestbot buildfiles</li>

          
<li>source and working files</li>

          
<li>log files</li>

          
<li>built websites (this is not their deployed location)</li>
        
</ul>

        
<li>A webserver to view the sites in the build directory</li>
      
</ul>
<p>The server does not need local access to the sites' source nor final
      deployed location. The buildfiles configure the transfer of those
      files.</p>
</div>

    
<a name="N1004F"></a><a name="Installation"></a>
<h3>Installation</h3>
<div style="margin-left: 0 ; border: 2px">
<div class="frame note">
<div class="label">Note</div>
<div class="content">Most of this configuration is related to the <a class="external" href="http://www.opensymphony.com/osuser/">OpenSymphony OSUser</a>
      authentication layer.</div>
</div>
<ol>
        
<li>Extract the war to an empty directory</li>

        
<li>Modify welcome.local.html</li>

        
<li>Modify WEB-INF/classes/osuser.xml if you want to use an
        authenticator other than XML files</li>

        
<li>Modify projects.xml, groups.xml, and users.xml (all in
        WEB-INF/classes) according to your needs</li>

        
<li>Optionally modify logging via WEB-INF/classes/log4j.properties</li>

        
<li>Modify WEB-INF/classes/settings.properties according to the server's
        specific setup</li>

        
<li>Deploy the webapp in Tomcat or some other servlet container (you may
        want to repackage the war file)</li>

        
<li>Make sure tomcat has permissions to write in forrestbot's build,
        work, and log directories.</li>
      
</ol>
<p>Optional: set up "cron jobs" to execute forrestbot. This is completely
      independant of the forrestbot web interface, but is often useful. A
      suggested practice is to build the sites regularly and deploy them as
      desired through the web interface.</p>
</div>

    
<a name="N1007B"></a><a name="FAQ"></a>
<h3>FAQ</h3>
<div style="margin-left: 0 ; border: 2px">
<a name="N10081"></a><a name="The+build+and%2For+deploy+commands+don%27t+seem+to+work"></a>
<h4>The build and/or deploy commands don't seem to work</h4>
<div style="margin-left: 0 ; border: 2px">
<div class="frame warning">
<div class="label">Warning</div>
<div class="content">The only environment variable available is FORREST_HOME, which
        is set by forrest-home in the settings.properties file. Use a wrapper
        script (see below) if you need other environment variables.</div>
</div>
<p>Currently forrestbot only logs the forrest part of it's execution,
        not the whole thing. And the web interface starts a forrestbot process
        and doesn't watch it's progress directly.</p>
<p>Set debug-exec=true in settings.properties and make sure
        log4j.properties logs at the DEBUG level. This will log all the thread
        output.</p>
<p>Then look at the debugging output for the command executed and the
        working directory used. Log into the server as the use the Tomcat server
        uses and cd to the working directory and then execute the command. This
        will fairly accurately simulate what the web interface does.</p>
</div>
<a name="N10094"></a><a name="Can+I+do+anything+with+this+besides+just+running+the%0A++++++++forrestbot%3F"></a>
<h4>Can I do anything with this besides just running the
        forrestbot?</h4>
<div style="margin-left: 0 ; border: 2px">
<p>Sure. Create a wrapper script and specify it as forrest-exec in
        settings.properties. Here's an example:</p>
<pre class="code">#!/bin/bash

# get env vars
. /home/user/.profile

# group writable for easier sharing of files with others who run forrestbot
umask g+w

# you can preprocess something here
xmlfile=$2
if [ "${xmlfile##*.}" = "xml" ]                # everything after last .
then
    target=$3
    if [ "$target" != "deploy" ]                # don't run preprocess task on a deploy
    then
        projectTarget=${xmlfile%.*}               # everything before last .
        # do something special for $projectTarget here
    fi
else
        echo "Syntax: forrest_wrapper.sh -f myapp.xml [build|deploy|...]"
        exit
fi

# run forrest(bot) with all the parameters
forrest $*

# you can postprocess something here</pre>
</div>
</div>

    
<a name="N100A3"></a><a name="TODO+Wishlist"></a>
<h3>TODO Wishlist</h3>
<div style="margin-left: 0 ; border: 2px">
<ul>
        
<li>seperate authorization of 'build' and 'deploy'</li>

        
<li>log everything, not just the build</li>

        
<li>view old log files</li>

        
<li>ability to reload all config files on the fly</li>

        
<li>put date at top of viewlog_body page</li>
      
</ul>
</div>
  
<div class="attribution"></div>
</div>
</td><td width="10"><img width="10" height="1" alt="" src="../skin/images/spacer.gif" class="spacer"></td>
</tr>
<!--================= end Content==================-->
</table>
</td>
</tr>
</table>
<!--================= end Menu, NavBar, Content ==================-->
<!--================= start Footer ==================-->
<table summary="footer" cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>
<td colspan="2" height="1" bgcolor="#4C6C8F"><img height="1" width="1" alt="" src="../skin/images/spacer.gif" class="spacer"><a href="../skin/images/label.gif"></a><a href="../skin/images/page.gif"></a><a href="../skin/images/chapter.gif"></a><a href="../skin/images/chapter_open.gif"></a><a href="../skin/images/current.gif"></a></td>
</tr>
<tr>
<td colspan="2" bgcolor="#CFDCED" class="copyright" align="center"><font size="2" face="Arial, Helvetica, Sans-Serif"><a href="http://www.apache.org/licenses/">
              Copyright &copy; 2002-2004&nbsp;
              The Apache Software Foundation.</a>
          All rights reserved.
          <script type="text/javascript" language="JavaScript"><!--
              document.write(" - "+"Last Published: " + document.lastModified);
            //  --></script></font></td>
</tr>
<tr>
<td colspan="2" align="left" bgcolor="#CFDCED" class="logos"></td>
</tr>
</table>
<!--================= end Footer ==================-->
</body>
</html>
