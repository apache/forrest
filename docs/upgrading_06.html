<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Upgrading to Forrest 0.6</title>
<link rel="stylesheet" href="../skin/page.css" type="text/css">
<link rel="stylesheet" href="../skin/forrest.css" type="text/css">
<link rel="shortcut icon" href="../favicon.ico">
<script type="text/javascript" language="javascript" src="../skin/fontsize.js"></script><script type="text/javascript" language="javascript" src="../skin/menu.js"></script>
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<table class="header" cellspacing="0" cellpadding="0" border="0" width="100%">
<tr>
<td>
<div class="headerlogo">
<a href="http://www.apache.org/"><img alt="Apache" class="logoImage" src="../images/apache-forrest.png"></a>
</div>
</td><td align="center">
<div class="headerlogo">
<a href="http://forrest.apache.org/"><img alt="Forrest" class="logoImage" src="../images/project-logo.gif"></a>
</div>
</td><td class="search" align="right" rowspan="2" valign="top">
<form method="get" action="http://www.google.com/search" target="_blank">
<table class="dialog" cellspacing="0" cellpadding="0" border="0">
<tr>
<td colspan="3" class="border" height="10"></td>
</tr>
<tr>
<td colspan="3" height="8"></td>
</tr>
<tr>
<td></td><td nowrap="nowrap"><input type="hidden" name="as_sitesearch" value="forrest.apache.org"><input type="text" id="query" name="as_q" size="15">
			&nbsp;
			<input type="submit" value="Search" name="Search">
<br>
			the Apache Forrest site
			
			
		      </td><td></td>
</tr>
<tr>
<td colspan="3" height="7"></td>
</tr>
<tr>
<td class="search border bottom-left SBBL"></td><td class="search border bottomborder"></td><td class="search border bottom-right SBBR"></td>
</tr>
</table>
</form>
</td><td align="right" width="10" height="10"><span class="textheader">Forrest</span></td>
</tr>
<tr>
<td colspan="4" class="tabstrip">
<table class="tab" cellspacing="0" cellpadding="0" border="0">
<tr>
<td class="tab pre-separator"></td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../index.html">Welcome</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td colspan="3" class="spacer"></td>
</tr>
</table>
</td><td class="tab separator"></td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../contrib.html">Project</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td colspan="3" class="spacer"></td>
</tr>
</table>
</td><td class="tab separator"></td><td class="tab selected top-left TSTL"></td><td class="tab selected"><a class="base-selected" href="../docs/your-project.html">Documentation</a></td><td class="tab selected top-right TSTR"></td><td class="tab separator"></td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../howto/index.html">How-To</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td colspan="3" class="spacer"></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" class="level2tabstrip">
<table class="level2tab" cellspacing="0" cellpadding="0" border="0">
<tr>
<td><td class="tab pre-separator"></td><td class="level2tab selected"><a class="base-selected" href="../docs/your-project.html">Core</a></td><td class="level2tab separator">|</td><td class="level2tab selected"><a class="base-selected" href="../docs/forrestbot.html">ForrestBot</a></td><td class="level2tab separator">|</td><td class="level2tab selected"><a class="base-selected" href="../docs/forrestbar.html">ForrestBar</a></td></td>
</tr>
</table>
</td><td colspan="2" class="datenote level2tabstrip">
<div class="published">
<script language="JavaScript" type="text/javascript"><!--
              document.write("Published: " + document.lastModified);
              //  --></script>
</div>
</td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
<tr>
<td valign="top">
<table cellpadding="0" cellspacing="0" class="menuarea">
<tr>
<td valign="top" width="6px">
<table class="leftpagemargin" cellspacing="0" cellpadding="0" border="0">
<tr>
<td class="subborder trail">&nbsp;</td>
</tr>
</table>
</td><td class="dialog">
<div class="menu">
<div class="menutitle" id="menu_selected_1.1Title" onclick="SwitchMenu('menu_selected_1.1')">Documentation</div>
<div class="selectedmenuitemgroup" id="menu_selected_1.1">
<div class="menuitem">
<a href="../docs/your-project.html">Using Forrest</a>
</div>
<div class="menuitem">
<a href="../docs/validation.html">XML Validation</a>
</div>
<div class="menuitem">
<a href="../docs/linking.html">Menus and Linking</a>
</div>
<div class="menuitem">
<a href="../docs/searching.html">Searching</a>
</div>
<div class="menuitem">
<a href="../docs/skins.html">Default Skins</a>
</div>
<div class="menuitem">
<a href="../docs/skin-package.html">Skin Packages</a>
</div>
<div class="menuitem">
<a href="../docs/forrest-contract.html">Our Contract</a>
</div>
<div class="menuitem">
<a href="../docs/compliance.html">Standards Compliance</a>
</div>
<div class="menutitle" id="menu_1.1.9Title" onclick="SwitchMenu('menu_1.1.9')">Advanced Topics</div>
<div class="menuitemgroup" id="menu_1.1.9">
<div class="menuitem">
<a href="../docs/catalog.html">Using DTD Catalogs</a>
</div>
<div class="menuitem">
<a href="../docs/sitemap-ref.html">Sitemap Reference</a>
</div>
<div class="menuitem">
<a href="../docs/cap.html">Sourcetype Action</a>
</div>
</div>
<div class="menutitle" id="menu_selected_1.1.10Title" onclick="SwitchMenu('menu_selected_1.1.10')">Upgrading</div>
<div class="selectedmenuitemgroup" id="menu_selected_1.1.10">
<div class="menupage">
<div class="menupagetitle">Upgrading to 0.6</div>
</div>
<div class="menuitem">
<a href="../docs/upgrading_05.html">Upgrading to 0.5</a>
</div>
</div>
</div>
<div class="menutitle" id="menu_1.2Title" onclick="SwitchMenu('menu_1.2')">SubProjects</div>
<div class="menuitemgroup" id="menu_1.2">
<div class="menuitem">
<a href="../docs/forrestbar.html">ForrestBar</a>
</div>
<div class="menuitem">
<a href="../docs/forrestbot.html">Forrestbot</a>
</div>
<div class="menuitem">
<a href="../docs/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
</div>
<div class="menutitle" id="menu_1.3Title" onclick="SwitchMenu('menu_1.3')">Reference docs</div>
<div class="menuitemgroup" id="menu_1.3">
<div class="menutitle" id="menu_1.3.1Title" onclick="SwitchMenu('menu_1.3.1')">DTD documentation</div>
<div class="menuitemgroup" id="menu_1.3.1">
<div class="menuitem">
<a href="../docs/dtd-docs.html">index</a>
</div>
<div class="menuitem">
<a href="../docs/document-v13.dtdx.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../docs/howto-v13.dtdx.html">howto-v13</a>
</div>
<div class="menuitem">
<a href="../docs/faq-v13.dtdx.html">faq-v13</a>
</div>
</div>
<div class="menuitem">
<a href="../docs/document-v13.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../docs/wiki-sample.html">Wiki Reference</a>
</div>
<div class="menuitem">
<a href="../docs/oowriter.html">OpenOffice Writer</a>
</div>
</div>
<div class="menutitle" id="menu_1.4Title" onclick="SwitchMenu('menu_1.4')">Older Docs</div>
<div class="menuitemgroup" id="menu_1.4">
<div class="menuitem">
<a href="../docs/primer.html">Forrest Primer</a>
</div>
<div class="menuitem">
<a href="../docs/libre-intro.html">Libre</a>
</div>
<div class="menuitem">
<a href="../docs/dreams.html">Dream list</a>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td></td><td>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
<tr>
<td class="border bottom-left"></td><td class="border bottomborder"></td><td class="border bottom-right"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td height="10" colspan="2"></td>
</tr>
</table>
</td><td valign="top" width="100%">
<table cellspacing="0" cellpadding="0" border="0" width="100%">
<tr>
<td class="subborder trail">
	         &nbsp;<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script type="text/javascript" language="JavaScript" src="../skin/breadcrumbs.js"></script>&nbsp;
          </td><td class="subborder trail" align="right" nowrap="nowrap">
	        Font size: 
	          &nbsp;<input type="button" onclick="ndeSetTextSize('reset'); return false;" title="Reset text" class="resetfont" value="Reset">      
	          &nbsp;<input type="button" onclick="ndeSetTextSize('decr'); return false;" title="Shrink text" class="smallerfont" value="-a">
	          &nbsp;<input type="button" onclick="ndeSetTextSize('incr'); return false;" title="Enlarge text" class="biggerfont" value="+a"></td>
</tr>
<tr>
<td align="left" colspan="2">
<div class="content">
<table class="title">
<tr>
<td valign="middle">
<h1>Upgrading to Forrest 0.6</h1>
</td><td align="center" width="40" nowrap="nowrap"><a href="upgrading_06.pdf" class="dida"><img class="skin" src="../skin/images/pdfdoc.gif" alt="PDF"><br>
        PDF</a></td>
</tr>
</table>
<ul class="minitoc">
<li>
<a href="#introduction">Introduction</a>
</li>
<li>
<a href="#new">New Features</a>
</li>
<li>
<a href="#clean">Run a clean target after upgrade</a>
</li>
<li>
<a href="#copyless">Copyless</a>
</li>
<li>
<a href="#sitemap">sitemap</a>
</li>
<li>
<a href="#skin-config-1">Private skins might need changes to document2html.xsl</a>
</li>
<li>
<a href="#antproxy">forrest.antproxy.xml is obsolete in favor of Ant's &lt;import&gt; task</a>
</li>
<li>
<a href="#ehtml">Deprecation of .ehtml</a>
</li>
<li>
<a href="#forrestbot">New forrestbot</a>
</li>
<li>
<a href="#dtd">New DTDs</a>
</li>
<li>
<a href="#catalog">SystemIdentifiers for DTDs changed to forrest.apache.org</a>
</li>
<li>
<a href="#local-catalog">Projects can use a local CatalogManager.properties</a>
</li>
<li>
<a href="#skin-names">Skins renamed and deleted</a>
</li>
<li>
<a href="#To+be+continued...">To be continued...</a>
</li>
</ul> 
    
<a name="d4296e12"></a><a name="introduction"></a>
<h3 class="h3">Introduction</h3>
<div class="section">
      
      
<p>
      This page describes changes to Forrest that affect people who are
      upgrading to the 0.6 version.
      Please post your upgrade experiences to either the
      <a href="../mail-lists.html#forrest-dev">dev</a> or
      <a href="../mail-lists.html#forrest-user">user</a>
      mailing lists.
      As more experience is gained, this document will be updated.  
      </p>
      
<p>
      (If you are upgrading from a version prior to 0.5 then you may want
      to see the notes for the <a href="../docs/upgrading_05.html">previous</a>
      upgrade. However you should be fine with the notes from this 0.6 document.)
      </p>
    
</div>

    
<a name="d4296e33"></a><a name="new"></a>
<h3 class="h3">New Features</h3>
<div class="section">
      
      
<p>
        The following list shows some of the key new features for Forrest 0.6
        (for the full list of changes, see the
        <a href="../changes.html">change log</a>).
      </p>
      
<ul>
        
<li>copyless</li>
        
<li>Now using Subversion (SVN) for source control.</li>
        
<li>skinconf DTD</li>
        
<li>Forrestbot</li>
      
</ul>
    
</div>

    
<a name="d4296e60"></a><a name="clean"></a>
<h3 class="h3">Run a clean target after upgrade</h3>
<div class="section">
      
      
<p>To avoid any issue with old classes being loaded, run a
        '<span class="codefrag">forrest clean</span>' in your project directory, after you
        upgraded to this version.
      </p>
    
</div>

    
<a name="d4296e72"></a><a name="copyless"></a>
<h3 class="h3">Copyless</h3>
<div class="section">
      
      
<p>
      In essence, Forrest does not create a dist anymore, and uses 
      itself in place. No more useless copying to a separate build space,
      no more backcopying bugfixes, all is used live.
      It improves the build process a lot.
      </p>

      
<p>
      To use the new Forrest, run 'build.sh' or 'build.bat' as you always have done,
      and then change FORREST_HOME to point to forrest/src/core instead of 
      .../build/dist/shbat. Also make sure PATH gets updated to use the new 
      $FORREST_HOME/bin
      </p>
    
</div>

    
<a name="d4296e84"></a><a name="sitemap"></a>
<h3 class="h3">sitemap</h3>
<div class="section">
      
      
<p>
        If your old project did not use its own sitemap, then your upgrade
        process will be easy. If you did use your own sitemap, then you will
        need to be prepared to make some changes. Hopefully with the new
        functionality of Forrest, you can do away with it and just use the
        Forrest default sitemaps. If you have your own special doctypes that
        you were handling, then you will need to merge them into a copy of
        the default sitemaps. (Actually if you are in this latter category,
        then you are probably better to describe your situation on the
        Forrest mailing lists, and seek help.)
      </p>
    
</div>

    
<a name="d4296e93"></a><a name="skin-config-1"></a>
<h3 class="h3">Private skins might need changes to document2html.xsl</h3>
<div class="section">
      
      
<p>
      Moved all references to //skinconfig out of the document2html.xsl
      into the site2xhtml.xsl file. If you have your own skins that were
      referencing "$config" or "//skinconfig" in the document2html.xsl
      then you need to make similar changes.
      For further information, see Issue
      <a href="http://issues.cocoondev.org/jira/secure/ViewIssue.jspa?key=FOR-146" class="external">FOR-146</a>.
      </p>
    
</div>
    
    
<a name="d4296e105"></a><a name="antproxy"></a>
<h3 class="h3">forrest.antproxy.xml is obsolete in favor of Ant's &lt;import&gt; task</h3>
<div class="section">
      
      
<p>
      Projects that use <span class="codefrag">forrest.antproxy.xml</span> via and Ant build
      task to invoke Forrest, will receive
      an error message directing them to this document.
      Please see the <a href="../docs/your-project.html#invoking_from_ant">Invoking
      Forrest from Ant</a> documentation for instructions on how to use
      the &lt;import&gt; task.
      </p>
    
</div>
    
    
<a name="d4296e120"></a><a name="ehtml"></a>
<h3 class="h3">Deprecation of .ehtml</h3>
<div class="section">
      
      
<p>
      The .ehtml input file format has been deprecated and will likely be
      removed in the next release.
      Please convert all .ehtml files to .ihtml.
      If you do '<span class="codefrag">forrest seed</span>' there is a sample ihtml file.
      </p>
    
</div>
    
    
<a name="d4296e132"></a><a name="forrestbot"></a>
<h3 class="h3">New forrestbot</h3>
<div class="section">
      
      
<p>
      The forrestbot and the forrestbot web interface have been completely
      rewritten.  There is no
      direct way to convert old configurations to new configurations.
      Please see the <a href="../docs/forrestbot.html">forrestbot
      documentation</a> for instructions to create buildfiles that work
      with the new forrestbot.
      </p>
    
</div>
    
    
<a name="d4296e144"></a><a name="dtd"></a>
<h3 class="h3">New DTDs</h3>
<div class="section">
      
      
<p>
      Updated all v1.2 DTDs to become v1.3 DTDs (forward compatibility:
      v1.2 docs will work fine as V1.3). The main change is the addition
      of a @class attribute to every element, which enables the "extra-css"
      section in the skinconf to be put to good use.
      </p>
      
<p>
      Updated the v2.0a DTDs to become v2.0 DTDs (forward incompatibility:
      v1.2/1.3 docs are not forward-compatible as V2.0).
      </p>
      
<pre class="code">
Changes from V1.2 to V1.3
=========================
document      - Addition of class attribute all elements
faq           - Addition of class attribute all elements
changes       - Addition of class attribute all elements
howto         - Addition of class attribute all elements
todo          - Addition of class attribute all elements
 
Changes from V2.0a to V2.0
==========================
document      - Addition of class attribute, all elements
              - Addition of label attribute to note and
                warning elements (consistent with v1.2/1.3)
faq           - Class attribute, all elements
changes       - New DTD
howto         - New DTD
todo          - New DTD

Changes from V1.3 to V2.0
=========================
document      - Renamed &lt;link&gt; to &lt;a&gt;
              - Removed &lt;fork&gt; and &lt;jump&gt;.  If desired,
                that functionality can be handled via 
                the use of the class attribute on &lt;a&gt;.
faq           - Renamed &lt;part&gt; to &lt;faqsection&gt;
              - @title attribute on &lt;faqs&gt; is now a nested
                &lt;title&gt; element 
              - Same changes as in document between 1.3 and 2.0
changes       - Same changes as in document between 1.3 and 2.0
howto         - Same changes as in document between 1.3 and 2.0
todo          - Same changes as in document between 1.3 and 2.0
</pre>
    
</div>

    
<a name="d4296e159"></a><a name="catalog"></a>
<h3 class="h3">SystemIdentifiers for DTDs changed to forrest.apache.org</h3>
<div class="section">
      
      
<p>
        Everyone should still continue to use the
        <a href="../docs/catalog.html">Catalog Entity Resolver</a>
        and that certainly still operates at the core of Forrest using the
        well-defined PublicIdentifiers.
        However, some impoverished XML tools do not, so they need to be able
        to get the DTDs from the website. Some other tools rely on the System
        Identifier rather than the Public Identifer. See Forrest Issue
        <a href="http://issues.cocoondev.org/jira/secure/ViewIssue.jspa?key=FOR-107" class="external">FOR-107</a>.
      </p>
      
<p>
        In previous versions of Forrest, and maybe in your application if
        you copied the fresh-site xdocs, there were inconsistent
        SystemIdentifiers. Some used local filenames, others used
        apache.org/forrest/dtd/ URIs. In v0.6 we changed to use
        System Identifiers at forrest.apache.org/dtd/ as resource URLs.
        You do not need to change them because you are using the entity
        resolver, but to remain consistent, it probably is best.
      </p>
      
<p>
        Beware if you have a catalog where the mapping is not declared properly.
        The Catalog Entity Resolver will miss the local mapping and happily
        go to the network to get the DTDs. That would cause Forrest to appear
        to be slow for you, yet it will still operate properly. While we are
        on that topic, if you use the XSLT document() function - there is a 
        <a href="http://issues.apache.org/bugzilla/show_bug.cgi?id=28341" class="external">Xalan bug 28341</a>
        for DTD resolution via document() - please help to fix it.
        Also see the 
        <a href="http://cocoon.apache.org/2.1/faq/faq-xslt.html" class="external">Cocoon FAQ</a>.
      </p>
    
</div>

    
<a name="d4296e186"></a><a name="local-catalog"></a>
<h3 class="h3">Projects can use a local CatalogManager.properties</h3>
<div class="section">
      
      
<p>
      You can add a local CatalogManager.properties to your 
      project.classes-dir to define your additional catalogs for DTDs
      and other entities.
      </p>
      
<p>
      If you do not add such a configuration file then there will be a
      harmless message on startup "CatalogManager.properties not found".
      </p>
    
</div>

    
<a name="d4296e198"></a><a name="skin-names"></a>
<h3 class="h3">Skins renamed and deleted</h3>
<div class="section">
      
      
<p>Skins now have a <a href="skins.html">naming convention</a>.</p>
      
<p>These skins were renamed (the old names still work, but may not in future releases).</p>
      
<table cellpadding="4" cellspacing="1" class="ForrestTable">
        
<tr>
<th colspan="1" rowspan="1">0.5 Name</th><th colspan="1" rowspan="1">0.6 Name</th>
</tr>
        
<tr>
<td colspan="1" rowspan="1">krysalis-site</td><td colspan="1" rowspan="1">crust</td>
</tr>
        
<tr>
<td colspan="1" rowspan="1">tigris-style</td><td colspan="1" rowspan="1">tigris</td>
</tr>
      
</table>
      
<p>These skins were deleted (the old names still work, but may not in future releases).</p>
      
<table cellpadding="4" cellspacing="1" class="ForrestTable">
        
<tr>
<th colspan="1" rowspan="1">0.5 Name</th><th colspan="1" rowspan="1">0.6 Alias</th>
</tr>
        
<tr>
<td colspan="1" rowspan="1">forrest-site</td><td colspan="1" rowspan="1">crust</td>
</tr>
        
<tr>
<td colspan="1" rowspan="1">forrest-css</td><td colspan="1" rowspan="1">crust</td>
</tr>
        
<tr>
<td colspan="1" rowspan="1">avalon-tigris</td><td colspan="1" rowspan="1">tigris</td>
</tr>
      
</table>
    
</div>

    
<a name="d4296e264"></a><a name="To+be+continued..."></a>
<h3 class="h3">To be continued...</h3>
<div class="section">
      
      
<p>...as more issues are discovered/remembered :)  Please send feedback
      to the
      <a href="../mail-lists.html#forrest-dev">mailing list</a>.</p>
    
</div>
  
</div>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table>
<tr>
<td>
<br>
<br>
</td>
</tr>
</table>
<table class="footer">
<tr>
<td width="90%" align="center" colspan="2"><span class="footnote"><a href="http://www.apache.org/licenses/">
                Copyright &copy; 2002-2004&nbsp;
                The Apache Software Foundation.</a>
            All rights reserved.
            <br>
<script language="JavaScript" type="text/javascript"><!--
              document.write(" - "+"Last Published: " + document.lastModified);
              //  --></script></span></td><td class="logos" align="right" nowrap="nowrap"></td>
</tr>
</table>
</body>
</html>
