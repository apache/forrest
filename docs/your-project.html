<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.6-dev">
<meta name="Forrest-skin-name" content="crust">
<title>Using Forrest</title>
<link type="text/css" href="../skin/page.css" rel="stylesheet">
<link type="text/css" href="../skin/forrest.css" rel="stylesheet">
<link rel="shortcut icon" href="../favicon.ico">
<script src="../skin/fontsize.js" language="javascript" type="text/javascript"></script><script src="../skin/menu.js" language="javascript" type="text/javascript"></script>
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="header">
<tr>
<td>
<div class="headerlogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../images/apache-forrest.png"></a>
</div>
</td><td align="center">
<div class="headerlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../images/project-logo.gif"></a>
</div>
</td><td valign="top" rowspan="2" align="right" class="search">
<form target="_blank" action="http://www.google.com/search" method="get">
<table border="0" cellpadding="0" cellspacing="0" class="dialog">
<tr>
<td height="10" class="border" colspan="3"></td>
</tr>
<tr>
<td height="8" colspan="3"></td>
</tr>
<tr>
<td></td><td nowrap="nowrap"><input value="forrest.apache.org" name="as_sitesearch" type="hidden"><input size="15" name="as_q" id="query" type="text">
			&nbsp;
			<input name="Search" value="Search" type="submit">
<br>
			the Apache Forrest site
			
			
		      </td><td></td>
</tr>
<tr>
<td height="7" colspan="3"></td>
</tr>
<tr>
<td class="search border bottom-left SBBL"></td><td class="search border bottomborder"></td><td class="search border bottom-right SBBR"></td>
</tr>
</table>
</form>
</td><td height="10" width="10" align="right"><span class="textheader">Forrest</span></td>
</tr>
<tr>
<td class="tabstrip" colspan="4">
<table border="0" cellpadding="0" cellspacing="0" class="tab">
<tr>
<td class="tab pre-separator"></td><td>
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../index.html">Welcome</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td class="spacer" colspan="3"></td>
</tr>
</table>
</td><td class="tab separator"></td><td>
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../contrib.html">Project</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td class="spacer" colspan="3"></td>
</tr>
</table>
</td><td class="tab separator"></td><td class="tab selected top-left TSTL"></td><td class="tab selected"><a class="base-selected" href="../docs/your-project.html">Documentation</a></td><td class="tab selected top-right TSTR"></td><td class="tab separator"></td><td>
<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="tab unselected top-left TUTL"></td><td class="tab unselected corner"><a class="base-not-selected" href="../howto/index.html">How-To</a></td><td class="tab unselected top-right TUTR"></td>
</tr>
<tr>
<td class="spacer" colspan="3"></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="level2tabstrip" colspan="2">
<table border="0" cellpadding="0" cellspacing="0" class="level2tab">
<tr>
<td><td class="tab pre-separator"></td><td class="level2tab selected"><a class="base-selected" href="../docs/your-project.html">Core</a></td><td class="level2tab separator">|</td><td class="level2tab selected"><a class="base-selected" href="../docs/forrestbot.html">ForrestBot</a></td><td class="level2tab separator">|</td><td class="level2tab selected"><a class="base-selected" href="../docs/forrestbar.html">ForrestBar</a></td></td>
</tr>
</table>
</td><td class="datenote level2tabstrip" colspan="2">
<div class="published">
<script type="text/javascript" language="JavaScript"><!--
              document.write("Published: " + document.lastModified);
              //  --></script>
</div>
</td>
</tr>
</table>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top">
<table class="menuarea" cellspacing="0" cellpadding="0">
<tr>
<td width="6px" valign="top">
<table border="0" cellpadding="0" cellspacing="0" class="leftpagemargin">
<tr>
<td class="subborder trail">&nbsp;</td>
</tr>
</table>
</td><td class="dialog">
<div class="menu">
<div onclick="SwitchMenu('menu_selected_1.1')" id="menu_selected_1.1Title" class="menutitle">Documentation</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup">
<div class="menupage">
<div class="menupagetitle">Using Forrest</div>
</div>
<div class="menuitem">
<a href="../docs/validation.html">XML Validation</a>
</div>
<div class="menuitem">
<a href="../docs/linking.html">Menus and Linking</a>
</div>
<div class="menuitem">
<a href="../docs/searching.html">Searching</a>
</div>
<div class="menuitem">
<a href="../docs/skins.html">Default Skins</a>
</div>
<div class="menuitem">
<a href="../docs/skin-package.html">Skin Packages</a>
</div>
<div class="menuitem">
<a href="../docs/forrest-contract.html">Our Contract</a>
</div>
<div class="menuitem">
<a href="../docs/compliance.html">Standards Compliance</a>
</div>
<div onclick="SwitchMenu('menu_1.1.9')" id="menu_1.1.9Title" class="menutitle">Advanced Topics</div>
<div id="menu_1.1.9" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/catalog.html">Using DTD Catalogs</a>
</div>
<div class="menuitem">
<a href="../docs/sitemap-ref.html">Sitemap Reference</a>
</div>
<div class="menuitem">
<a href="../docs/cap.html">Sourcetype Action</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.10')" id="menu_1.1.10Title" class="menutitle">Upgrading</div>
<div id="menu_1.1.10" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/upgrading_06.html">Upgrading to 0.6</a>
</div>
<div class="menuitem">
<a href="../docs/upgrading_05.html">Upgrading to 0.5</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2')" id="menu_1.2Title" class="menutitle">SubProjects</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/forrestbar.html">ForrestBar</a>
</div>
<div class="menuitem">
<a href="../docs/forrestbot.html">Forrestbot</a>
</div>
<div class="menuitem">
<a href="../docs/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3')" id="menu_1.3Title" class="menutitle">Reference docs</div>
<div id="menu_1.3" class="menuitemgroup">
<div onclick="SwitchMenu('menu_1.3.1')" id="menu_1.3.1Title" class="menutitle">DTD documentation</div>
<div id="menu_1.3.1" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/dtd-docs.html">Overview</a>
</div>
<div class="menuitem">
<a href="../docs/document-v20.dtdx.html">document-v20</a>
</div>
<div class="menuitem">
<a href="../docs/howto-v20.dtdx.html">howto-v20</a>
</div>
<div class="menuitem">
<a href="../docs/faq-v20.dtdx.html">faq-v20</a>
</div>
<div class="menuitem">
<a href="../docs/document-v13.dtdx.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../docs/howto-v13.dtdx.html">howto-v13</a>
</div>
<div class="menuitem">
<a href="../docs/faq-v13.dtdx.html">faq-v13</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3.2')" id="menu_1.3.2Title" class="menutitle">Doc samples</div>
<div id="menu_1.3.2" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/document-v13.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../docs/wiki-sample.html">Wiki Reference</a>
</div>
<div class="menuitem">
<a href="../docs/oowriter.html">OpenOffice Writer</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4')" id="menu_1.4Title" class="menutitle">Older Docs</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../docs/primer.html">Forrest Primer</a>
</div>
<div class="menuitem">
<a href="../docs/libre-intro.html">Libre</a>
</div>
<div class="menuitem">
<a href="../docs/dreams.html">Dream list</a>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td></td><td>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="border bottom-left"></td><td class="border bottomborder"></td><td class="border bottom-right"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" height="10"></td>
</tr>
</table>
</td><td width="100%" valign="top">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="subborder trail">
	         &nbsp;
			 <a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>&nbsp;
             </td><td nowrap="nowrap" align="right" class="subborder trail">
			 &nbsp;
	       
	        Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button"></td>
</tr>
<tr>
<td colspan="2" align="left">
<div class="content">
<table class="title">
<tr>
<td valign="middle">
<h1>Using Forrest</h1>
</td>
<div id="skinconf-txtlink"></div>
<td nowrap="nowrap" width="40" align="center"><a class="dida" href="your-project.pdf"><img alt="PDF" src="../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a></td>
</tr>
</table>
<h3>A tutorial on how to use Forrest in your own projects</h3>
<ul class="minitoc">
<li>
<a href="#intro">Introduction</a>
</li>
<li>
<a href="#installing">Installing Forrest</a>
</li>
<li>
<a href="#seeding_new">Seeding a new project</a>
</li>
<li>
<a href="#seeding_existing">Seeding an existing project</a>
</li>
<li>
<a href="#customizing">Customizing your project</a>
<ul class="minitoc">
<li>
<a href="#skinconf.xml">Configuring the Forrest skin: skinconf.xml</a>
</li>
<li>
<a href="#Changing_the_layout">Changing the layout: forrest.properties</a>
</li>
</ul>
</li>
<li>
<a href="#adding_content">Adding content</a>
<ul class="minitoc">
<li>
<a href="#site.xml">site.xml</a>
</li>
<li>
<a href="#tabs.xml">tabs.xml</a>
</li>
<li>
<a href="#images">Images</a>
</li>
</ul>
</li>
<li>
<a href="#sitemap.xmap">Advanced customizations: sitemap.xmap</a>
<ul class="minitoc">
<li>
<a href="#adding_new_content_type">Example: Adding a new content type</a>
<ul class="minitoc">
<li>
<a href="#new_dtd">Registering a new DTD</a>
</li>
</ul>
</li>
<li>
<a href="#integrating_rss">Example: integrating external RSS content</a>
</li>
</ul>
</li>
<li>
<a href="#skins">Forrest skins</a>
<ul class="minitoc">
<li>
<a href="#new_skin">Defining a new skin</a>
</li>
</ul>
</li>
<li>
<a href="#webapp">Interactive Forrest: faster turnaround when developing your docs</a>
<ul class="minitoc">
<li>
<a href="#forrest_run">Running as a webapp</a>
<ul class="minitoc">
<li>
<a href="#using_webapp">Using the webapp</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#invoking_from_ant">Invoking Forrest from Ant</a>
</li>
</ul>
    
<a name="N10010"></a><a name="intro"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Introduction</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        This tutorial will lead you through the process of installing Forrest, and using
        it to create a new project, or add Forrest-based docs to an existing project.
      </p>
    
</div>

   
<a name="N1001A"></a><a name="installing"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Installing Forrest</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
     
     
<p>
       
<a href="http://forrest.apache.org/mirrors.cgi">Download</a> the latest release
       of Forrest, or
       if you want to try the development version,
       <a href="../build.html">build Forrest</a> from source.
     </p>
     
<p>
     After downloading and extracting forrest, you need to add environment variables.
     </p>
     
<p>In Unix/Linux:</p>
     
<pre class="code">
~/apache-forrest-0.6$ export FORREST_HOME=`pwd`
~/apache-forrest-0.6$ export PATH=$PATH:$FORREST_HOME/bin
     </pre>
     
<p>In Windows:</p>
     
<pre class="code">
Go to "My Computer", "Properties", "Advanced", "Environment Variables"
and add:
<span class="codefrag">FORREST_HOME</span> as <span class="codefrag">C:\full\path\to\apache-forrest-0.6</span>
<span class="codefrag">PATH</span> as <span class="codefrag">%PATH%;%FORREST_HOME%\bin</span>
     
</pre>
     
<p>
       To see what the 'forrest' command can do, type 'forrest -projecthelp'.
       The build targets that are marked with * are the commonly used ones.
       </p>
     
<pre class="code">
Apache Forrest.  Run 'forrest -projecthelp' to list options

Buildfile: /usr/local/svn/forrest/src/core/bin/../forrest.build.xml

    *=======================================================*
    |                 Forrest Site Builder                  |
    |                        0.6-dev                        |
    *=======================================================*
  
             Call this through the 'forrest' command
  
Main targets:

 available-skins       What skins are available?
 clean                 * Clean all directories and files generated during
                        the build
 install-skin          Install the needed skin from the remote repository
 package-skin          Make a package of an existing skin
 run                   * Run Jetty (instant live webapp)
 run_custom_jetty      Run Jetty with configuration file found in the project
 run_default_jetty     Run Jetty with configuration file found in Forrest
 seed                  * Seeds a directory with a template project doc structure
 site                  * Generates a static HTML website for this project
 validate              Validate all: xdocs, skins, sitemap, etc
 validate-sitemap      Validate the project sitemaps
 validate-skinchoice   Validate skin choice
 validate-skinconf     Validate skinconf
 validate-skins        Validate skins
 validate-stylesheets  Validate XSL files
 validate-xdocs        Validate the project xdocs
 war                   * Generates a dynamic servlet-based website
                         (a packaged .war file)
 webapp                Generates a dynamic servlet-based website
                         (an unpackaged webapp).
 webapp-local          Generates a dynamic servlet-based website
                         (an unpackaged webapp). Note this webapp is suitable
                         for local execution only, use the 'war' or 'webapp'
                         target if you wish to deploy remotely.
Default target: site
     </pre>
      
<p>
        As 'site' is the default target, just running 'forrest' without options will
        generate a "static HTML website". For example, typing 'forrest' in the
       top-level "forrest" directory would build Forrest's own website.
       But we're going to be building a new site for your project, so read on.
      </p>
    
</div>

    
<a name="N10053"></a><a name="seeding_new"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Seeding a new project</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        'Seeding' a project is our own arborial term for adding a template
        documentation set to your project, which you can then customize.
      </p>
      
<p>
        To try this out, create a completely new directory, change directory
        to it, and do 'forrest seed':
      </p>
      
<pre class="code">
[/home/me/forrest/my-test]$ forrest seed

Apache Forrest.  Run 'forrest -projecthelp' to list options

Buildfile: /usr/local/svn/forrest/src/core/bin/../forrest.build.xml

init-props:
Loading project specific properties from
 /home/me/forrest/my-test/forrest.properties
...
echo-settings:

check-contentdir:

ensure-nocontent:

seed:
Copying 41 files to /home/me/forrest/my-test

-------------------------------
~~ Template project created! ~~

Here is an outline of the generated files:

/                        # /home/me/forrest/my-test
/status.xml              # List of project developers, todo list and change log
/forrest.properties      # Optional file describing your site layout
/src/documentation/      # Doc-specific files
/src/documentation/skinconf.xml    # Info about your project used by the skin
/src/documentation/content/        # Site content.
/src/documentation/content/xdocs   # XML content.
/src/documentation/content/xdocs/index.xml # Home page
/src/documentation/content/xdocs/site.xml  # Navigation file for site structure
/src/documentation/content/xdocs/tabs.xml  # Skin-specific 'tabs' file.
/src/documentation/content/*.html,pdf # Static content files, may have subdirs
/src/documentation/resources/images   # Project images (logos, etc)
# you can create other directories as needed (see forrest.properties)


What to do now?

- Render this template to static HTML by typing 'forrest'.
  View the generated HTML in a browser to make sure everything works.
- Alternatively 'forrest run' and browse to http://localhost:8888/ live demo.
- Edit status.xml and src/documentation/skinconf.xml
  to customize for your project.
- Start adding content in xdocs/ remembering to declare new files in site.xml
- Follow the document http://forrest.apache.org/docs/your-project.html
- Provide any feedback to dev@forrest.apache.org

Thanks for using Apache Forrest
-------------------------------

BUILD SUCCESSFUL
Total time: 5 seconds
      </pre>
      
<div class="frame note">
<div class="label">Note</div>
<div class="content">
        As you have probably noticed, we like to document things right in the
        script, on the theory that people only read online docs when desperate :)
      </div>
</div>
      
<p>
        You now have a template documentation structure all set up:
      </p>
      
<pre class="code">
[/home/me/forrest/my-test]$ tree
.
|-- build
|   `-- tmp
|       `-- projfilters.properties
|-- forrest.properties
|-- src
|   `-- documentation
|       |-- README.txt
|       |-- classes
|       |   `-- CatalogManager.properties
|       |-- content
|       |   |-- hello.pdf
|       |   |-- test1.html
|       |   |-- test2.html
|       |   `-- xdocs
|       |       |-- images
|       |       |   |-- group-logo.gif
|       |       |   |-- group.svg
|       |       |   |-- icon.png
|       |       |   |-- project-logo.gif
|       |       |   `-- project.svg
|       |       |-- index.xml
|       |       |-- samples
|       |       |   |-- ascii-art.xml
|       |       |   |-- cocoon-pyramid.aart
|       |       |   |-- faq.xml
|       |       |   |-- ihtml-sample.ihtml
|       |       |   |-- index.xml
|       |       |   |-- openoffice-writer.sxw
|       |       |   |-- sample.xml
|       |       |   |-- sample2.xml
|       |       |   |-- sdocbook.xml
|       |       |   |-- subdir
|       |       |   |   |-- book-sample.xml
|       |       |   |   `-- index.xml
|       |       |   `-- wiki-sample.cwiki
|       |       |-- site.xml
|       |       `-- tabs.xml
|       |-- skinconf.xml
|       `-- translations
|           |-- langcode.xml
|           |-- languages_en.xml
|           |-- languages_es.xml
|           |-- menu.xml
|           |-- menu_af.xml
|           |-- menu_de.xml
|           |-- menu_es.xml
|           |-- menu_it.xml
|           |-- menu_no.xml
|           |-- menu_ru.xml
|           |-- menu_sk.xml
|           |-- tabs.xml
|           `-- tabs_es.xml
|-- status.xml
      </pre>
      
<p>
        To render this to HTML, type 'forrest'. You should have a HTML site rendered
        into the <span class="codefrag">build/site</span> directory:
      </p>
      
<div align="center">
<img class="figure" alt="New project" src="images/new-project.png" height="356" width="500"></div>
      
<p>
        Practise with adding new content. Change to the directory
        <span class="codefrag">src/documentation/content/xdocs</span> and copy the file
        <span class="codefrag">index.xml</span> to create <span class="codefrag">my-new-file.xml</span> as a
        new document. Edit it to change some text. Add an entry to 
        <span class="codefrag">site.xml</span> by copying one of the other entries and
        changing it to suit. Now do 'forrest' to see the result.
      </p>
    
</div>
    
<a name="N10089"></a><a name="seeding_existing"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Seeding an existing project</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        In the section above, we have run 'forrest seed' in an empty directory
        to create a new project. If you have an existing codebase to which you
        want to add Forrest docs, then run 'forrest seed' in your project base
        directory, and the Forrest doc structure will be grafted onto your
        project. This procedure only needs to be done once.
      </p>
      
<p>
        If your project already has XML documentation, it may be easier to tell
        Forrest where the XML sources are, rather than rearrange your project
        directories to accommodate Forrest. This can be done by editing
        <span class="codefrag">forrest.properties</span> (consult
        the <a href="#Changing_the_layout">Changing the layout</a>
        section for more details).
      </p>
    
</div>
    
<a name="N1009D"></a><a name="customizing"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Customizing your project</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        Having seeded a project with template docs, you will now want to customize it
        to your project's needs. Here we will deal with configuring the skin, and
        changing the project layout.
      </p>
      
<a name="N100A6"></a><a name="skinconf.xml"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Configuring the Forrest skin: skinconf.xml</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          Most Forrest skins can be customized through a single XML file,
          <span class="codefrag">src/documentation/skinconf.xml</span>, which looks like this:
        </p>
<pre class="code">
&lt;!--
Skin configuration file. This file contains details of your project,
which will be used to configure the chosen Forrest skin.
--&gt;

 &lt;!DOCTYPE skinconfig PUBLIC
        "-//APACHE//DTD Skin Configuration V0.6-2//EN"
        "skinconfig-v06-2.dtd"&gt;

&lt;skinconfig&gt;
  &lt;!-- To enable lucene search add provider="lucene"
    Add box-location="alt" to move the search box to an alternate location
    (if the skin supports it) and box-location="all" to show it in all
    available locations on the page.  Remove the &lt;search&gt; element to show
    no search box.
  --&gt;
  &lt;search name="MyProject" domain="mydomain"/&gt;

  &lt;!-- Disable the print link? If enabled, invalid HTML 4.0.1 --&gt;
  &lt;disable-print-link&gt;true&lt;/disable-print-link&gt;  
  &lt;!-- Disable the PDF link? --&gt;
  &lt;disable-pdf-link&gt;false&lt;/disable-pdf-link&gt;
  &lt;!-- Disable the xml source link? --&gt;
  &lt;!-- The xml source link makes it possible to access the xml rendition
    of the source frim the html page, and to have it generated statically.
    This can be used to enable other sites and services to reuse the
    xml format for their uses. Keep this disabled if you don't want other
    sites to easily reuse your pages.--&gt;
  &lt;disable-xml-link&gt;true&lt;/disable-xml-link&gt;
  
  &lt;!-- Disable navigation icons on all external links? --&gt;
  &lt;disable-external-link-image&gt;false&lt;/disable-external-link-image&gt;
  
  &lt;!-- Disable w3c compliance links? --&gt;
  &lt;disable-compliance-links&gt;false&lt;/disable-compliance-links&gt;
  &lt;!-- Render mailto: links unrecognisable by spam harvesters? --&gt;
  &lt;obfuscate-mail-links&gt;true&lt;/obfuscate-mail-links&gt;

  &lt;!-- mandatory project logo
       skin: forrest-site renders it at the top --&gt;
  &lt;project-name&gt;MyProject&lt;/project-name&gt;
  &lt;project-description&gt;MyProject Description&lt;/project-description&gt;
  &lt;project-url&gt;http://myproj.mygroup.org/&lt;/project-url&gt;
  &lt;project-logo&gt;images/project.png&lt;/project-logo&gt;
  &lt;!-- Alternative static image:
  &lt;project-logo&gt;images/project-logo.gif&lt;/project-logo&gt; --&gt;

  &lt;!-- optional group logo
       skin: forrest-site renders it at the top-left corner --&gt;
  &lt;group-name&gt;MyGroup&lt;/group-name&gt;
  &lt;group-description&gt;MyGroup Description&lt;/group-description&gt;
  &lt;group-url&gt;http://mygroup.org&lt;/group-url&gt;
  &lt;group-logo&gt;images/group.png&lt;/group-logo&gt;
  &lt;!-- Alternative static image:
  &lt;group-logo&gt;images/group-logo.gif&lt;/group-logo&gt; --&gt;

  &lt;!-- optional host logo (e.g. sourceforge logo)
       skin: forrest-site renders it at the bottom-left corner --&gt;
  &lt;host-url&gt;&lt;/host-url&gt;
  &lt;host-logo&gt;&lt;/host-logo&gt;
  
  &lt;!-- relative url of a favicon file, normally favicon.ico --&gt;
  &lt;favicon-url&gt;&lt;/favicon-url&gt;

  &lt;!-- The following are used to construct a copyright statement --&gt;
  &lt;year&gt;2004&lt;/year&gt;
  &lt;vendor&gt;The Acme Software Foundation.&lt;/vendor&gt;
  &lt;!-- The optional copyright-link URL will used as a link in the
    copyright statement
  &lt;copyright-link&gt;http://www.apache.org/licenses/&lt;/copyright-link&gt;
  --&gt;

  &lt;!-- Some skins use this to form a 'breadcrumb trail' of links.
    If you don't want these, then set the attributes to blank.
    The DTD purposefully requires them.
    Use location="alt" to move the trail to an alternate location
    (if the skin supports it).
  --&gt;
  &lt;trail&gt;
    &lt;link1 name="myGroup" href="http://www.apache.org/"/&gt;
    &lt;link2 name="myProject" href="http://forrest.apache.org/"/&gt;
    &lt;link3 name="" href=""/&gt;
  &lt;/trail&gt;

  &lt;!-- Configure the TOC, i.e. the Table of Contents.
  @max-depth
   how many "section" levels need to be included in the
   generated Table of Contents (TOC). 
  @min-sections
   Minimum required to create a TOC.
  @location ("page","menu","page,menu")
   Where to show the TOC.
  --&gt;
  &lt;toc max-depth="2" min-sections="1" location="page"/&gt;

  &lt;!-- Heading types can be clean|underlined|boxed  --&gt;
  &lt;headings type="boxed"/&gt;

  &lt;extra-css&gt;
    &lt;!-- A sample to show how the class attribute can be used --&gt;
    p.quote {
      margin-left: 2em;
      padding: .5em;
      background-color: #f0f0f0;
      font-family: monospace;
    }
  &lt;/extra-css&gt;

  &lt;colors&gt;
  &lt;!-- CSS coloring examples omitted for brevity --&gt;
  &lt;/colors&gt;
 
  &lt;!-- Settings specific to PDF output.  --&gt;
  &lt;pdf&gt;
    &lt;!-- 
       Supported page sizes are a0, a1, a2, a3, a4, a5, executive,
       folio, legal, ledger, letter, quarto, tabloid (default letter).
       Supported page orientations are portrait, landscape (default
       portrait).
       Supported text alignments are left, right, justify (default left).
    --&gt;
    &lt;page size="letter" orientation="portrait" text-align="left"/&gt;

    &lt;!--
       Margins can be specified for top, bottom, inner, and outer
       edges. If double-sided="false", the inner edge is always left
       and the outer is always right. If double-sided="true", the
       inner edge will be left on odd pages, right on even pages,
       the outer edge vice versa.
       Specified below are the default settings.
    --&gt;
    &lt;margins double-sided="false"&gt;
      &lt;top&gt;1in&lt;/top&gt;
      &lt;bottom&gt;1in&lt;/bottom&gt;
      &lt;inner&gt;1.25in&lt;/inner&gt;
      &lt;outer&gt;1in&lt;/outer&gt;
    &lt;/margins&gt;

    &lt;!--
      Print the URL text next to all links going outside the file
    --&gt;
    &lt;show-external-urls&gt;false&lt;/show-external-urls&gt;
  &lt;/pdf&gt;

  &lt;!-- Credits are typically rendered as a set of small clickable
    images in the page footer --&gt;
  &lt;credits&gt;
    &lt;credit&gt;
      &lt;name&gt;Built with Apache Forrest&lt;/name&gt;
      &lt;url&gt;http://forrest.apache.org/&lt;/url&gt;
      &lt;image&gt;images/built-with-forrest-button.png&lt;/image&gt;
      &lt;width&gt;88&lt;/width&gt;
      &lt;height&gt;31&lt;/height&gt;
    &lt;/credit&gt;
    &lt;!-- A credit with @role='pdf' will have its name and url
      displayed in the PDF page's footer. --&gt;
  &lt;/credits&gt;

&lt;/skinconfig&gt;
</pre>
<p>
          Customise this file for your project. The <span class="codefrag">images/</span> directory
          mentioned in 'project-logo' and 'group-logo' elements corresponds to the
          <span class="codefrag">src/documentation/resources/images</span> directory
          (this mapping is done automatically by the sitemap).
        </p>
<p>
          Having edited this file (and ensured it is valid XML), re-run the 'forrest'
          command in the site root, and the site would be updated.
        </p>
      
<a name="N100C3"></a><a name="Changing_the_layout"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Changing the layout: forrest.properties</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          Forrest allows you to place files anywhere you want in your
          project, so long as you tell Forrest where you have placed the
          major file types.
        </p>
<p>
          The <span class="codefrag">forrest.properties</span> file maps from your directory
          layout to Forrest's. If you generated your site with 'forrest seed', you
          will have one pre-written, with all the entries commented out.
        </p>
<div class="frame note">
<div class="label">Note</div>
<div class="content">
         You only need to un-comment entries if you are going to change them
         to something different.
         If you keep in synchronisation with the 'forrest seed' defaults,
         then it is easy to diff each time that you update.
        </div>
</div>
<p>
          The main entries (with default values) are:
        </p>
<pre class="code">
# Properties that must be set to override the default locations
#
# Parent properties must be set. This usually means uncommenting
# project.content-dir if any other property using it is uncommented

#project.status=status.xml
#project.content-dir=src/documentation
#project.conf-dir=${project.content-dir}/conf
#project.sitemap-dir=${project.content-dir}
#project.xdocs-dir=${project.content-dir}/content/xdocs
#project.resources-dir=${project.content-dir}/resources
#project.stylesheets-dir=${project.resources-dir}/stylesheets
#project.images-dir=${project.resources-dir}/images
#project.schema-dir=${project.resources-dir}/schema
#project.skins-dir=${project.content-dir}/skins
#project.skinconf=${project.content-dir}/skinconf.xml
#project.lib-dir=${project.content-dir}/lib
#project.classes-dir=${project.content-dir}/classes
       </pre>
<p>
         For example, if you wish to keep XML documentation in src/xdocs rather than
         <span class="codefrag">src/documentation/content/xdocs</span> simply change the
         definition for project.xdocs-dir
       </p>
<pre class="code">project.xdocs-dir=src/xdocs</pre>
<p>
         For example, to emulate the simple 
         <a class="external" href="http://maven.apache.org/">Maven</a> format:
       </p>
<div class="pre">
         /xdocs
         /xdocs/images
         /xdocs/stylesheets
       </div>
<p>Here are the required property definitions:</p>
<pre class="code">
project.content-dir=xdocs
project.sitemap-dir=${project.content-dir}
project.xdocs-dir=${project.content-dir}
project.stylesheets-dir=${project.content-dir}/stylesheets
project.images-dir=${project.content-dir}/images
project.skinconf=${project.content-dir}/skinconf.xml
         </pre>
<div class="frame note">
<div class="label">Note</div>
<div class="content">
           Internally, Forrest rearranges the specified directory into the default
           <span class="codefrag">src/documentation/content/xdocs</span> structure. In the layout above, we have
           overlapping directories, so you will end up with duplicate files. This small
           glitch doesn't usually cause problems; just always remember that all links
           are resolved through the sitemap.
         </div>
</div>

     
</div>

    
<a name="N10102"></a><a name="adding_content"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Adding content</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        Now you can start adding content of your own, in
        <span class="codefrag">src/documentation/content/xdocs</span>
      
</p>
      
<a name="N1010E"></a><a name="site.xml"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>site.xml</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          When adding a new xml document, you would add an entry to the project's
          <span class="codefrag">site.xml</span> file. This site.xml is like a site index, and is rendered as
          the vertical column of links in the default skin.  Look at Forrest's own
          xdocs for an example.  More detailed info about site.xml is provided in 
          the document <a href="../docs/linking.html">Menus and Linking</a>.
        </p>
      
<a name="N1011F"></a><a name="tabs.xml"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>tabs.xml</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          The <span class="codefrag">tabs.xml</span> file is used to produce the 'tabs'.
          which enable users to quickly jump to sections of your site.
          See the
          <a href="../docs/linking.html#menu_generation">menu generation</a> documentation
          for more details, and again, consult Forrest's own docs for a usage
          example.
        </p>
<div align="center">
<img class="figure" alt="Tabs" src="images/tabs.png"></div>
<p>You can have one or two levels of tabs. The images above show a 
        single level. However, you can create a second level that
        will only be displayed when its parent tab is selected. For example,
        the <span class="codefrag">tabs.xml</span> snippet below will display either one or
        two rows of tabs, depending on which of the top level tabs is selected.
        The first row will have two tabs: one labelled <span class="codefrag">How-Tos</span>
        and the other labelled <span class="codefrag">Apache XML Projects</span>. When the 
        <span class="codefrag">How-Tos</span> tab is selected there will
        be no second row of tabs. However, when the <span class="codefrag">Apache XML
        Projects</span> tab is selected, a second row of tabs will be displayed
        below the first.</p>
<pre class="code">
  &lt;tab label="How-Tos" dir="community/howto/"/&gt;
  &lt;tab label="Apache XML Projects" href="http://xml.apache.org"&gt;
    &lt;tab label="Forrest" href="http://forrest.apache.org/"/&gt;
    &lt;tab label="Xerces" href="http://xml.apache.org/xerces"/&gt;
  &lt;/tab&gt;
</pre>
      
<a name="N1014A"></a><a name="images"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Images</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          Images usually go in <span class="codefrag">src/documentation/resources/images/</span>
          The default sitemap
          maps this directory to <span class="codefrag">images/</span>, so image tags will typically look
          like &lt;figure src="images/project-logo.png" alt="Project Logo"/&gt; 
        </p>
    
</div>

    
<a name="N1015B"></a><a name="sitemap.xmap"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Advanced customizations: sitemap.xmap</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        The Cocoon sitemap is a set of rules for generating content (HTML, PDFs etc)
        from XML sources. Forrest has a default sitemap, which is adequate for
        everyday sites. For example, the
        <a href="..//">Forrest website</a> itself just uses the
        default sitemap.
      </p>
      
<p>
        Sometimes, one needs to go beyond the default set of rules. This is where
        Forrest really shines, because its Cocoon backend allows virtually any
        processing pipeline to be defined. For example, one can:
      </p>
      
<ul>
        
<li>Transform custom XML content types with XSLT stylesheets</li>
        
<li>Generate PNG or JPEG images from 
        <a class="external" href="http://www.w3.org/TR/SVG/">SVG</a> XML files.
          (<strong>Note:</strong> Forrest's sitemap now does this natively.)</li>
        
<li>Integrate external XML feeds (e.g. RSS) into your site's content.
          (<strong>Note:</strong> See issues.xmap for an example.)</li>
        
<li>Merge XML sources via aggregation, or make content from large XML
          sources available as "virtual" files.
          (<strong>Note:</strong> Forrest's default sitemap defines a whole-site HTML
          and PDF, available as <span class="codefrag">wholesite.html</span> and <span class="codefrag">wholesite.pdf</span>.)</li>
        
<li>Read content from exotic sources like
        <a class="external" href="http://www.rpbourret.com/xml/XMLDBLinks.htm">XML
            databases</a>
</li>
        
<li>Integrate any of <a class="external" href="http://cocoon.apache.org/2.1/">Cocoon's</a> vast array
          of capabilities.  The possibilities are best appreciated by
          downloading the latest Cocoon distribution and playing with the
          samples.</li>
      
</ul>
      
<p>
        If your site defines its own sitemap, it must perform all the operations of
        the Forrest default.  Simply copy the relevant sitemaps
        that you wish to over-ride, from Forrest sitemaps at
        <span class="codefrag">forrest/src/core/context/*.xmap</span> into your
        <span class="codefrag">src/documentation</span> directory (or wherever
        <span class="codefrag">${project.sitemap-dir}</span> points to).
      </p>
      
<p>
        The sitemap syntax is described in the 
        <a class="external" href="http://cocoon.apache.org/2.1/userdocs/concepts/sitemap.html">Cocoon sitemap docs</a>.  The Forrest
        sitemap is broken into multiple files. The main one is
        <strong>sitemap.xmap</strong> which delegates to others.  See the
         <a href="../docs/sitemap-ref.html">Sitemap Reference</a> for a tour of the
        default sitemap.
      </p>
      
<a name="N101B4"></a><a name="adding_new_content_type"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Example: Adding a new content type</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          An example scenario is that we have a specialised list of downloads
          for a certain software package. It would be best to represent the
          download information in a custom XML format:
        </p>
<pre class="code">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE document PUBLIC "-//Acme//DTD Download Documentation V1.0//EN"
  "dtd/download-v10.dtd"&gt;
&lt;document&gt; 
  &lt;header&gt;
    &lt;title&gt;Downloading Binaries&lt;/title&gt;
  &lt;/header&gt;
  &lt;body&gt;
    &lt;section&gt;
      &lt;title&gt;Downloading binaries&lt;/title&gt;
      &lt;p&gt;
        Here are the binaries for FooProject
      &lt;/p&gt;
      &lt;release version="0.9.13" date="2002-10-11"&gt;
        &lt;downloads&gt;
          &lt;file
            url="http://prdownloads.sf.net/aft/fooproj-0.9.13-bin.zip?download"
            name="fooproj-0.9.13-bin.zip"
            size="5738322"/&gt;
          &lt;file
            url="http://prdownloads.sf.net/aft/fooproj-0.9.13-src.zip?download"
            name="fooproj-0.9.13-src.zip"
            size="10239777"/&gt;
        &lt;/downloads&gt;
      &lt;/release&gt;
      &lt;release version="0.9.12" date="2002-10-08"&gt;
        &lt;downloads&gt;
          &lt;file
            url="http://prdownloads.sf.net/aft/fooproj-0.9.12-src.zip?download"
            name="fooproj-0.9.12-src.zip"
            size="10022737"/&gt;
         &lt;/downloads&gt;
       &lt;/release&gt;
    &lt;/section&gt;
    &lt;section&gt;
      &lt;title&gt;Getting FooProject from CVS&lt;/title&gt;
      &lt;p&gt;....&lt;/p&gt;
    &lt;/section&gt;
  &lt;/body&gt;
&lt;/document&gt;</pre>
<p>This file called "<span class="codefrag">download.xml</span>" would be placed in
          your content directory (typically
          <span class="codefrag">src/documentation/content/xdocs</span>) and an entry added to
          <span class="codefrag">site.xml</span>
</p>
<p>
          To handle these special tags, one would write a stylesheet to convert
          them to the intermediate Forrest xdocs structure. Here is such a stylesheet,
          called "<span class="codefrag">download2document.xsl</span>" ...
        </p>
<pre class="code">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

  &lt;xsl:template match="release"&gt;
    &lt;section&gt;
      &lt;title&gt;Version &lt;xsl:value-of select="@version"/&gt; (released
          &lt;xsl:value-of select="@date"/&gt;)&lt;/title&gt;
      &lt;table&gt;
        &lt;tr&gt;&lt;th&gt;File&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;/tr&gt;
        &lt;xsl:apply-templates select="downloads/*"/&gt;
      &lt;/table&gt;
    &lt;/section&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="file"&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;link href="{@url}"&gt;&lt;xsl:value-of select="@name"/&gt;&lt;/link&gt;&lt;/td&gt;
      &lt;td&gt;&lt;xsl:value-of
           select="format-number(@size div (1024*1024), '##.##')"/&gt; MB&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@* | node() | comment()"&gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*"/&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;

</pre>
<p>
            Place this file in the default stylesheets directory,
            <span class="codefrag">src/documentation/resources/stylesheets</span> (or wherever
            ${project.stylesheets-dir} points).
          </p>
<p>
            Now the sitemap needs to be modified to transform our custom xml
            structure into the xdocs structure. We need to register our new
            DTD and associate a transformation with it.
          </p>
<div class="frame note">
<div class="label">Note</div>
<div class="content">
            The <a href="../docs/sitemap-ref.html">Sitemap
            Reference</a> provides details on how the sitemap works, and
            how it can be customized for specific projects.  Specifically, the
            part to read is <a href="../docs/sitemap-ref.html#forrest_xmap">the
            forrest.xmap section</a>.
          </div>
</div>
<ol>
            
<li>Override <span class="codefrag">forrest.xmap</span> in your project by copying
              <span class="codefrag">$FORREST_HOME/context/forrest.xmap</span> to your project's
              <span class="codefrag">src/documentation/</span> directory.</li>
            
<li>
              
<p>Edit <span class="codefrag">forrest.xmap</span> ... locate the
                <strong><span class="codefrag">sourcetype</span></strong> action and register
                the new document type:</p>
              
<pre class="code">
&lt;sourcetype name="download"&gt;
  &lt;document-declaration public-id="-//Acme//DTD Download Documentation V1.0//EN" /&gt;
&lt;/sourcetype&gt;</pre>
            
</li>
            
<li>
              
<p>Locate where the sourcetype action is used, and add a
                <span class="codefrag">&lt;map:when&gt;</span> to handle the conversion
                for our document type:</p>
              
<pre class="code">
&lt;map:when test="download"&gt;
  &lt;map:transform
    src="resources/stylesheets/download2document.xsl" /&gt;
&lt;/map:when&gt;</pre>
            
</li>
          
</ol>
<a name="N10217"></a><a name="new_dtd"></a>
<h4>Registering a new DTD</h4>
<p>
                 By default, Forrest requires that all XML files be valid, i.e.
                 they must have a DOCTYPE declaration and associated DTD, and
                 validate against it.  Our new 'downloads' document type is no
                 exception.  The <a href="../docs/validation.html">XML
                   Validation</a> document continues this example, showing how
                 to register a new document type.  Briefly, this involves:
               </p>
<ul>
                 
<li>Create a new DTD or (in our case) extend an existing
                   one.</li>
                 
<li>Place the new DTD in the
                   <span class="codefrag">${project.schema-dir}/dtd</span> directory.</li>
                 
<li>Add an XML Catalog to enable a mapping from the
                   DOCTYPE public id to the relevant DTD file.</li>
               
</ul>
<p>
                 Please see <a href="../docs/validation.html">XML Validation</a>
                 for the full story.
               </p>
          
<a name="N1023C"></a><a name="integrating_rss"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Example: integrating external RSS content</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>Similar to the previous example, we can integrate RSS into our
              site by over-riding and editing the sitemap.  As described in 
              the "source pipelines" section of the
              <a href="../docs/sitemap-ref.html#source_pipelines">sitemap reference</a>,
              Forrest's <span class="codefrag">sitemap.xmap</span> delegates source
              handling to various subsitemaps in a <span class="codefrag">**.xml</span> block.
              We can add another *.xml matcher in this section, just before the
              catch-all subsitemap:
            </p>
<pre class="code">&lt;map:match pattern="wholesite.xml"&gt;
    &lt;map:mount uri-prefix="" src="aggregate.xmap" check-reload="yes" /&gt;
  &lt;/map:match&gt;
  <strong>
&lt;map:match pattern="weblog.xml"&gt;
  &lt;map:generate src="http://blogs.cocoondev.org/stevenn/index.rss"/&gt;
  &lt;map:transform src="resources/stylesheets/rssissues2document.xsl"/&gt;
  &lt;map:call resource="skinit"&gt;
    &lt;map:parameter name="type" value="document2html"/&gt;
    &lt;map:parameter name="path" value="weblog.xml"/&gt;
  &lt;/map:call&gt;
&lt;/map:match&gt;</strong>

  &lt;!-- Default source types --&gt;
  &lt;map:mount uri-prefix="" src="forrest.xmap" check-reload="yes" /&gt;

&lt;/map:match&gt;</pre>
<p>(You will want to rename and customize
              <span class="codefrag">rssissues2document.xsl</span> to your needs.)</p>
      
</div>

      
<a name="N1025E"></a><a name="skins"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Forrest skins</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
        
        
<p>
          As Forrest separates content from presentation, we can plug in different
          "skins" to instantly change a site's look &amp; feel.  Forrest provides one
          primary skin, <span class="codefrag">forrest-site</span>, and a handful of others in various
          states of development.
        </p>
        
<p>
          To change the skin, edit the <span class="codefrag">forrest.properties</span> file, and
          change the following entry to the name of the new skin.
        </p>
        
<pre class="code">project.skin=forrest-site</pre>
        <!--
        <note>
          The mechanism for defining which skin to use will change in the future from
          Ant @token@ values to Cocoon input module values.
        </note>
        -->
        
<a name="N10276"></a><a name="new_skin"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Defining a new skin</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
            Projects can define their own skin, in the
            <span class="codefrag">src/documentation/skins</span> directory (or wherever
            <span class="codefrag">${project.skins-dir}</span> points). The default sitemap assumes a
            certain skin layout, so the easiest way to create a new skin is by
            copying an existing Forrest skin.  For example, copy
            <span class="codefrag">forrest/src/core/context/skins/tigris-style</span>
            to your project area at
            <span class="codefrag">src/documentation/skins/myskin</span> and add
            <span class="codefrag">project.skin=myskin</span> to forrest.properties
          </p>
<p>
            In addition, when using a project-specific skin it is a good idea to
            also use a project-specific sitemap.  This is to protect your skin
            from changes in the Forrest default sitemap.  While the sitemap-skin
            contract (expressed as XSLT parameters) is now fairly stable, this
            should not be relied on.
          </p>
<p>
            The two most interesting XSLT stylesheets involved are:
          </p>
<dl>
            
<dt>
<span class="codefrag">xslt/html/document2html.xsl</span>
</dt>
            
<dd>
              This stylesheet is applied to individual Forrest xdocs XML files, and
              converts them to HTML suitable for embedding in a larger HTML page.
            </dd>
            
<dt>
<span class="codefrag">xslt/html/site2xhtml.xsl</span>
</dt>
            
<dd>
              This stylesheet generates the final HTML file from an intermediate
              'site' structure produced by the other stylesheets. It defines the general
              layout, and adds the header and footer.
            </dd>
          
</dl>
<p>
            Typically there is a lot of commonality between skins.  XSLT
            provides an 'import' mechanism whereby one XSLT can extend another.
            Forrest XSLTs typically 'import' from a common base:
          </p>
<pre class="code">
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

  &lt;xsl:import href="../../../common/xslt/html/document2html.xsl"/&gt;

  <strong>... overrides of default templates ...</strong> 
&lt;/xsl:stylesheet&gt;</pre>
<p>In order to use this feature in your custom skins you must copy
          the common skin from the forrest distribution into your custom skins 
          directory (see <span class="codefrag">forrest/src/core/context/skins/common</span>).
          This will protect your skin from changes in the Forrest common skin,
          but you must remember to update this skin in order to take advantage
          of new features added over time by the Forrest team.</p>
<p>This is particularly relevant for menu rendering (book2menu.xsl),
            where the common stylesheet does the 'logic' of which item is
            selected, and over-riding stylesheets define the presentation.</p>
      
</div>

    
<a name="N102BA"></a><a name="webapp"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Interactive Forrest: faster turnaround when developing your docs</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        In comparison to simpler tools (like 
        <a class="external" href="http://jakarta.apache.org/velocity/anakia.html">Anakia</a>) the Cocoon command-line mode
        (and hence Forrest command-line mode) is slow.
        As the <a href="../docs/dreams.html">dream list</a> notes, Forrest was
        originally intended to be used for
        dynamic sites, and the Cocoon crawler used only to create static
        snapshots for mirroring.  This section describes how, by using
        a "live" Forrest webapp instance, the Forrest-based documentation
        development can be faster and easier than with comparable tools.
      </p>
      
<a name="N102CB"></a><a name="forrest_run"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h4">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h4>Running as a webapp</h4>
</td><td></td>
</tr>
<tr class="subheading">
<td class="bottom-left"></td><td></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<p>
          Type '<span class="codefrag">forrest run</span>' in your project root to start Forrest's
          built-in Jetty web server.  Once it has started, point your browser at
          <a class="external" href="http://localhost:8888/">http://localhost:8888/</a>, which
          will show your website, rendered on demand as each link is followed.
        </p>
<p>(Alternatively, if you wish to run Forrest from within an existing
          servlet container, type <span class="codefrag">forrest webapp</span> to build an open
          webapp in <span class="codefrag">build/webapp/</span>)
        </p>
<a name="N102E4"></a><a name="using_webapp"></a>
<h4>Using the webapp</h4>
<p>
            You can now edit the XML content in
            <span class="codefrag">build/webapp/content/xdocs</span> and see the changes
            immediately in the browser.
          </p>
    
</div>
    
<a name="N102F3"></a><a name="invoking_from_ant"></a>
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="h3">
<tbody>
<tr>
<td height="10" width="9"></td><td>
<h3>Invoking Forrest from Ant</h3>
</td><td></td>
</tr>
<tr class="heading ">
<td class="bottom-left"></td><td class="bottomborder"></td><td class="bottom-right"></td>
</tr>
</tbody>
</table>
<div class="section">
      
      
<p>
        Ant has an
        <a class="external" href="http://ant.apache.org/manual/CoreTasks/import.html">&lt;import&gt;</a>
        task which can be used to invoke Forrest from Ant.  All targets and properties
        are imported and can be used in your project build.  Here is a simple example:
      </p>
      
<pre class="code">
&lt;project name="myproject" default="hello"&gt;
     &lt;!-- FORREST_HOME must be set as an environment variable --&gt;
     &lt;property environment="env"/&gt;
     &lt;import file="${env.FORREST_HOME}/forrest.build.xml"/&gt;

     &lt;!-- 'site' is a target imported from forrest.build.xml --&gt;
     &lt;target name="post-build" depends="site"&gt;
       &lt;echo&gt;something here&lt;/echo&gt;
     &lt;/target&gt;
&lt;/project&gt;
        </pre>
      
<p>(Note: That technique requires Ant 1.6+ otherwise the &lt;import&gt;
        task will not be available for you to use. Forrest
        bundles the latest version of Ant, so you can invoke your project
        like this: <span class="codefrag">forrest -f myproject.xml</span>.
        This will not run forrest; it will just use Forrest's Ant to execute
        your buildfile.)
      </p>
      
<p>
        Another option is to use the Forrest Antlet from the Krysalis Project's <a class="external" href="http://antworks.sourceforge.net/importer/">Antworks Importer</a>.
      </p>
      
<p>
        The <a href="../docs/forrestbot.html">Forrestbot</a> provides workstages
        to get source, build, deploy, and notify. This is very useful for
        automating builds; you may want to consider using the Forrestbot.
      </p>
    
</div>
  
</div>
</td>
</tr>
</table>
</td>
</tr>
</table>
<table>
<tr>
<td>
<br>
<br>
</td>
</tr>
</table>
<table class="footer">
<tr>
<td colspan="2" align="center" width="90%"><span class="footnote"><a href="http://www.apache.org/licenses/">
                Copyright &copy; 2002-2004&nbsp;
                The Apache Software Foundation.</a>
            All rights reserved.
            <br>
<script type="text/javascript" language="JavaScript"><!--
              document.write(" - "+"Last Published: " + document.lastModified);
              //  --></script></span></td><td nowrap="nowrap" align="right" class="logos"></td>
</tr>
</table>
</body>
</html>
