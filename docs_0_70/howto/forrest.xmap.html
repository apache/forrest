<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<meta name="generator" content="">
<title>Annotated forrest.xmap (v0.7)</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../../images/apache-forrest.png" title="The Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../../images/project-logo.gif" title="Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="forrest.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../index.html">Welcome</a>
</li>
<li>
<a class="unselected" href="../../contrib.html">Developers</a>
</li>
<li>
<a class="unselected" href="../../versions/index.html">Versioned Docs</a>
</li>
<li>
<a class="unselected" href="../../pluginDocs/index.html">Plugins</a>
</li>
<li>
<a class="unselected" href="../../tools/index.html">Tools</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../../skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../index.html" title="Welcome and introduction">About Forrest</a>
</div>
<div class="menuitem">
<a href="http://forrest.apache.org/mirrors.cgi" title="Download a release from your nearest mirror or get the latest from SVN">Download</a>
</div>
<div class="menuitem">
<a href="../../license.html" title="Notes and FAQs about the licensing">License</a>
</div>
<div class="menuitem">
<a href="../../forrest-contract.html" title="What each party can expect">Our contract</a>
</div>
<div class="menuitem">
<a href="../../compliance.html" title="Declare the status of HTML, WAI, CSS compliance">Standards compliance</a>
</div>
<div class="menuitem">
<a href="../../forrest-issues.html" title="List of currently open issues">Open issues</a>
</div>
<div class="menuitem">
<a href="../../who.html" title="Explain who is involved">Who we are</a>
</div>
<div class="menuitem">
<a href="../../flyer.html" title="One-page description">Flyer</a>
</div>
<div class="menuitem">
<a href="../../live-sites.html" title="Some sites created using Apache Forrest technology">Example sites</a>
</div>
<div class="menuitem">
<a href="../../thanks.html" title="Acknowledgment to those who have become involved">Thanks</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', '../../skin/')" id="menu_1.2Title" class="menutitle">Getting involved</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../contrib.html" title="Everyone is a developer and has something to contribute">Contributing</a>
</div>
<div class="menuitem">
<a href="../../mail-lists.html" title="Discussion mail lists are the heart of the project: dev, user, svn">Mail lists and discussion</a>
</div>
<div class="menuitem">
<a href="../../issues.html" title="Issue tracker manages known issues and desired enhancements">Reporting bugs and issues</a>
</div>
<div class="menuitem">
<a href="../../forrest-friday.html" title="ForrestFriday monthly get-together">ForrestFriday IRC</a>
</div>
<div class="menuitem">
<a href="../../events.html" title="List of upcoming related conferences and meetings">Events</a>
</div>
<div onclick="SwitchMenu('menu_1.2.6', '../../skin/')" id="menu_1.2.6Title" class="menutitle">Project</div>
<div id="menu_1.2.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../guidelines.html" title="Open development guidelines to encourage participation">Project guidelines</a>
</div>
<div class="menuitem">
<a href="../../committed.html" title="Notes about contribution">Being committed</a>
</div>
<div class="menuitem">
<a href="../../roles.html" title="Tasks to keep the project flowing">Project roles</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3', '../../skin/')" id="menu_1.3Title" class="menutitle">Resources and Infrastructure</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../asf-infrastructure.html" title="Explain the ASF infrastructure">Introduction</a>
</div>
<div class="menuitem">
<a href="../../mail-lists.html" title="Discussion mail lists are the heart of the project: dev, user, svn">Mail lists</a>
</div>
<div class="menuitem">
<a href="../../issues.html" title="Issue tracker manages known issues and desired enhancements">Issue management</a>
</div>
<div class="menuitem">
<a href="http://svn.apache.org/viewvc/forrest/trunk/" title="Browse Forrest version control repository">Browse SVN</a>
</div>
<div class="menuitem">
<a href="http://forrest.zones.apache.org/" title="Demonstrations at forrest.zones.apache.org">Zone testbed</a>
</div>
<div class="menuitem">
<a href="../../gump.html">Gump integration</a>
</div>
<div onclick="SwitchMenu('menu_1.3.7', '../../skin/')" id="menu_1.3.7Title" class="menutitle">Planning notes</div>
<div id="menu_1.3.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../plan/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../plan/internal-xhtml.html">Internal XHTML</a>
</div>
</div>
<div class="menuitem">
<a href="../../todo.html">Todo</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../../skin/')" id="menu_1.4Title" class="menutitle">Best Practices and Procedures</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../howto-dev.html" title="Describes tips and procedures for efficiently developing with Forrest.">Development tips</a>
</div>
<div class="menuitem">
<a href="../../subversion_bestpractices.html" title="Best practice notes for Subversion">Subversion</a>
</div>
<div class="menuitem">
<a href="../../documentation_bestpractices.html" title="Best practice notes for documentation">Documentation</a>
</div>
<div class="menuitem">
<a href="../../howto-howto.html" title="Instructions for writing             a new howto-document">Write a How-to</a>
</div>
<div onclick="SwitchMenu('menu_1.4.5', '../../skin/')" id="menu_1.4.5Title" class="menutitle">Committer notes</div>
<div id="menu_1.4.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../zone.html" title="Notes for committers to manage forrest.zones.apache.org">Zone management</a>
</div>
<div class="menuitem">
<a href="../../procedures/release/How_to_release.html" title="Instructions on preparing and creating a new Forrest release.">How to release</a>
</div>
<div class="menuitem">
<a href="../../procedures/How_to_publish_docs.html" title="Instructions on publishing the Forrest             Website">Publishing Forrest documentation</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', '../../skin/')" id="menu_1.5Title" class="menutitle">Proposals</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a href="../../proposal-asf-forrestbot.html">ASF Forrestbot</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.6', '../../skin/')" id="menu_1.6Title" class="menutitle">Related projects</div>
<div id="menu_1.6" class="menuitemgroup">
<div class="menuitem">
<a href="http://gump.apache.org/">Apache Gump</a>
</div>
<div class="menuitem">
<a href="http://cocoon.apache.org/">Apache Cocoon</a>
</div>
<div class="menuitem">
<a href="http://lenya.apache.org/">Apache Lenya</a>
</div>
<div class="menuitem">
<a href="http://xml.apache.org/">Apache XML</a>
</div>
<div class="menuitem">
<a href="http://projects.apache.org/">projects.apache.org</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.7', '../../skin/')" id="menu_1.7Title" class="menutitle">Tools</div>
<div id="menu_1.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../tools/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../../tools/forrestbar.html">ForrestBar</a>
</div>
<div class="menuitem">
<a href="../../tools/forrestbot.html">Forrestbot</a>
</div>
<div class="menuitem">
<a href="../../tools/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
<div class="menuitem">
<a href="../../tools/eclipse.html">Eclipse Plugin</a>
</div>
<div class="menuitem">
<a href="../../tools/xxe.html">XXE-Editor</a>
</div>
</div>
<div id="credit">
<hr>
        This is documentation for current version v0.7
       (<a href="http://forrest.apache.org/versions/">More</a>)</div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://www.us.apachecon.com/"><img border="0" title="ApacheCon US 2006 (9-13 October 2006)" alt="ApacheCon US 2006 (9-13 October 2006) - logo" src="http://www.us.apachecon.com/images/web-banners/2028-ac-us-06-125x125.gif" style="width: 125px;height: 125px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="forrest.xmap.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>Annotated forrest.xmap</h1>
<div id="motd-area">
        This is documentation for current version v0.7
       (<a href="http://forrest.apache.org/versions/">More</a>)</div>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#sitemap.xmap">sitemap.xmap</a>
<ul class="minitoc">
<li>
<a href="#Definition+of+File-Resolver-Resource">Definition of File-Resolver-Resource</a>
</li>
<li>
<a href="#Second+Match+for+%27**.xml%27">Second Match for '**.xml'</a>
</li>
</ul>
</li>
</ul>
</div>
<a name="N10010"></a><a name="sitemap.xmap"></a>
<h2 class="underlined_10">sitemap.xmap</h2>
<div class="section">
<pre>
&lt;?xml version="1.0"?&gt;
&lt;!-- ===============================================
Pipelines defining all Source XML types Forrest can handle.
Converts from arbitrary formats to standard Forrest doc-v12 XML.

First, determines if a simple format file exists.
Candidates are: .html .ihtml .txt .sxw .jspwiki 

Otherwise, the default *.xml handling is used.  The XML's DTD type is
discovered using the SourceTypeAction, and an appropriate transformation
applied.  Thus to add new XML types, just define a new &lt;sourcetype&gt;
and an appropriate &lt;map:when&gt; handler.

Generates  :  Source XML, Body HTML for *.ehtml
Example URL:  http://localhost:8888/index.xml
Used by    :  *.html and *.pdf pipelines in sitemap.xmap
Uses       :  content/xdocs/**.xml

$Revision: 1.8 $
==================================================== --&gt;

&lt;map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0"&gt;
  &lt;map:components&gt;
    &lt;map:generators default="file"&gt;
      &lt;map:generator name="html"      src="org.apache.cocoon.generation.HTMLGenerator"&gt;
        &lt;jtidy-config&gt;WEB-INF/jtidy.properties&lt;/jtidy-config&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="text2xml" logger="sitemap.generator.textgenerator"
                     src="org.apache.cocoon.generation.TextGenerator"&gt;
       &lt;parameter name="localizable" value="true"/&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="exception"
                  src="org.apache.cocoon.generation.ParseExceptionGenerator"/&gt;
                  
    &lt;/map:generators&gt;
    &lt;map:serializers default="html"/&gt;
    &lt;map:matchers default="wildcard"/&gt;

    &lt;map:transformers default="xslt"&gt;
     &lt;map:transformer name="pattern"
                      src="org.apache.cocoon.transformation.PatternTransformer" 
                      logger="sitemap.transformer.pattern"&gt;
      &lt;parameter name="groups" value="true"/&gt;
     &lt;/map:transformer&gt;
     &lt;map:transformer name="lexer"
                      src="org.apache.cocoon.transformation.LexicalTransformer" 
                      logger="sitemap.transformer.lexer"&gt;
      &lt;parameter name="localizable" value="true"/&gt;
     &lt;/map:transformer&gt;
     &lt;map:transformer name="parser"
                      src="org.apache.cocoon.transformation.ParserTransformer" 
                      logger="sitemap.transformer.parser"&gt;
      &lt;parameter name="flatten" value="true"/&gt;
      &lt;parameter name="recovery" value="true"/&gt;
      &lt;parameter name="localizable" value="true"/&gt;
     &lt;/map:transformer&gt;
  
     &lt;map:transformer name="extparser"
                      src="org.apache.cocoon.transformation.ExtendedParserTransformer"
                      logger="sitemap.transformer.extendedparser"&gt;
     &lt;/map:transformer&gt;
    &lt;/map:transformers&gt;

    &lt;map:actions&gt;
      &lt;map:action logger="sitemap.action.sourcetype" name="sourcetype" src="org.apache.forrest.sourcetype.SourceTypeAction"&gt;
        &lt;sourcetype name="document-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v20a"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V2.0a//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
      &lt;/map:action&gt;
      &lt;map:action logger="sitemap.action.locale" name="locale" src="org.apache.cocoon.acting.LocaleAction"&gt;
      &lt;/map:action&gt;
    &lt;/map:actions&gt;
    &lt;map:selectors default="parameter"&gt;
    &lt;map:selector logger="sitemap.selector.parameter" name="parameter" src="org.apache.cocoon.selection.ParameterSelector" /&gt;
   &lt;map:selector logger="sitemap.selector.exception" name="exception"
                 src="org.apache.cocoon.selection.ExceptionSelector"&gt;
     &lt;exception name="syntax" class="net.sourceforge.chaperon.process.ParseException"/&gt;
     &lt;exception class="java.lang.Throwable" unroll="true"/&gt;
   &lt;/map:selector&gt;
      &lt;map:selector logger="sitemap.selector.config" name="config" src="org.apache.cocoon.selection.SimpleSelector" /&gt;
    &lt;/map:selectors&gt;
  &lt;/map:components&gt;

  &lt;map:resources&gt;
    &lt;map:resource name="transform-to-document"&gt;
      &lt;map:act type="sourcetype" src="{src}"&gt;
        &lt;map:select type="parameter"&gt;
          &lt;map:parameter name="parameter-selector-test" value="{sourcetype}" /&gt;

          &lt;map:when test="document-v10"&gt;
          &lt;!-- FIXME (JJP):  This should use the v12 now--&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv10todocv11.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="document-v20a"&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv20todocv12.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="document-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv20todocv13.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="howto-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="howto-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changesv10tochangesv11.xsl" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise /&gt;
        &lt;/map:select&gt;
      &lt;/map:act&gt;
    &lt;/map:resource&gt;
</pre>
<a name="N10016"></a><a name="Definition+of+File-Resolver-Resource"></a>
<h3 class="underlined_5">Definition of File-Resolver-Resource</h3>
<pre>
    &lt;map:resource name="file-resolver"&gt;
      &lt;map:select type="exists"&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.ihtml"&gt;
          &lt;map:generate src="{project:content.xdocs}{uri}.ihtml" type="html" /&gt;
          &lt;map:transform src="{forrest:stylesheets}/html2document.xsl" /&gt;
          &lt;map:transform type="idgen" /&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:when&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.html"&gt;
          &lt;map:generate src="{project:content.xdocs}{uri}.html" type="html" /&gt;
          &lt;map:transform src="{forrest:stylesheets}/html2document.xsl" /&gt;
          &lt;map:transform type="idgen" /&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:when&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.txt"&gt;
          &lt;map:match type="regexp" pattern="^(.*?)([^/]*).xml$"&gt;
            &lt;map:generate type="text2xml" src="{project:content.xdocs}{1}{2}.txt" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/text2document.xsl"&gt;
              &lt;map:parameter name="filename" value="{2}" /&gt;
            &lt;/map:transform&gt;
            &lt;map:serialize type="xml-document"/&gt;
          &lt;/map:match&gt;
        &lt;/map:when&gt;
        &lt;map:otherwise&gt;
        
          &lt;map:select type="exists"&gt;
             &lt;map:when test="{project:temp-dir}/input.xmap"&gt;
               &lt;map:mount uri-prefix=""
                          src="{project:temp-dir}/input.xmap" 
                          check-reload="yes" 
                          pass-through="true"/&gt;
            &lt;/map:when&gt;
          &lt;/map:select&gt;
        
          &lt;map:generate src="{project:content.xdocs}{uri}.xml" /&gt;
          &lt;map:call resource="transform-to-document"&gt;
            &lt;map:parameter name="src" value="{project:content.xdocs}{uri}.xml" /&gt;
          &lt;/map:call&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:otherwise&gt;
      &lt;/map:select&gt;
    &lt;/map:resource&gt;
  &lt;/map:resources&gt;

  &lt;map:pipelines&gt;
    &lt;map:pipeline&gt;

      &lt;!-- ============================================================ --&gt;
      &lt;!-- INTERMEDIATE FORMATS                                         --&gt;
      &lt;!-- ============================================================ --&gt;

      &lt;map:match pattern="**body-*.html"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:content.xdocs}{1}{2}.ehtml"&gt;
            &lt;map:generate src="{project:content.xdocs}{1}{2}.ehtml" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/html2htmlbody.xsl" /&gt;
            &lt;map:serialize type="xml" /&gt;
          &lt;/map:when&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;

      &lt;!-- ============================================================ --&gt;
      &lt;!-- SOURCE FORMATS                                               --&gt;
      &lt;!-- ============================================================ --&gt;
</pre>
<a name="N1001C"></a><a name="Second+Match+for+%27**.xml%27"></a>
<h3 class="underlined_5">Second Match for '**.xml'</h3>
<pre>
      &lt;map:match pattern="**.xml"&gt;
        &lt;map:select type="config"&gt;
          &lt;map:parameter name="value" value="{defaults:i18n}"/&gt;
          &lt;map:when test="true"&gt;
          &lt;map:act type="locale"&gt;
            &lt;map:call resource="file-resolver"&gt;
              &lt;map:parameter name="uri" value="{../1}_{language}"/&gt;
            &lt;/map:call&gt;
          &lt;/map:act&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:call resource="file-resolver"&gt;
              &lt;map:parameter name="uri" value="{1}"/&gt;
            &lt;/map:call&gt;
          &lt;/map:otherwise&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;
      
    &lt;/map:pipeline&gt;
  &lt;/map:pipelines&gt;
&lt;/map:sitemap&gt;
</pre>
</div>
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2006 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
