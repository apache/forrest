<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>Forrestbot - automated building and deploying</title>
<link type="text/css" href="../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../skin/print.css" rel="stylesheet">
<link type="text/css" href="../skin/profile.css" rel="stylesheet">
<script src="../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../images/apache-forrest.png" title="The Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../images/project-logo.gif" title="Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="forrest.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../index.html">Welcome</a>
</li>
<li>
<a class="unselected" href="../contrib.html">Developers</a>
</li>
<li>
<a class="unselected" href="../versions/index.html">Versioned Docs</a>
</li>
<li>
<a class="unselected" href="../pluginDocs/index.html">Plugins</a>
</li>
<li class="current">
<a class="selected" href="../tools/index.html">Tools</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', '../skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('../skin/images/chapter_open.gif');">Tools</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../tools/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../tools/forrestbar.html">ForrestBar</a>
</div>
<div class="menupage">
<div class="menupagetitle">Forrestbot</div>
</div>
<div class="menuitem">
<a href="../tools/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
<div class="menuitem">
<a href="../tools/eclipse.html">Eclipse Plugin</a>
</div>
<div class="menuitem">
<a href="../tools/xxe.html">XXE-Editor</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://us.apachecon.com/"><img border="0" title="ApacheCon US 2008" alt="ApacheCon US 2008 - logo" src="http://apache.org/ads/ApacheCon/2008-usa-125x125.png" style="width: 125px;height: 125px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="forrestbot.pdf"><img alt="PDF -icon" src="../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>Forrestbot - automated building and deploying</h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Overview">Overview</a>
</li>
<li>
<a href="#Using+Forrestbot">Using Forrestbot</a>
</li>
<li>
<a href="#Creating+a+Forrestbot+Project+Buildfile">Creating a Forrestbot Project Buildfile</a>
<ul class="minitoc">
<li>
<a href="#Workstages">Workstages</a>
<ul class="minitoc">
<li>
<a href="#checksums">Deploying only modified files</a>
</li>
<li>
<a href="#Correct+Use+of+getsrc.local">Correct Use of getsrc.local</a>
</li>
</ul>
</li>
<li>
<a href="#Workstage+Properties">Workstage Properties</a>
<ul class="minitoc">
<li>
<a href="#Misc.+Properties">Misc. Properties</a>
</li>
<li>
<a href="#getsrc.clean-workdir">getsrc.clean-workdir</a>
</li>
<li>
<a href="#getsrc.local">getsrc.local</a>
</li>
<li>
<a href="#getsrc.cvs">getsrc.cvs</a>
</li>
<li>
<a href="#getsrc.svn">getsrc.svn</a>
</li>
<li>
<a href="#build.forrest">build.forrest</a>
</li>
<li>
<a href="#deploy.local">deploy.local</a>
</li>
<li>
<a href="#deploy.scp">deploy.scp</a>
</li>
<li>
<a href="#deploy.cvs">deploy.cvs</a>
</li>
<li>
<a href="#deploy.svn">deploy.svn</a>
</li>
<li>
<a href="#deploy.ftp">deploy.ftp</a>
</li>
<li>
<a href="#notify">notify</a>
</li>
<li>
<a href="#notify.local">notify.local</a>
</li>
<li>
<a href="#notify.email">notify.email</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#Forrestbot+Design">Forrestbot Design</a>
</li>
<li>
<a href="#refs">Further Reading</a>
</li>
</ul>
</div>
</div>
    
<a name="N1000D"></a><a name="Overview"></a>
<h2 class="underlined_10">Overview</h2>
<div class="section">
<p>
        Forrestbot lets you automate building and deploying websites. The whole
        process gets the source docs, builds the site, then deploys it where you
        want it to go. Forrestbot can also notify you afterwards, and it keeps a
        log of the build process. To accomplish these tasks, Forrestbot uses
        four "workstages" (getsrc, build, deploy, notify). Each workstage has
        various implementations (e.g., getsrc has getsrc.cvs or getsrc.svn or
        getsrc.local implementations), which have various properties that may be
        set, depending upon the implementations chosen.
      </p>
</div>
    
<a name="N10017"></a><a name="Using+Forrestbot"></a>
<h2 class="underlined_10">Using Forrestbot</h2>
<div class="section">
<p>
        You need to create a customized buildfile directing Forrestbot's work
        and then simply execute:
      </p>
<pre class="code">forrest -f mybuildfile.xml</pre>
<p>
        This project buildfile is simply an Ant buildfile with specific targets
        that control Forrestbot's operation. The next section explains how to
        create such a buildfile. For details on the syntax of Ant buildfiles and
        the operation of Ant itself consult the <a href="http://ant.apache.org/">Ant
        documentation</a>.
      </p>
</div>
    
<a name="N1002C"></a><a name="Creating+a+Forrestbot+Project+Buildfile"></a>
<h2 class="underlined_10">Creating a Forrestbot Project Buildfile</h2>
<div class="section">
<p>
        Within the new buildfile, you need to first set properties needed by the
        workstages you are going to use and then specify which implementations
        will be used by each workstage. Note that the properties need to be set
        at the global scope (as children of <span class="codefrag">&lt;project&gt;</span>, i.e.,
        outside of <span class="codefrag">&lt;target&gt;</span> elements) in order for your
        settings to override the defaults in the Forrestbot implementation.
        Other than that, the property definitions can appear anywhere before the
        <span class="codefrag">&lt;import&gt;</span> task.
      </p>
<p>
        This sample buildfile can be used as a base from which to customize your
        own buildfile. The file starts with the project name and default target,
        then sets the specific properties we need to get the source, indicate
        the deployment location, and set up notification. It then specifies
        which implementations we will use and finishes up with importing the
        <span class="codefrag">forrestbot.xml</span> file. The 'main' target, which is specified
        as the default here, is a convenience target (defined in
        <span class="codefrag">forrestbot.xml</span>) that executes the four workstages (getsrc,
        build, deploy, notify) sequentially.
      </p>
<pre class="code">

&lt;project name="mysampleproject" default="main"&gt;
  &lt;property name="notify.email.host" value="smtp.myhost.com"/&gt;
  &lt;property name="notify.email.to" value="me@domain.com"/&gt;
  &lt;property name="notify.administrator" value="Your Name"/&gt;
  &lt;property name="getsrc.cvs.user" value="anoncvs"/&gt;
  &lt;property name="getsrc.cvs.password" value="anoncvs"/&gt;
  &lt;property name="getsrc.cvs.root" value="/home/cvspublic"/&gt;
  &lt;property name="getsrc.cvs.host" value="cvs.myhost.com"/&gt;
  &lt;property name="getsrc.cvs.module" value="myproject"/&gt;
  &lt;property name="deploy.scp.dest" 
      value="username@myhost.com:/var/www/mydomain/htdocs"/&gt;

  &lt;!-- here we declare the ssh keyfile and passphrase in an external file --&gt;
  &lt;import file="../deploy-settings.xml" optional="true"/&gt;

  &lt;!-- here we specify to use two notification implementations --&gt;
  &lt;target name="notify" depends="notify.local, notify.email"/&gt;

  &lt;!-- here we specify to deploy with the scp implementation --&gt;
  &lt;target name="deploy" depends="deploy.scp"/&gt;

  &lt;!-- the default implementation for getsrc is getsrc.cvs,
       which is what we want --&gt;

  &lt;!-- assumes FORREST_HOME has been set as an environment variable --&gt;
  &lt;property environment="env"/&gt;
  &lt;import file="${env.FORREST_HOME}/tools/forrestbot/core/forrestbot.xml"/&gt;
&lt;/project&gt;

      </pre>
<a name="N1004B"></a><a name="Workstages"></a>
<h3 class="underlined_5">Workstages</h3>
<p>
          It is only necessary to include specific target implementations in the
          buildfile if we want to override the default implementations. The
          following table shows the various workstages, which implementations
          may be used for each, and which one is the default.
        </p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
          
<tr>
            
<th colspan="1" rowspan="1">Workstage</th>
            <th colspan="1" rowspan="1">Implementations</th>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">getsrc</td>
            <td colspan="1" rowspan="1">
              
<ul>
                
<li>
<a href="#getsrc.local">getsrc.local</a>
</li>
                
<li>
<a href="#getsrc.cvs">getsrc.cvs</a> (default)</li>
                
<li>
<a href="#getsrc.svn">getsrc.svn</a>
</li>
              
</ul>
            
</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">build</td>
            <td colspan="1" rowspan="1">
              
<ul>
                
<li>
<a href="#build.forrest">build.forrest</a>
</li>
              
</ul>
            
</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1">deploy</td>
            <td colspan="1" rowspan="1">
              
<ul>
                
<li>
<a href="#deploy.local">deploy.local</a>
                (default)</li>
                
<li>
<a href="#deploy.scp">deploy.scp</a>
</li>
                
<li>
<a href="#deploy.cvs">deploy.cvs</a>
</li>
                
<li>
<a href="#deploy.svn">deploy.svn</a>
</li>
                
<li>
<a href="#deploy.ftp">deploy.ftp</a>
</li>
              
</ul>
            
</td>
          
</tr>
          
<tr>
            
<td colspan="1" rowspan="1"><a href="#notify">notify</a>
            </td>
            <td colspan="1" rowspan="1">
              
<ul>
                
<li>
<a href="#notify.local">notify.local</a>
                (default)</li>
                
<li>
<a href="#notify.email">notify.email</a>
</li>
              
</ul>
            
</td>
          
</tr>
        
</table>
<p>
          If you want to do more advanced processing for your project, you can
          override the 'main' target, which by default is <span class="codefrag">&lt;target
          name="main" depends="getsrc, build, deploy, notify"/&gt;</span>,
          create your own implementation of a workstage, or use any other ant
          tasks to do additional work. In order to create your own workstage
          implementation, define the workstage target in question in your
          <span class="codefrag">mybuildfile.xml</span> anywhere before the
          <span class="codefrag">&lt;import&gt;</span> task. This will override the default
          implementation provided by Forrestbot.
        </p>
<p>
          Also, you can choose a different target as the default by changing the
          <span class="codefrag">default</span> attribute of <span class="codefrag">&lt;project&gt;</span>. For
          example, you will much more frequently do a 'build' without a 'deploy'
          during the development of your website, and only at the end do an
          actual 'deploy', so you might want to choose 'build' as your default
          target.
        </p>
<a name="N100F6"></a><a name="checksums"></a>
<h4>Deploying only modified files</h4>
<p>
            Use the <a href="../docs_0_90/faq.html#checksums">checkums</a> feature of
            the Cocoon CLI. This enables Forrest to keep track of which
            generated files have actually been changed. The Ant tasks used by
            Forrestbot will then deploy only the modified files. Ant keeps a
            <span class="codefrag">cache.properties</span> file. If you need to deploy all files
            then remove this file and let it be re-generated.
          </p>
<p>
            Note that the deplo.svn and deploy.cvs workstages handle modified
            files with their own mechanism.
          </p>
<a name="N1010A"></a><a name="Correct+Use+of+getsrc.local"></a>
<h4>Correct Use of getsrc.local</h4>
<p>
            There is a wrinkle when using the 'getsrc.local' implementation of
            the 'getsrc' workstage. If you define your own 'getsrc.local'
            target, make sure it starts with the <span class="codefrag">&lt;property&gt;</span>
            task given here:
          </p>
<pre class="code">&lt;target name="getsrc.local"&gt;
  &lt;property name="build.home-dir" location="${getsrc.local.root-dir}"/&gt;
  [...]
&lt;/target&gt;</pre>
<p>
            Alternatively (and preferably), define your 'getsrc' target like
            this:
          </p>
<pre class="code">&lt;target name="getsrc" depends="getsrc.clean-workdir, getsrc.get, getsrc.local"/&gt;</pre>
<p>
            and then implement the actual fetching of the sources in the
            'getsrc.get' target. This latter approach is safer since it is more
            likely to be forward-compatible with future versions of Forrestbot.
          </p>
<a name="N10126"></a><a name="Workstage+Properties"></a>
<h3 class="underlined_5">Workstage Properties</h3>
<p>
          Each workstage implementation is configurable with properties. The
          following tables describe each property and whether or not you are
          required to set it in your buildfile.
        </p>
<p>
          Many workstage properties use usernames and passwords. You may want to
          keep them out of your project's Ant buildfile (especially if you store
          that file in CVS or SVN). A nice way to do this is to create a
          separate properties file (e.g., <span class="codefrag">auth.properties</span>) that
          just sets those properties (don't include it in CVS/SVN). Then, at the
          top of your project buildfile, have <span class="codefrag">&lt;property
          file="auth.properties"/&gt;</span>.
        </p>
<a name="N10138"></a><a name="Misc.+Properties"></a>
<h4>Misc. Properties</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">ant.project.name (you specify this by &lt;project
              name="____"&gt; in your buildfile)</td>
              <td colspan="1" rowspan="1">This must be unique for each project.</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
          
</table>
<a name="N1016F"></a><a name="getsrc.clean-workdir"></a>
<h4>getsrc.clean-workdir</h4>
<p>
            This should be executed before a getsrc implementation is executed,
            e.g., <span class="codefrag">&lt;target name="getsrc" depends="getsrc.clean-workdir,
            getsrc.svn"/&gt;</span>.
          </p>
<a name="N1017C"></a><a name="getsrc.local"></a>
<h4>getsrc.local</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.local.root-dir</td>
              <td colspan="1" rowspan="1">Absolute path to the project's root directory on the local
              computer. Use <strong>location=</strong> instead of
              <strong>value=</strong> for this &lt;property&gt;</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
          
</table>
<a name="N101B9"></a><a name="getsrc.cvs"></a>
<h4>getsrc.cvs</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.user</td>
              <td colspan="1" rowspan="1">CVS username</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.password</td>
              <td colspan="1" rowspan="1">CVS password</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.root</td>
              <td colspan="1" rowspan="1">CVS root directory</td>
              <td colspan="1" rowspan="1">/home/cvsroot</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.host</td>
              <td colspan="1" rowspan="1">CVS host</td>
              <td colspan="1" rowspan="1">cvs.apache.org</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.module</td>
              <td colspan="1" rowspan="1">CVS module name (an alias for or the full path to the
              directory that contains forrest.properties)</td>
              <td colspan="1" rowspan="1">${ant.project.name}</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.cvs.tag</td>
              <td colspan="1" rowspan="1">CVS tag or branch name</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N10261"></a><a name="getsrc.svn"></a>
<h4>getsrc.svn</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.svn.url</td>
              <td colspan="1" rowspan="1">Full repository URL for project (this directory must contain
              forrest.properties)</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">getsrc.svn.revision</td>
              <td colspan="1" rowspan="1">Revision number to fetch</td>
              <td colspan="1" rowspan="1">HEAD</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N102AF"></a><a name="build.forrest"></a>
<h4>build.forrest</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">build.work-dir</td>
              <td colspan="1" rowspan="1">Directory to temporarily hold working files</td>
              <td colspan="1" rowspan="1">work/${ant.project.name}</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">build.log-dir</td>
              <td colspan="1" rowspan="1">Directory to hold log files</td>
              <td colspan="1" rowspan="1">logs</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N102FE"></a><a name="deploy.local"></a>
<h4>deploy.local</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.local.dir</td>
              <td colspan="1" rowspan="1">Path to deploy site to - the dir that would be the
              equivalant of build/site dir. Relative paths are relative to
              ${basedir}, which defaults to the dir containing the Forrestbot
              project buildfile (mybuildfile.xml).</td>
              <td colspan="1" rowspan="1">sites/${ant.project.name}</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N10336"></a><a name="deploy.scp"></a>
<h4>deploy.scp</h4>
<p>
            The <span class="codefrag">${user.home}/.ssh/known_hosts</span> must properly
            recognize the host, so you should manually make an ssh connection to
            the host if you never have before.
          </p>
<p>
            If <span class="codefrag">${deploy.scp.keyfile}</span>is defined, then it will use
            key-based authentication in preference. Otherwise it will use
            <span class="codefrag">${deploy.scp.password}</span>
          
</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.scp.dest</td>
              <td colspan="1" rowspan="1">Full destination reference in the format
              user@host:/directory/path</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.scp.keyfile</td>
              <td colspan="1" rowspan="1">Location of the local file holding the private key.
              Usually /home/me/.ssh/id_dsa or /home/me/.ssh/id_rsa
              <br>
              Note that the deploy.scp.passphrase must also be supplied.
              </td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. However, if this is not supplied then scp will fallback
              to use the less secure deploy.scp.password</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.scp.passphrase</td>
              <td colspan="1" rowspan="1">Local passphrase for your private key.</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. You will be prompted if it is not set.</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.scp.password</td>
              <td colspan="1" rowspan="1">Password for user@host</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. You will be prompted if it is not set.
              <br>
              Not needed if using the preferred
              deploy.scp.keyfile/deploy.scp.passphrase
              </td>
            
</tr>
          
</table>
<a name="N103C2"></a><a name="deploy.cvs"></a>
<h4>deploy.cvs</h4>
<p>
            This is only available on *nix operating systems.
          </p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.user</td>
              <td colspan="1" rowspan="1">CVS username to use when committing changes</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.password</td>
              <td colspan="1" rowspan="1">CVS password</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.root</td>
              <td colspan="1" rowspan="1">CVS root</td>
              <td colspan="1" rowspan="1">/home/cvs</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.host</td>
              <td colspan="1" rowspan="1">CVS host</td>
              <td colspan="1" rowspan="1">cvs.apache.org</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.module</td>
              <td colspan="1" rowspan="1">CVS module</td>
              <td colspan="1" rowspan="1">${ant.project.name}</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.cvs.commit-message</td>
              <td colspan="1" rowspan="1">Message to use when committing. You probably want to put a
              machine name or person's name here.</td>
              <td colspan="1" rowspan="1">Automatic publish from forrestbot</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N1046E"></a><a name="deploy.svn"></a>
<h4>deploy.svn</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.svn.user</td>
              <td colspan="1" rowspan="1">SVN username to use when committing changes</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.svn.password</td>
              <td colspan="1" rowspan="1">SVN password</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.svn.url</td>
              <td colspan="1" rowspan="1">Full repository URL</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.svn.commit-message</td>
              <td colspan="1" rowspan="1">Message to use when committing. You probably want to put a
              machine name or person's name here.</td>
              <td colspan="1" rowspan="1">Automatic publish from forrestbot</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N104E8"></a><a name="deploy.ftp"></a>
<h4>deploy.ftp</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.ftp.server</td>
              <td colspan="1" rowspan="1">FTP server to upload files to</td>
              <td colspan="1" rowspan="1">localhost</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.ftp.user</td>
              <td colspan="1" rowspan="1">FTP username to use for authenticating with the server</td>
              <td colspan="1" rowspan="1">anonymous</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.ftp.password</td>
              <td colspan="1" rowspan="1">Password for the FTP user</td>
              <td colspan="1" rowspan="1">forrestbot@</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">deploy.ftp.remotedir</td>
              <td colspan="1" rowspan="1">The directory to upload to (this can be an absolute path or
              relative to the FTP user's default directory)</td>
              <td colspan="1" rowspan="1">incoming</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
          
</table>
<a name="N10565"></a><a name="notify"></a>
<h4>notify</h4>
<p>
            These settings are used by all notify implementations.
          </p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.administrator</td>
              <td colspan="1" rowspan="1">Name and email address of the forrestbot administrator</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.on.failure</td>
              <td colspan="1" rowspan="1">On a build failure, notification will happen if this is
              true.</td>
              <td colspan="1" rowspan="1">true</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.on.success</td>
              <td colspan="1" rowspan="1">On a succesful build, notification will happen if this is
              true.</td>
              <td colspan="1" rowspan="1">true</td>
              <td colspan="1" rowspan="1">No</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.log</td>
              <td colspan="1" rowspan="1">Log file</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. Set by other workstage(s).</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.deploy-location</td>
              <td colspan="1" rowspan="1">Deployed location</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. Set by other workstage(s).</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.completion-status</td>
              <td colspan="1" rowspan="1">Result of the build</td>
              <td colspan="1" rowspan="1"></td>
              <td colspan="1" rowspan="1">No. Set by other workstage(s).</td>
            
</tr>
          
</table>
<a name="N1060F"></a><a name="notify.local"></a>
<h4>notify.local</h4>
<p>
            No properties.
          </p>
<a name="N10619"></a><a name="notify.email"></a>
<h4>notify.email</h4>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
            
<tr>
              
<th colspan="1" rowspan="1">Property</th>
              <th colspan="1" rowspan="1">Description</th>
              <th colspan="1" rowspan="1">Default Value</th>
              <th colspan="1" rowspan="1">Required?</th>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.email.host</td>
              <td colspan="1" rowspan="1">SMTP host through which the email will be sent.</td>
              <td colspan="1" rowspan="1">localhost</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.email.to</td>
              <td colspan="1" rowspan="1">Email address to send notification to.</td>
              <td colspan="1" rowspan="1">${user.name}@localhost</td>
              <td colspan="1" rowspan="1">Yes</td>
            
</tr>
            
<tr>
              
<td colspan="1" rowspan="1">notify.email.from</td>
              <td colspan="1" rowspan="1">From: address in the email</td>
              <td colspan="1" rowspan="1">Forrestbot</td>
              <td colspan="1" rowspan="1">No, but some mailers may require a valid email address.</td>
            
</tr>
          
</table>
</div>
    
<a name="N10681"></a><a name="Forrestbot+Design"></a>
<h2 class="underlined_10">Forrestbot Design</h2>
<div class="section">
<p>
        Forrest and Forrestbot use Ant buildfiles extensively. Ant 1.6's
        <span class="codefrag">&lt;import&gt;</span> task is used to import multiple buildfiles
        into a single build. The following is the flow of control when running
        Forrestbot:
      </p>
<ul>
        
<li>Your project buildfile (<span class="codefrag">mybuildfile.xml</span>)<ul>
            
<li>
<span class="codefrag">$FORREST_HOME/tools/forrestbot/core/forrestbot.xml</span>
              
<ul>
                
<li>Workstage buildfiles
                (<span class="codefrag">$FORREST_HOME/tools/forrestbot/core/{getsrc,build,deploy,notify}.xml</span>)</li>
                
<li>
<span class="codefrag">$FORREST_HOME/main/forrest.build.xml</span>
</li>
              
</ul>
</li>
          
</ul>
</li>
      
</ul>
<p>
        The workstage buildfiles define the default workstage implementations
        and set up the properties and files so that targets in the main Forrest
        buildfile (<span class="codefrag">forrest.build.xml</span>) will run. After those targets
        are executed, the targets in the workstage buildfiles can perform
        reporting, deployment, or other post-build activities.
      </p>
<p>
        Your project buildfile specifies the workstages you want to use, sets
        properties for them, and does any additional pre- and post-processing.
        In addition, you can override the default workstage implementations by
        defining the relevant targets in your project buildfile before the
        <span class="codefrag">&lt;import&gt;</span> task (see the example above).
      </p>
</div>
    
<a name="N106B6"></a><a name="refs"></a>
<h2 class="underlined_10">Further Reading</h2>
<div class="section">
<ul>
        
<li>
<a href="../howto-forrestbot-svn.html">How to deploy documentation with the Forrestbot "svn" workstage</a>
</li>
        
<li>
<a href="../howto-forrestbot-scp.html">How to deploy documentation with the Forrestbot "scp" workstage</a>
</li>
    
</ul>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2008 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
