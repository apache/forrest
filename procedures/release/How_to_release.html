<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>How to release Forrest</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../../images/apache-forrest.png" title="The Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../../images/project-logo.gif" title="Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="forrest.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="unselected" href="../../index.html">Welcome</a>
</li>
<li class="current">
<a class="selected" href="../../contrib.html">Developers</a>
</li>
<li>
<a class="unselected" href="../../versions/index.html">Versioned Docs</a>
</li>
<li>
<a class="unselected" href="../../pluginDocs/index.html">Plugins</a>
</li>
<li>
<a class="unselected" href="../../tools/index.html">Tools</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../../skin/')" id="menu_1.1Title" class="menutitle">Getting involved</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../contrib.html" title="Everyone is a developer and has something to contribute">Contributing</a>
</div>
<div class="menuitem">
<a href="../../mail-lists.html" title="Discussion mail lists are the heart of the project: dev, user, svn">Mail lists and discussion</a>
</div>
<div class="menuitem">
<a href="../../issues.html" title="Issue tracker manages known issues and desired enhancements">Reporting bugs and issues</a>
</div>
<div class="menuitem">
<a href="../../forrest-friday.html" title="ForrestFriday monthly get-together">ForrestFriday IRC</a>
</div>
<div class="menuitem">
<a href="../../events.html" title="List of upcoming related conferences and meetings">Events</a>
</div>
<div onclick="SwitchMenu('menu_1.1.6', '../../skin/')" id="menu_1.1.6Title" class="menutitle">Project</div>
<div id="menu_1.1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../../guidelines.html" title="Open development guidelines to encourage participation">Project guidelines</a>
</div>
<div class="menuitem">
<a href="../../committed.html" title="Notes about contribution">Being committed</a>
</div>
<div class="menuitem">
<a href="../../roles.html" title="Tasks to keep the project flowing">Project roles</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', '../../skin/')" id="menu_1.2Title" class="menutitle">Resources and Infrastructure</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../asf-infrastructure.html" title="Explain the ASF infrastructure">Introduction</a>
</div>
<div class="menuitem">
<a href="../../mail-lists.html" title="Discussion mail lists are the heart of the project: dev, user, svn">Mail lists</a>
</div>
<div class="menuitem">
<a href="../../issues.html" title="Issue tracker manages known issues and desired enhancements">Issue management</a>
</div>
<div class="menuitem">
<a href="http://svn.apache.org/viewvc/forrest/trunk/" title="Browse Forrest version control repository">Browse SVN</a>
</div>
<div class="menuitem">
<a href="http://forrest.zones.apache.org/" title="Demonstrations at forrest.zones.apache.org">Zone testbed</a>
</div>
<div class="menuitem">
<a href="../../gump.html">Gump integration</a>
</div>
<div onclick="SwitchMenu('menu_1.2.7', '../../skin/')" id="menu_1.2.7Title" class="menutitle">Planning notes</div>
<div id="menu_1.2.7" class="menuitemgroup">
<div class="menuitem">
<a href="../../plan/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../plan/internal-xhtml.html">Internal XHTML</a>
</div>
</div>
<div class="menuitem">
<a href="../../todo.html">Todo</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.3', '../../skin/')" id="menu_selected_1.3Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Best Practices and Procedures</div>
<div id="menu_selected_1.3" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../howto-dev.html" title="Describes tips and procedures for efficiently developing with Forrest.">Development tips</a>
</div>
<div class="menuitem">
<a href="../../subversion_bestpractices.html" title="Best practice notes for Subversion">Subversion</a>
</div>
<div class="menuitem">
<a href="../../documentation_bestpractices.html" title="Best practice notes for documentation">Documentation</a>
</div>
<div class="menuitem">
<a href="../../howto-howto.html" title="Instructions for writing             a new howto-document">Write a How-to</a>
</div>
<div onclick="SwitchMenu('menu_selected_1.3.5', '../../skin/')" id="menu_selected_1.3.5Title" class="menutitle" style="background-image: url('../../skin/images/chapter_open.gif');">Committer notes</div>
<div id="menu_selected_1.3.5" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="../../zone.html" title="Notes for committers to manage forrest.zones.apache.org">Zone management</a>
</div>
<div class="menupage">
<div class="menupagetitle">How to release</div>
</div>
<div class="menuitem">
<a href="../../procedures/How_to_publish_docs.html" title="Instructions on publishing the Forrest             Website">Publishing Forrest documentation</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../../skin/')" id="menu_1.4Title" class="menutitle">Proposals</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../proposal-asf-forrestbot.html">ASF Forrestbot</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2">
<a href="http://www.asia.apachecon.com/"><img border="0" title="ApacheCon Asia 2006 (14-17 August 2006)" alt="ApacheCon Asia 2006 (14-17 August 2006) - logo" src="http://asia.apachecon.com/wp-content/themes/apachecon/css/lyt/apache_con_asia_header.png" style="width: 150px;height: 50px;"></a><a href="http://www.us.apachecon.com/"><img border="0" title="ApacheCon US 2006 (9-13 October 2006)" alt="ApacheCon US 2006 (9-13 October 2006) - logo" src="http://www.us.apachecon.com/images/ASF-us-2006-web_masthead.jpg" style="width: 150px;height: 50px;"></a>
</div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="How_to_release.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>How to release Forrest</h1>
<div class="abstract">This documents the steps that the Release Manager (RM) should follow when doing a Forrest
        release.</div>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#About">About this document</a>
</li>
<li>
<a href="#rm">Who is the Release Manager</a>
</li>
<li>
<a href="#prep">Tasks to be done by the project before the release can start</a>
</li>
<li>
<a href="#PrepProject">Preparing the project for the release</a>
</li>
<li>
<a href="#PrepRM">Preparations for the Release Manager</a>
</li>
<li>
<a href="#PrepRelPlan">Preparing the Release Plan</a>
</li>
<li>
<a href="#PrepCodeBase">Preparing the code base</a>
</li>
<li>
<a href="#PrepTrunk">Preparing your working copy of SVN trunk</a>
</li>
<li>
<a href="#adjustDocs">Preparing docs for next release cycle</a>
</li>
<li>
<a href="#BuildDist">Building the distribution</a>
</li>
<li>
<a href="#Testing+the+release+candidate+and+voting">Testing the release candidate and voting</a>
</li>
<li>
<a href="#FinalRel">Finalizing the release</a>
</li>
<li>
<a href="#UploadAndAnnounce">Upload and announcement</a>
</li>
<li>
<a href="#cleanup">Cleanup</a>
</li>
<li>
<a href="#conclusion">Conclusion</a>
</li>
</ul>
</div>

        
<a name="N10010"></a><a name="About"></a>
<h2 class="underlined_10">About this document</h2>
<div class="section">
<div class="warning">
<div class="label">Warning</div>
<div class="content">
This document is still being developed from etc/RELEASE_PROCESS.txt and
some steps will need to be re-arranged.
</div>
</div>
<p>This documents the steps that the Release Manager (RM) should follow when doing a Forrest release. Note
                that it might have mistakes - we seem to discover something new each time and some steps might need to
                happen in a different order. Fine tune these notes for next time. Do some practice runs.</p>
<p>There are some steps that other committers, and even developers, can assist with, especially in the areas
                of getting ready for the release and the final testing. Many of the steps can be done only by the
                Release Manager.</p>
</div>
        
<a name="N10020"></a><a name="rm"></a>
<h2 class="underlined_10">Who is the Release Manager</h2>
<div class="section">
<p>The Release Manager is a single person who makes all the decisions regarding the
              actual preparations and the doing of the release.
              Many projects have the same release manager for years.
              The project developers have the role of testing, fixing issues,
              and voting for the release candidate.
              The votes of the PMC will decide whether the product is fit for release.
            </p>
<p>The RM could do the whole job alone, which enables speedy process.
              There are not actually many tasks where assistants can help.
              However it is a good idea to have an assistant so as to pass
              on the knowledge, to help document it, and to perceive potential flaws.
              More than one assistant would probably hinder.
            </p>
<p>The RM should be comfortable with using SVN and be familiar with
              the ASF hardware, with the distribution mirror system, and with ASF release procedures.
              The following notes are terse. If you don't understand, then probably not ready to be RM.
            </p>
</div>
        
<a name="N10030"></a><a name="prep"></a>
<h2 class="underlined_10">Tasks to be done by the project before the release can start</h2>
<div class="section">
<p>There are a number of things to be done by the project before the release will start.
              Don't leave these until the last minute.
              It is not the Release Manager's job to fix bugs nor address blocker issues. The RM job begins when the
                project is ready to do the release.</p>
<ul>
              
<li>The project updates the Roadmap to schedule the realistic Issues.</li>
              
<li>The project made good progress towards fixing the Blockers and applying the outstanding patches.</li>
              
<li>The documentation content is ready.</li>
              
<li>
<p>Relevant changes are listed in the site-author/status.xml and contributers have been attributed. Other changes are listed in the various plugins/status.xml files.</p>
              
</li>
              
<li>
<p>Major changes are listed in the site-author/status.xml using the "importance"
                attribute. This will be used to generate the list of top changes for the Release Notes
                and Announcement text.</p>
                
<p>http://localhost:8888/releaseNotes_0.8-dev.html</p>
              
</li>
            
</ul>
</div>
        
<a name="N10053"></a><a name="PrepProject"></a>
<h2 class="underlined_10">Preparing the project for the release</h2>
<div class="section">
<p>In this step the Release Manager starts the process to finalise the outstanding blocker issues. </p>
<ol>
                
<li>
                    
<p>Ensure the above preconditions are met.</p>
                    
<p>If not, then the project is not yet ready for release. Remember that it
                      is not the RM's job to do this.</p>
                    
<p>If so, then send an email to get the project to decide what to do with the remaining issues. Propose to
                        delay some issues to a future release, encourage people to fix others. See <a href="http://issues.apache.org/jira/browse/FOR-853">FOR-853</a>. Look at <a href="http://www.mail-archive.com/dev@forrest.apache.org/msg02310.html">msg02310.html</a>
                        for an example of such a message.</p>

                
</li>
                
<li>
                    
<p>Start discussion on Java-Version to use for compiling and testing the release.</p>
                
</li>
            
</ol>
</div>

        
<a name="N1007A"></a><a name="PrepRM"></a>
<h2 class="underlined_10">Preparations for the Release Manager</h2>
<div class="section">
<p>Particularly the Release Manager, but also anyone assisting, needs to be familiar
              with standard procedures and Apache terminology. This is crucial for a successful release.</p>
<ol>
                
<li>
                    
<p>If you have never done a release before or need to refresh your memory, read all about Apache
                        releases in general at <a href="http://www.apache.org/dev/#releases">http://www.apache.org/dev/#releases</a>. Make sure any assistants have read and understood
                        this as well.</p>
                
</li>
                
<li>
                    
<p>Be familiar with the process of signing releases and generating MD5
                        and PGP. Some more info is at <a href="http://www.apache.org/dev/release-signing.html">Signing Releases</a> and <a href="http://forrest.apache.org/mirrors.cgi#verify">http://forrest.apache.org/mirrors.cgi#verify</a>
                    
</p>
                
</li>
                
<li>
                    
<p>Ensure that as many PMC members as possible have their PGP keys in the KEYS file in Forrest's
                        root directory. Instructions on how to add keys are included in that file. Instructions on how to
                        create and manage PGP keys can be found at the abovementioned references.</p>
                
</li>
                
<li>
                  Make sure that the network connection is reliable and efficient.
                </li>
                
<li>
                    
<p>Install the Java-Version that has been agreed for compiling the release.
                       Do this well ahead of time to avoid delays, and ensure that Forrest works for you.
                    </p>
                
</li>

            
</ol>
</div>

        
<a name="N100AE"></a><a name="PrepRelPlan"></a>
<h2 class="underlined_10">Preparing the Release Plan</h2>
<div class="section">
<p>Prepare the Release Plan to define the corner stones of the coming release</p>
<ol>
                
<li>Java-Version to test this release</li>
                
<li>Start of code-freeze</li>
                
<li>Start of test-period</li>
                
<li>Vote on release candidate</li>
                
<li>Optional creation of release candidate #2 (when there are bugs)</li>
                
<li>Start of test-period #2</li>
                
<li>Vote on release candidate #2</li>
                
<li>Scheduled release Date</li>
            
</ol>
<p>Use the email template <a href="propose_release_plan.txt">propose_release_plan.txt</a> to write and
                propose your plan, then call for a quick vote on the release plan on the dev list.</p>
<div class="note">
<div class="label">Note</div>
<div class="content">There are various reasons for voting on the Release Plan, e.g. makes people aware that a code-freeze
                is about to happen; encourage them to get involved with the release; ensure that the date is suitable
                and people will be around to test and then vote on the actual release. See a good discussion <a href="http://marc.theaimsgroup.com/?t=114296877800003">in the archives</a>
            
</div>
</div>
</div>

        
<a name="N100E1"></a><a name="PrepCodeBase"></a>
<h2 class="underlined_10">Preparing the code base</h2>
<div class="section">
<ol>
                
<li>
                    
<p>Ensure that there are no license issues. The committers and PMC would have been continually
                        monitoring this. There are some tools to assist with scanning for issues.
                      See <a href="../../roles.html#legal-monitor">further information</a>.
                    </p>
                
</li>
                
<li>
                    
<p>Ensure that the line-endings and svn:eol-style property are correct for all files.
                      See <a href="../../roles.html#subversion-monitor">further information</a>.</p>
                
</li>
                
<li>
                    
<p>Ensure that documentation is ready.</p>
                
</li>
                
<li>
                    
<p>Ensure that all relevant plugins have been deployed to plugins/0.8-dev/ See other notes at
                        plugins/RELEASE_PROCESS.txt</p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">Check and integrate plugins/RELEASE_PROCESS.txt as a new document.</div>
</div>
                
</li>
            
</ol>
</div>

        
<a name="N1010F"></a><a name="PrepTrunk"></a>
<h2 class="underlined_10">Preparing your working copy of SVN trunk</h2>
<div class="section">
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">We need to discuss order from here on. My idea is to adjust docs before we enter code
                freeze to save time later. But if the rc fails and release is postponed might need to roll back changes
                easily and - if possible - roll them forward later. So creating an svn branch for the rc seems to make
                sense to me.
                Probably
                easiest would be to create an rc branch here and co that.
                wdyt?</div>
</div>
<p>In this step you make absolutely sure that your working copy of SVN trunk has no local modifications, or additional files that you have been fiddling with, and especially files that might be hidden by svn:ignore settings.
            </p>
<p>There are two ways to do this. Either do a complete new svn checkout,
              or use the 'svn status --no-ignore' command on your existing working copy.
            </p>
<ol>
                
<li>
                    
<p>In a new empty directory do <span class="codefrag">'svn co https://svn.apache.org/repos/asf/forrest/trunk'</span>
</p>
                
</li>
            
</ol>
<p>Alternative Approach</p>
<ol>
                
<li> Do 'svn update -r HEAD' to ensure that you are up-to-date. </li>
                
<li> Run 'svn status --no-ignore' </li>
                
<li>
                    
<p>Delete any extra files you might have added/changed in your local copy.
                      Delete any "build" directories in plugins, etc.
                      <strong>Extra files must not be
                            packed with the release.</strong> It must be a pristine copy of the current trunk.</p>
                
</li>
            
</ol>
</div>

        
<a name="N10140"></a><a name="adjustDocs"></a>
<h2 class="underlined_10">Preparing docs for next release cycle</h2>
<div class="section">
<p>In this phase we get the docs ready for the release. You will
              commit these changes, but do not publish to the website until
              after the release.</p>
<ol>
                
<li>
                    
<p>Edit "versions" entries in site.xml as follows:</p>

                    
<ol>
                        
<li>
                            
<p>Move all version numbers one line down so that </p>
                            
<pre class="code">
                                
 &lt;versions tab="docs"&gt;
    &lt;overview label="Overview" href="versions/index.html"/&gt;
    &lt;v0.8 label="0.8-dev" href="site:v0.80//index"/&gt;
    &lt;v0.7 label="0.7 (current)" href="site:v0.70//index"/&gt;
    &lt;v0.6 label="0.6" href="site:v0.60//index"/&gt;
  &lt;/versions&gt;
                        
                            </pre>
                            
<p>becomes</p>
                            
<pre class="code">
                                
 &lt;versions tab="docs"&gt;
    &lt;overview label="Overview" href="versions/index.html"/&gt;
    &lt;v0.9 label="0.9-dev" href="site:v0.90//index"/&gt;
    &lt;v0.8 label="0.8 (current)" href="site:v0.80//index"/&gt;
    &lt;v0.7 label="0.7" href="site:v0.70//index"/&gt;
  &lt;/versions&gt;
                        </pre>
                        
</li>
                    
</ol>
                
</li>
                
<li>Similarly edit tabs.xml</li>
                
<li>
                    
<p>Remove the past versions (0.6) docs directory by doing 'svn rm site-author/content/xdocs/docs_0_60</p>
                    
<div class="fixme">
<div class="label">Fixme ()</div>
<div class="content">Do we also remove the generated docs from forrest/site/docs_0_60 SVN? This also removes it from the website.</div>
</div>

                
</li>
                
<li>
                    
<p>Adjust version-numbers in site.xml.</p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">This used to be the comment: 'Do global replace throughout docs_0_80 to replace the string
                        ="site:v0.70 with ="site:v0.80' but this needs checking.</div>
</div>
                    
<div class="fixme">
<div class="label">Fixme (dc)</div>
<div class="content">Perhaps you are talking about something else.
                      I meant that when we copy the docs to become the next -dev (i.e.
                      this time docs_0_90) then we need to replace all "site:" references
                      (i.e. ="site:v0.80 with ="site:v0.90'). If you can see a better way, then great.
                     Maybe dropping the v0.x prefix will cause it to use the most recent doc,
                     e.g. use site:buildPlugin rather than site:v0.90/howto/buildplugin.
                  </div>
</div>
                    
                
</li>
                



                
<li>
                    
<p>Edit site-author/status.xml:</p>
                    
<ol>
                        
<li>
                            
<p>Remove the -dev from the current &lt;release&gt; tag, and set the release
                            date.</p>
                        
</li>
                        
<li>
                            
<p>Add a new &lt;release&gt; for development on the next version e.g. from:
                                &lt;release version="0.7-dev" date="not yet
                                released"&gt; ... to: &lt;release version="0.8-dev"
                                date="not yet released"&gt; &lt;/release&gt;
                                &lt;release version="0.7"
                                date="2002-02-13"&gt; ...</p>
                        
</li>
                    
</ol>


                
</li>
                
<li>
                    
<p>Edit the Forrest home page in the "News and events" section and add a text like:</p>
                    
<pre class="code"> Apache Forrest 0.xx was released on [Date]. [Important new features] </pre>
                
</li>
                
<li>Ensure that the documentation is building properly, do 'cd site-author; forrest'. Fix any linking errors.</li>
                
<li>
                  Create a new file, etc/RELEASE-NOTES-x.y.txt, where x.y is the version currently being released.
                  It is best to copy an earlier RELEASE-NOTES file, to keep a common layout.
                  In this file, insert the list of important changes which is obtained by doing:
                  http://localhost:8888/releaseNotes_0.8.txt
                </li>
                
<li>
                  Prepare the announcement text. Create a file etc/announcement-x.txt
                  (by 'svn move' the old one) and list the major new features, e.g. locationmap.
                </li>
                
<li>
                    
<p>Edit the forrest/site-author/content/xdocs/mirrors.html and adjust all version-specific content.</p>
                
</li>
                
<li>Commit all of the above changes.</li>
            
</ol>
</div>

        
<a name="N101B3"></a><a name="BuildDist"></a>
<h2 class="underlined_10">Building the distribution</h2>
<div class="section">
<p>In this phase you build the release candidate to be tested.</p>
<div class="note">
<div class="label">Note</div>
<div class="content">You can practice the following steps (as far as creating the branch) without committing anything even
                before code-freeze. This ensures a good release candidate.</div>
</div>
<ol>
                
<li>Announce that the code-freeze has now commenced.
                  Use the template <a href="announce_code_freeze.txt">announce_code_freeze.txt</a>
                  to send email to dev-list.
                  <div class="fixme">
<div class="label">Fixme ()</div>
<div class="content">Define what we mean by "code-freeze".</div>
</div>
                
</li>
                
<li>
                    
<p>Update your SVN working copy to include any last minute changes.</p>
                
</li>
                
<li>
                    
<p>Run the following quick tests from the command line of your system to ensure that all is well:</p>
                    
<ul>
                        
<li>
                            
<p>Change to the main directory and run <span class="codefrag">build test</span>. The build should conclude
                                without errors.</p>
                        
</li>
                        
<li>
                            
<p>Change to the site-author-directory and run 'forrest'. The docs should build without
                                errors.</p>
                        
</li>

                    
</ul>
                    
<p>If there are any problems, focus on problems that prevent building and invite other commiters to
                        help you solve the problems.</p>
                    
<div class="note">
<div class="label">Note</div>
<div class="content">It is not your job to fix bugs and code freeze should not commence with a broken trunk.</div>
</div>
                    
<p>If there are bugs that cannot be easily fixed, then call a halt to the release process and start
                        a discussion on rescheduling options on the dev-list with the template <a href="rc_did_not_build_what_now.txt">rc_did_not_build_what_now.txt</a>
</p>

                
</li>
                
<li>
                    
<p>Remove the build directories from core and plugins. Do <span class="codefrag">svn st --no-ignore</span> in the
                        root directory of your release candidate directory to be sure that all files created by the test
                        build have been removed and no other files have been changed. The status command should report
                        no changes.</p>
                
</li>

                
<li>
                    
<p>Update the version numbers at various places:</p>
                    
<ul>
                        
<li>
                            
<p>Edit main/build.xml and replace the '-dev' text with '' i.e. nothing: around line 45:
                                &lt;property name="forrest.version"
                                value="0.7-dev"/&gt; to: &lt;property
                                name="forrest.version" value="0.7"/&gt; </p>
                        
</li>

                        
<li>
                            
<p>Edit main/forrest.build.xml to update the version tag to remove "-dev". There are two
                                occurences: around line 32: &lt;property name="forrest.version"
                                value="0.7-dev"/&gt; and around line 60:
                                &lt;description&gt; | Forrest Site Builder | | 0.7-dev |</p>
                        
</li>
                        
<li>
                            
<p>Edit plugins/build.xml and increase the docs version number to the next major release:
                                around line 23: &lt;property name="forrest.version"
                                value="0.7"/&gt; to: &lt;property
                                name="forrest.version" value="0.8"/&gt; </p>
                            
<div class="note">
<div class="label">Note</div>
<div class="content">This is deliberately a major version up. It is assumed that plugins will be developed
                                against the next version of Forrest. Individual plugins can override this property in
                                their own build files.</div>
</div>
                        
</li>
                    
</ul>

                
</li>
                
<li>
                    
<p>Ensure that each plugin that uses the locationmap has its "release version" set to 0.8 or
                        more.</p>
                    
<p>If a plugin has a locationmap.xml file or uses "lm:" references in its *.xmap,
                     then it is using locationmap. See <a href="../../docs_0_80/howto/howto-buildPlugin.html">buildPlugin</a>.</p>
                
</li>
                
<li>
                    
<p>Edit 4 files in tools/forrestbar to update the version number to match the new release: -
                        install.rdf, line 24: &lt;em:version&gt;0.7&lt;/em:version&gt; - install.js,
                        line 19: var err = initInstall("ForrestBar", "forrestbar", "0.7"); -
                        xpi/chrome/content/contents.rdf, line 27: chrome:displayName="ForrestBar 0.7"/&gt; -
                        xpi/chrome/content/forrestbarOverlay.xul, about line 40 edit the version number as well as
                        change the link to point to the new release's docs: &lt;menuitem label="Current
                        Docs (0.7)"
                        onclick="navigate('http://forrest.apache.org/docs_0_70/index.html');"
                        /&gt; </p>
                    
<div class="fixme">
<div class="label">Fixme ()</div>
<div class="content">There are probably other areas which have version numbers. How can we improve this? Possibly with XML Entities, possibly with Ant properties.</div>
</div>
                
</li>
                
<li>Commit all of the above changes.</li>
                
<li>
                    
<p>Set your Java version to be the lowest specified of our supported versions.</p>
                    
<div class="note">
<div class="label">Note</div>
<div class="content"> Set the environment variable JAVA_HOME to the path of the Java version. Note for Windows: If
                        you change the setting in system properties, you need to logout and login again for the changes
                        to become effective.</div>
</div>
                
</li>
                
<li>
                    
<p>Take note of the SVN revision number of your trunk by running <span class="codefrag">svn info</span> from the
                        command line in the Release Candidates root dir and look at the "Last Changed Rev: ######".
                      This will be used later for the svn log message when the branch is created.
                      Also it is helpful for ensuring that no new commits have been made,
                      i.e. people forgetting the code freeze.
                      From here on watch the svn@ list.</p>
                
</li>
                
<li>
                    
<p>Now we will build the release candidates for Windows and Unix.</p>
                    
<div class="note">
<div class="label">Note</div>
<div class="content">The reason for creating two separate archives is the line-endings dilemma between Windows and
                        UNIX. SVN ensures correct line-endings on each operating system (as long as committers have been
                        diligent when adding/updating the repository).</div>
</div>
                    
<ul>
                        
<li>
                            
<p>On a UNIX machine:<br> Change to directory main and run <span class="codefrag">build release-dist</span>
                                to generate the distributions on a UNIX machine.</p>
                            
<p> Two archives are created: apache-forrest-X.Y.tar.gz apache-forrest-X.Y.zip. Ignore the
                                *.zip archive.</p>
                        
</li>
                        
<li>
                            
<p>On a Windows machine:<br> Change to directory main and run <span class="codefrag">build
                                release-dist</span> to generate the distributions on a UNIX machine.</p>
                            
<p> Two archives are created: apache-forrest-X.Y.tar.gz apache-forrest-X.Y.zip. Ignore the
                                *.tar.gz archive.</p>
                        
</li>
                    
</ul>
                
</li>
                
<li>Unpack and test the relevant archive in a fresh new directory.
                  No point getting people to test if it is broken. You need this for your own testing and vote anyway.
                  Be sure to set FORREST_HOME and PATH properly for this release candidate location
                  i.e. ensure that you are not using your trunk working copy.
                </li>
                
<li>
                    
<a name="signing"></a>
<p id="signing">Sign the Release Candidates distribution file and create the *.asc and *.md5 files.</p>
                    
<p>Here is one example when using <a href="http://www.gnupg.org/(en)/download/index.html">gpg</a>
                        and openssl from the command line. </p>
                    
<div class="note">
<div class="label">Note</div>
<div class="content">An windows version for openssl can be found at <a href="http://www.slproweb.com/products/Win32OpenSSL.html">http://www.slproweb.com/products/Win32OpenSSL.html</a>
</div>
</div>
                    
<pre class="code">
        gpg --recv-key &lt;myKey&gt;
        gpg --output crossley-apache-forrest-0.7.tar.gz.asc \
        --detach-sig --armor apache-forrest-0.7.tar.gz
        gpg --verify crossley-apache-forrest-0.7.tar.gz.asc \
        apache-forrest-0.7.tar.gz</pre>
                    
<p> ... should say "Good signature from ..."</p>

                    
<pre class="code">
        openssl dgst -md5 -out apache-forrest-0.7.tar.gz.md5 \
        apache-forrest-0.7.tar.gz
        md5sum apache-forrest-0.7.tar.gz
                    </pre>
                    
<p>... output should match that of the md5 file.</p>
                
</li>
                
<li>
                  
<p>Create a maintenance branch in SVN. This command can be run from anywhere
                    because it uses full URLs.</p>
                  
<pre class="code">
svn copy -r ##### -m "Create the x.y release branch from r#####" \
    https://svn.apache.org/repos/asf/forrest/trunk \
    https://svn.apache.org/repos/asf/forrest/branches/forrest_xy_branch

where
  'xy' is a compact form of the version (e.g. 04, 041, 05).
  '#####' is the SVN revision number that the branch was created from,
  which was the revision that the release candidates were generated from.
  (Remember that you recorded this number earlier.)
                  </pre>
                  
<p> See <a href="http://svn.apache.org/repos/asf/forrest/branches/">http://svn.apache.org/repos/asf/forrest/branches/</a>
                  for examples of past branches, e.g. forrest_07_branch
                  </p>
                
</li>
            
</ol>
</div>

        
<a name="N102A9"></a><a name="Testing+the+release+candidate+and+voting"></a>
<h2 class="underlined_10">Testing the release candidate and voting</h2>
<div class="section">
<p>Get Forrest developers to test the actual distribution on various platforms.</p>
<ol>
                
<li>
                    
<p>Upload the release candidates and signatures to a committer's webspace. Use the .tar.gz from the
                        UNIX machine and .zip from the Windows machine.</p>
                
</li>
                
<li>
                    
<p>Use template <a href="test_and_vote_on_rel_cand.txt">test_and_vote_on_rel_cand.txt</a> for an
                      email to the dev-list asking all developers to test and vote. Don't forget
                      to modify the template, to specify the md5sums etc. People need to tell you the
                      md5sum to be sure that they have tested and voted on the correct release candidate.
                      This is especially important if there has been more than one release candidate.</p>
                
</li>
                
<li>
                    
<p>As the votes come in:</p>
                    
<ul>
                        
<li>Make sure the distributions unpack on different systems without problems.</li>
                        
<li>Make sure that people have followed the actual user instructions in the Forrest
                            distribution at README.txt and index.html</li>
                        
<li>Encourage people to build some difficult sites.</li>
                    
</ul>

                
</li>
                
<li>If substantial problems are revealed (not just minor glitches) then co-ordinate their
                  fixing by other developers. Doing the fixing of issues is not the Release Manager's job.
                  Deciding what constitutes a "substantial" issue is entirely the RM's call.
                  Remember that there is still a code freeze, so don't let people be tempted to fix other
                  minor stuff or add some pet new feature that they have neglected. That can easily
                  introduce new problems.
                </li>
                
<li>If necessary start again with <a href="#BuildDist">Building the distribution</a> and build another
                    release candidate.</li>
                
<li>Tally the votes and report the result to the dev list.</li>
            
</ol>
</div>

        
<a name="N102E5"></a><a name="FinalRel"></a>
<h2 class="underlined_10">Finalizing the release</h2>
<div class="section">
<p>When a good release candidate has been achieved and affirmed by the vote, we'll finalize the release.</p>
<ol>
                
<li>
                    
<p>If there have been changes to the trunk since the branch was created, then merge trunk to branch.</p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">What is the purpose of this step? It doesn't seem to be right because trunk may
                        already contain parts of the next version. What we should do is do all fixing of RC-problems in
                        the rc-branch (same as changing docs) then, on release, merge branch back into trunk to
                        integrate fixes and doc-changes back into trunk. wdyt?</div>
</div>
                
</li>
                
<li>
                    
<p>Tag SVN by doing <span class="codefrag">'svn copy -m "Create tag forrest_xy from release
                            branch" \ https://svn.apache.org/repos/asf/forrest/branches/forrest_xy_branch \
                            https://svn.apache.org/repos/asf/forrest/tags/forrest_xy'</span>
                        where 'xy' is a compact (without the dots) form of the version number (e.g. 04,
                        041, 05).</p>
                  
<p> See <a href="http://svn.apache.org/repos/asf/forrest/tags/">http://svn.apache.org/repos/asf/forrest/tags/</a>
                  for examples of past tags, e.g. forrest_07
                  </p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">If we change procedure to create an rc-branch this will become a merge changes
                        from trunk then rename rc-branch to final release branch. right?</div>
</div>
                
</li>
                
<li>
                    
<p>Announce the end of the code-freeze by sendung the email-template <a href="announce_end_of_code_freeze.txt">announce_end_of_code_freeze.txt</a>to the dev
                    list.</p>
                
</li>
            
</ol>
</div>

        
<a name="N1031A"></a><a name="UploadAndAnnounce"></a>
<h2 class="underlined_10">Upload and announcement</h2>
<div class="section">
<p>In this phase we'll upload the new Release, wait for it to be available on most mirror sites, then
                announce the new release.</p>
<div class="note">
<div class="label">Note</div>
<div class="content">During this phase there is a lot of waiting. While things are happening you can be doing
              some of the other tasks in this Upload section and in the <a href="#cleanup">Cleanup</a> section.</div>
</div>
<ol>
                
<li>
                    
<p>Use scp to upload the release: the *.tar.gz, the *.zip, the *.asc and *.md5 files, and the
                        RELEASE-NOTES-x.y.txt to people.apache.org at /www/www.apache.org/ dist/forrest/</p>
                    
<p>Ensure correct file permissions by executing <span class="codefrag">'chgrp forrest *'</span> then
                      <span class="codefrag">'chmod 664 *'</span> in that directory.</p>
                    
<p>Each PMC member has a server account and belongs to the forrest group.</p>
                    
<p>The process is documented at <a href="http://people.apache.org/~bodewig/mirror.html">http://www.apache.org/~bodewig/mirror.html</a> and <a href="http://www.apache.org/dev/#releases">http://www.apache.org/dev/#releases</a>
</p>

                    
<p>Leave the previous dist there as well as the new one, until after the announcement
                    (because mirrors.html cannot be updated until most mirrors have received the release).
                    </p>

                    
<div class="note">
<div class="label">Note</div>
<div class="content">The other files there (HEAD.html README.html LICENSE.txt KEYS) are all automatically updated
                        from the SVN:forrest/dist/ repository. </div>
</div>
                    
<div class="fixme">
<div class="label">Fixme ()</div>
<div class="content">FIXME: Add notes about the KEYS file in the "forrest-dist" SVN respository.</div>
</div>
                
</li>

                
<li>
                    
<p>Wait for the various mirrors to pick up the new files.</p>
                    
<p> For some mirrors, this takes only a few hours. However others are slow. How long to wait is a
                        tradeoff, e.g. 8 hours.</p>
                    
<p> See <a href="http://www.apache.org/mirrors/">Status of mirrors</a>.
                    </p>
                    
<p> Take note of the time that the eu.apache.org mirror is updated, then compare each "mirror age"
                        to that.</p>
                    
<p> When you see that a good proportion of the mirrors have received the release, then update the
                        website, then send the announcement.</p>
                
</li>
                
<li>Create a copy of current dev-docs in trunk for the next development phase.
                    Do 'cd site-author/content/xdocs' and 'svn copy docs_0_70 docs_0_80' (Adjust version
                    numbers as needed).</li>
                
<li>Open site.xml and add a copy of the most current versioned section (e.g. &lt;v0.80&gt;) above it.
                    Increment the first decimal of the sections name to reflect the next planned release (e.g. &lt;v0.90&gt;).
                </li>
                
<li>
                    
<p>Update the .htaccess file to redirect /docs/dev/ to the next version,
                        and do other changes noted in the .htaccess file.
                        See site-author/content/.htaccess</p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">Need to go through .htaccess and clean up.</div>
</div>
                
</li>
                
<li>
                  Update the release version number and release date in our DOAP file.
                  See site-author/content/doap.xml
                </li>
                
<li>Commit all of the above changes.</li>
                
<li>
                    
<p>Rebuild (Forrest site) and publish the Forrest website as normal. Be sure to use the new version of trunk
                        for building the docs. Refer to <a href="../../procedures/How_to_publish_docs.html">Publishing Forrest
                            Documentation</a> for details.</p>
                
</li>
                
<li>
                    
<p>Update the xml.apache.org website (Forrest is part of the Apache XML federation of projects).
                        Edit xml-site/src/documentation/content/xdocs/news.xml and record the
                        announcement, and then commit the new HTML to xml-site/targets/forrest
                        Note that they use forrest-0.7 to build their website.
                        See http://xml.apache.org/guidelines.html#website-top</p>
                
</li>
                
<li>
<p>Send <a href="announce_release.txt">announce_release.txt</a>as email to
                    'dev@forrest.apache.org', 'user@forrest.apache.org', 'announce@apache.org',
                    'announcements@xml.apache.org'. Sign the email (e.g. PGP).</p>
                    
<p>See previous announcements for examples:</p>
                    
<ul>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=103746673310573">0.2</a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=104399934113331">0.3 </a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=jakarta-announce&m=104510734501302">0.4</a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=106352706005681">0.5</a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=106541447606765">0.5.1</a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=109784461425740">0.6</a>
</li>
                        
<li>
<a href="http://marc.theaimsgroup.com/?l=xml-apache-announce&m=111960678028211">0.7</a>
</li>
                    
</ul>
                
</li>
                
<li>
<p>Do the Freshmeat announcement:
                    <a href="http://freshmeat.net/projects/forrest/">http://freshmeat.net/projects/forrest/</a>
</p>
</li>
            
</ol>
</div>

        
<a name="N103C9"></a><a name="cleanup"></a>
<h2 class="underlined_10">Cleanup</h2>
<div class="section">
<ol>
                
<li>
<p>Edit main/build.xml, increment the version and add a -dev tag:
                    around line 45:
                    &lt;property name="version" value="0.8-dev"/&gt;</p>
</li>
                
<li>
<p>Edit main/forrest.build.xml and update the version:
                    around line 32:</p>
                    
<pre class="code">
    &lt;property name="version" value="0.8-dev"/&gt;  

    around line 52:
    &lt;description&gt;
    |                 Forrest Site Builder                  |
    |                        0.8-dev                        |
                        </pre>
                
</li>
                
<li>Commit all of the above changes.</li>
                
<li>
<p>Remove old dist files from the /www/www.apache.org/dist/forrest/ directory.
                    They have already been automatically archived at archive.apache.org/dist/forrest/</p>
</li>
                
<li>Create a new plugins directory in the forrest/site SVN for the
                  next development phase:
                  <pre class="code">
svn mkdir https://svn.apache.org/repos/asf/forrest/site/plugins/0.9
                  </pre>
                
</li>
                
<li>
<p>Do some Jira administration (need to be in the jira-administrators group)</p>
                    
<ol>
                        
<li>
<p>Tweak the "release" versions via "admin" interface at our Jira. Do this ...</p>
</li>
                        
<li>
<p>Re-name the VersionIds using "Manage Versions" then "Edit details":
                            e.g. 0.7-dev is renamed to 0.7 and 0.8 becomes 0.8-dev</p>
</li>
                        
<li>
<p>Mark 0.7 as released using "Manage Versions".</p>
</li>
                        
<li>
<p>Review the Issues for the old version and move any Incomplete ones up.</p>
</li>
                        
<li>
<p>Change the "fixfor" attribute to the next version for the
                            "project.issues-rss-url" RSS feed in forrest.properties</p>
</li>
                    
</ol>
                    
                
</li>
                
<li>
<p>Cleanup this "release process" document to set version number examples
                    to be ready for the next release.</p>
                    
<div class="fixme">
<div class="label">Fixme (fso)</div>
<div class="content">I'd like to drop this step and rather word everything more flexibly.</div>
</div>
                
</li>
                
<li>
<p>Remove the release candidates from your public_html directory.</p>
</li>
            
</ol>
</div>
        
        
<a name="N10417"></a><a name="conclusion"></a>
<h2 class="underlined_10">Conclusion</h2>
<div class="section">
<p>All done!</p>
<p>Or perhaps not.. if you think of anything, please refine these instructions.</p>
</div>
        
        
    
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2002-2006 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
