<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7-dev">
<meta name="Forrest-skin-name" content="pelt">
<meta name="generator" content="">
<title>Annotated forrest.xmap (v0.7)</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../../images/apache-forrest.png" title="The Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../../images/project-logo.gif" title="Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="forrest.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google:');" value="Search the site with google:" size="25" name="q" id="query" type="text">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="base-not-selected" href="../../index.html">Welcome</a>
</li>
<li>
<a class="base-not-selected" href="../../contrib.html">Project</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/index.html">0.7 Docs</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/howto/index.html">0.7 How-To</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/plugins/index.html">0.7 Plugins</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript" language="JavaScript"><!--
              document.write("Published: " + document.lastModified);
              //  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../../skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../index.html">Index</a>
</div>
<div class="menuitem">
<a href="../../license.html">License</a>
</div>
<div class="menuitem">
<a href="http://forrest.apache.org/mirrors.cgi">Download</a>
</div>
<div class="menuitem">
<a href="../../who.html">Who we are</a>
</div>
<div class="menuitem">
<a href="../../flyer.html">Flyer</a>
</div>
<div class="menuitem">
<a href="../../live-sites.html">Example sites</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', '../../skin/')" id="menu_1.2Title" class="menutitle">Documentation</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../docs/faq.html">FAQs</a>
</div>
<div class="menuitem">
<a href="../../docs/changes.html">Changes</a>
</div>
<div class="menuitem">
<a href="../../docs/todo.html">Todo</a>
</div>
<div class="menuitem">
<a href="../../docs/your-project.html">Using Forrest</a>
</div>
<div class="menuitem">
<a href="../../docs/validation.html">XML Validation</a>
</div>
<div class="menuitem">
<a href="../../docs/linking.html">Menus and Linking</a>
</div>
<div class="menuitem">
<a href="../../docs/searching.html">Searching</a>
</div>
<div class="menuitem">
<a href="../../docs/skins.html">Default Skins</a>
</div>
<div class="menuitem">
<a href="../../docs/skin-package.html">Skin Packages</a>
</div>
<div class="menuitem">
<a href="../../docs/views.html">Views-dev</a>
</div>
<div class="menuitem">
<a href="../../docs/forrest-contract.html">Our Contract</a>
</div>
<div class="menuitem">
<a href="../../docs/compliance.html">Standards Compliance</a>
</div>
<div onclick="SwitchMenu('menu_1.2.14', '../../skin/')" id="menu_1.2.14Title" class="menutitle">Advanced Topics</div>
<div id="menu_1.2.14" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/build.html">Building Forrest</a>
</div>
<div class="menuitem">
<a href="../../docs/catalog.html">Using DTD Catalogs</a>
</div>
<div class="menuitem">
<a href="../../docs/sitemap-ref.html">Sitemap Reference</a>
</div>
<div class="menuitem">
<a href="../../docs/project-sitemap.html">Project sitemap</a>
</div>
<div class="menuitem">
<a href="../../docs/cap.html">Sourcetype Action</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.15', '../../skin/')" id="menu_1.2.15Title" class="menutitle">Other versions</div>
<div id="menu_1.2.15" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs.html">Overview</a>
</div>
<div class="menuitem">
<a href="http://forrest.apache.org/docs/../0.8/">0.8-dev</a>
</div>
<div class="menuitem">
<a href="../../docs/index.html">0.7 (current)</a>
</div>
<div class="menuitem">
<a href="http://forrest.apache.org/docs/../0.6/">0.6</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.16', '../../skin/')" id="menu_1.2.16Title" class="menutitle">Upgrading</div>
<div id="menu_1.2.16" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/upgrading_07.html">Upgrading to 0.7</a>
</div>
<div class="menuitem">
<a href="../../docs/upgrading_06.html">Upgrading to 0.6</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.17', '../../skin/')" id="menu_1.2.17Title" class="menutitle">SubProjects</div>
<div id="menu_1.2.17" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/forrestbar.html">ForrestBar</a>
</div>
<div class="menuitem">
<a href="../../docs/forrestbot.html">Forrestbot</a>
</div>
<div class="menuitem">
<a href="../../docs/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.18', '../../skin/')" id="menu_1.2.18Title" class="menutitle">Reference docs</div>
<div id="menu_1.2.18" class="menuitemgroup">
<div onclick="SwitchMenu('menu_1.2.18.1', '../../skin/')" id="menu_1.2.18.1Title" class="menutitle">DTD documentation</div>
<div id="menu_1.2.18.1" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/dtd-docs.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../docs/document-v20.dtdx.html">document-v20</a>
</div>
<div class="menuitem">
<a href="../../docs/howto-v20.dtdx.html">howto-v20</a>
</div>
<div class="menuitem">
<a href="../../docs/faq-v20.dtdx.html">faq-v20</a>
</div>
<div class="menuitem">
<a href="../../docs/document-v13.dtdx.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../../docs/howto-v13.dtdx.html">howto-v13</a>
</div>
<div class="menuitem">
<a href="../../docs/faq-v13.dtdx.html">faq-v13</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.18.2', '../../skin/')" id="menu_1.2.18.2Title" class="menutitle">Doc samples</div>
<div id="menu_1.2.18.2" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/document-v13.html">document-v13</a>
</div>
<div class="menuitem">
<a href="../../docs/document-v20.html">document-v20</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.19', '../../skin/')" id="menu_1.2.19Title" class="menutitle">Older Docs</div>
<div id="menu_1.2.19" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/primer.html">Forrest Primer</a>
</div>
<div class="menuitem">
<a href="../../docs/libre-intro.html">Libre</a>
</div>
<div class="menuitem">
<a href="../../docs/dreams.html">Dream list</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.20', '../../skin/')" id="menu_1.2.20Title" class="menutitle">How-To</div>
<div id="menu_1.2.20" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/howto/index.html">Overview</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-howto.html">Write a How-to</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-asf-mirror.html">Download mirror</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-pdf-tab.html">Create tab PDF</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-editcss.html">Edit CSS (WYSIWYG)</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-corner-images.html">CSS corner SVG</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-forrest-from-maven.html">Maven Integration</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-buildPlugin.html">Build a Plugin</a>
</div>
<div class="menuitem">
<a href="../../docs/howto/howto-custom-html-source.html">Custom html source</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.21', '../../skin/')" id="menu_1.2.21Title" class="menutitle">Plugins</div>
<div id="menu_1.2.21" class="menuitemgroup">
<div class="menuitem">
<a href="../../docs/plugins/index.html">Index</a>
</div>
<div class="menuitem">
<a href="../../docs/plugins/usingPlugins.html">Using Plugins</a>
</div>
<div class="menuitem">
<a href="../../docs/plugins/pluginInfrastructure.html">Plugin Infrastructure</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3', '../../skin/')" id="menu_1.3Title" class="menutitle">Getting Involved</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../../contrib.html">Contributing</a>
</div>
<div class="menuitem">
<a href="http://svn.apache.org/viewcvs.cgi/forrest/trunk/">Browse SVN</a>
</div>
<div class="menuitem">
<a href="../../mail-lists.html">Mail lists</a>
</div>
<div class="menuitem">
<a href="http://issues.cocoondev.org/secure/BrowseProject.jspa?id=10000">Bugs and Issues</a>
</div>
<div class="menuitem">
<a href="../../forrest-issues.html">Release Issues</a>
</div>
<div class="menuitem">
<a href="http://brutus.apache.org/gump/public/forrest/">Gump Integration</a>
</div>
<div class="menuitem">
<a href="../../guidelines.html">Project guidelines</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../../skin/')" id="menu_1.4Title" class="menutitle">Proposals</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../../proposal-asf-publish.html">ASF Publishing</a>
</div>
<div class="menuitem">
<a href="../../proposal-asf-forrestbot.html">ASF Forrestbot</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', '../../skin/')" id="menu_1.5Title" class="menutitle">Related projects</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a href="http://gump.apache.org/">Apache Gump</a>
</div>
<div class="menuitem">
<a href="http://cocoon.apache.org/">Apache Cocoon</a>
</div>
<div class="menuitem">
<a href="http://lenya.apache.org/">Apache Lenya</a>
</div>
<div class="menuitem">
<a href="http://xml.apache.org/">Apache XML</a>
</div>
</div>
<div id="credit">
<hr>
    This is documentation for development version v0.7
   (<a href="http://forrest.apache.org/docs.html">More</a>)</div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="forrest.xmap.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">
	        Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>Annotated forrest.xmap</h1>
<div id="motd-area">
    This is documentation for development version v0.7
   (<a href="http://forrest.apache.org/docs.html">More</a>)</div>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#sitemap.xmap">sitemap.xmap</a>
<ul class="minitoc">
<li>
<a href="#Definition+of+File-Resolver-Resource">Definition of File-Resolver-Resource</a>
</li>
<li>
<a href="#Second+Match+for+%27**.xml%27">Second Match for '**.xml'</a>
</li>
</ul>
</li>
</ul>
</div>
<a name="N10010"></a><a name="sitemap.xmap"></a>
<h2 class="underlined_10">sitemap.xmap</h2>
<div class="section">
<pre>
&lt;?xml version="1.0"?&gt;
&lt;!-- ===============================================
Pipelines defining all Source XML types Forrest can handle.
Converts from arbitrary formats to standard Forrest doc-v12 XML.

First, determines if a simple format file exists.
Candidates are: .html .ihtml .txt .sxw .jspwiki 

Otherwise, the default *.xml handling is used.  The XML's DTD type is
discovered using the SourceTypeAction, and an appropriate transformation
applied.  Thus to add new XML types, just define a new &lt;sourcetype&gt;
and an appropriate &lt;map:when&gt; handler.

Generates  :  Source XML, Body HTML for *.ehtml
Example URL:  http://localhost:8888/index.xml
Used by    :  *.html and *.pdf pipelines in sitemap.xmap
Uses       :  content/xdocs/**.xml

$Revision: 1.8 $
==================================================== --&gt;

&lt;map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0"&gt;
  &lt;map:components&gt;
    &lt;map:generators default="file"&gt;
      &lt;map:generator name="html"      src="org.apache.cocoon.generation.HTMLGenerator"&gt;
        &lt;jtidy-config&gt;WEB-INF/jtidy.properties&lt;/jtidy-config&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="text2xml" logger="sitemap.generator.textgenerator"
                     src="org.apache.cocoon.generation.TextGenerator"&gt;
       &lt;parameter name="localizable" value="true"/&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="exception"
                  src="org.apache.cocoon.generation.ParseExceptionGenerator"/&gt;
                  
    &lt;/map:generators&gt;
    &lt;map:serializers default="html"/&gt;
    &lt;map:matchers default="wildcard"/&gt;

    &lt;map:transformers default="xslt"&gt;
     &lt;map:transformer name="pattern"
                      src="org.apache.cocoon.transformation.PatternTransformer" 
                      logger="sitemap.transformer.pattern"&gt;
      &lt;parameter name="groups" value="true"/&gt;
     &lt;/map:transformer&gt;
     &lt;map:transformer name="lexer"
                      src="org.apache.cocoon.transformation.LexicalTransformer" 
                      logger="sitemap.transformer.lexer"&gt;
      &lt;parameter name="localizable" value="true"/&gt;
     &lt;/map:transformer&gt;
     &lt;map:transformer name="parser"
                      src="org.apache.cocoon.transformation.ParserTransformer" 
                      logger="sitemap.transformer.parser"&gt;
      &lt;parameter name="flatten" value="true"/&gt;
      &lt;parameter name="recovery" value="true"/&gt;
      &lt;parameter name="localizable" value="true"/&gt;
     &lt;/map:transformer&gt;
  
     &lt;map:transformer name="extparser"
                      src="org.apache.cocoon.transformation.ExtendedParserTransformer"
                      logger="sitemap.transformer.extendedparser"&gt;
     &lt;/map:transformer&gt;
    &lt;/map:transformers&gt;

    &lt;map:actions&gt;
      &lt;map:action logger="sitemap.action.sourcetype" name="sourcetype" src="org.apache.forrest.sourcetype.SourceTypeAction"&gt;
        &lt;sourcetype name="document-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v10"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v11"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.1//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v12"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.2//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v13"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V1.3//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v20a"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V2.0a//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="document-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Documentation V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="todo-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Todo V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="changes-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD Changes V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
        &lt;sourcetype name="howto-v20"&gt;
          &lt;document-declaration public-id="-//APACHE//DTD How-to V2.0//EN" /&gt;
        &lt;/sourcetype&gt;
      &lt;/map:action&gt;
      &lt;map:action logger="sitemap.action.locale" name="locale" src="org.apache.cocoon.acting.LocaleAction"&gt;
      &lt;/map:action&gt;
    &lt;/map:actions&gt;
    &lt;map:selectors default="parameter"&gt;
    &lt;map:selector logger="sitemap.selector.parameter" name="parameter" src="org.apache.cocoon.selection.ParameterSelector" /&gt;
   &lt;map:selector logger="sitemap.selector.exception" name="exception"
                 src="org.apache.cocoon.selection.ExceptionSelector"&gt;
     &lt;exception name="syntax" class="net.sourceforge.chaperon.process.ParseException"/&gt;
     &lt;exception class="java.lang.Throwable" unroll="true"/&gt;
   &lt;/map:selector&gt;
      &lt;map:selector logger="sitemap.selector.config" name="config" src="org.apache.cocoon.selection.SimpleSelector" /&gt;
    &lt;/map:selectors&gt;
  &lt;/map:components&gt;

  &lt;map:resources&gt;
    &lt;map:resource name="transform-to-document"&gt;
      &lt;map:act type="sourcetype" src="{src}"&gt;
        &lt;map:select type="parameter"&gt;
          &lt;map:parameter name="parameter-selector-test" value="{sourcetype}" /&gt;

          &lt;map:when test="document-v10"&gt;
          &lt;!-- FIXME (JJP):  This should use the v12 now--&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv10todocv11.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="document-v20a"&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv20todocv12.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="document-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/docv20todocv13.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="howto-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="howto-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:when test="howto-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/howto2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="todo-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/todo2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v10"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changesv10tochangesv11.xsl" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v11"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v12"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v13"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;

          &lt;map:when test="changes-v20"&gt;
            &lt;map:transform src="{forrest:stylesheets}/changes2document.xsl" /&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise /&gt;
        &lt;/map:select&gt;
      &lt;/map:act&gt;
    &lt;/map:resource&gt;
</pre>
<a name="N10016"></a><a name="Definition+of+File-Resolver-Resource"></a>
<h3 class="underlined_5">Definition of File-Resolver-Resource</h3>
<pre>
    &lt;map:resource name="file-resolver"&gt;
      &lt;map:select type="exists"&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.ihtml"&gt;
          &lt;map:generate src="{project:content.xdocs}{uri}.ihtml" type="html" /&gt;
          &lt;map:transform src="{forrest:stylesheets}/html2document.xsl" /&gt;
          &lt;map:transform type="idgen" /&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:when&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.html"&gt;
          &lt;map:generate src="{project:content.xdocs}{uri}.html" type="html" /&gt;
          &lt;map:transform src="{forrest:stylesheets}/html2document.xsl" /&gt;
          &lt;map:transform type="idgen" /&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:when&gt;
        &lt;map:when test="{project:content.xdocs}{uri}.txt"&gt;
          &lt;map:match type="regexp" pattern="^(.*?)([^/]*).xml$"&gt;
            &lt;map:generate type="text2xml" src="{project:content.xdocs}{1}{2}.txt" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/text2document.xsl"&gt;
              &lt;map:parameter name="filename" value="{2}" /&gt;
            &lt;/map:transform&gt;
            &lt;map:serialize type="xml-document"/&gt;
          &lt;/map:match&gt;
        &lt;/map:when&gt;
        &lt;map:otherwise&gt;
        
          &lt;map:select type="exists"&gt;
             &lt;map:when test="{project:temp-dir}/input.xmap"&gt;
               &lt;map:mount uri-prefix=""
                          src="{project:temp-dir}/input.xmap" 
                          check-reload="yes" 
                          pass-through="true"/&gt;
            &lt;/map:when&gt;
          &lt;/map:select&gt;
        
          &lt;map:generate src="{project:content.xdocs}{uri}.xml" /&gt;
          &lt;map:call resource="transform-to-document"&gt;
            &lt;map:parameter name="src" value="{project:content.xdocs}{uri}.xml" /&gt;
          &lt;/map:call&gt;
          &lt;map:serialize type="xml-document"/&gt;
        &lt;/map:otherwise&gt;
      &lt;/map:select&gt;
    &lt;/map:resource&gt;
  &lt;/map:resources&gt;

  &lt;map:pipelines&gt;
    &lt;map:pipeline&gt;

      &lt;!-- ============================================================ --&gt;
      &lt;!-- INTERMEDIATE FORMATS                                         --&gt;
      &lt;!-- ============================================================ --&gt;

      &lt;map:match pattern="**body-*.html"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:content.xdocs}{1}{2}.ehtml"&gt;
            &lt;map:generate src="{project:content.xdocs}{1}{2}.ehtml" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/html2htmlbody.xsl" /&gt;
            &lt;map:serialize type="xml" /&gt;
          &lt;/map:when&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;

      &lt;!-- ============================================================ --&gt;
      &lt;!-- SOURCE FORMATS                                               --&gt;
      &lt;!-- ============================================================ --&gt;
</pre>
<a name="N1001C"></a><a name="Second+Match+for+%27**.xml%27"></a>
<h3 class="underlined_5">Second Match for '**.xml'</h3>
<pre>
      &lt;map:match pattern="**.xml"&gt;
        &lt;map:select type="config"&gt;
          &lt;map:parameter name="value" value="{defaults:i18n}"/&gt;
          &lt;map:when test="true"&gt;
          &lt;map:act type="locale"&gt;
            &lt;map:call resource="file-resolver"&gt;
              &lt;map:parameter name="uri" value="{../1}_{language}"/&gt;
            &lt;/map:call&gt;
          &lt;/map:act&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:call resource="file-resolver"&gt;
              &lt;map:parameter name="uri" value="{1}"/&gt;
            &lt;/map:call&gt;
          &lt;/map:otherwise&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;
      
    &lt;/map:pipeline&gt;
  &lt;/map:pipelines&gt;
&lt;/map:sitemap&gt;
</pre>
</div>
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
 Copyright &copy; 2002-2005 The Apache Software Foundation.</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
