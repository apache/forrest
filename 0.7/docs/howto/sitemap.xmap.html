<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7-dev">
<meta name="Forrest-skin-name" content="pelt">
<meta-data>
<meta content="HTML Tidy, see www.w3.org" name="generator">
</meta-data>
<title>Annotated core sitemap.xmap (v0.7)</title>
<link type="text/css" href="../../skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="../../skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="../../skin/print.css" rel="stylesheet">
<link type="text/css" href="../../skin/profile.css" rel="stylesheet">
<script src="../../skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="../../skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="../../skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="../../favicon.ico">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">apache</a> &gt; <a href="http://forrest.apache.org/">forrest</a><script src="../../skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://www.apache.org/"><img class="logoImage" alt="Apache" src="../../images/apache-forrest.png" title="The Apache Software Foundation"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://forrest.apache.org/"><img class="logoImage" alt="Forrest" src="../../images/project-logo.gif" title="Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="forrest.apache.org" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google:');" value="Search the site with google:" size="25" name="q" id="query" type="text">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li>
<a class="base-not-selected" href="../../index.html">Welcome</a>
</li>
<li>
<a class="base-not-selected" href="../../contrib.html">Project</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/index.html">0.7 Docs</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/howto/index.html">0.7 How-To</a>
</li>
<li>
<a class="base-not-selected" href="../../docs/plugins/index.html">0.7 Plugins</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript" language="JavaScript"><!--
              document.write("Published: " + document.lastModified);
              //  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_1.1', '../../skin/')" id="menu_1.1Title" class="menutitle">About</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../index.html">Index</a>
</div>
<div class="menuitem">
<a title="" href="../../license.html">License</a>
</div>
<div class="menuitem">
<a title="" href="http://forrest.apache.org/mirrors.cgi">Download</a>
</div>
<div class="menuitem">
<a title="" href="../../who.html">Who we are</a>
</div>
<div class="menuitem">
<a title="" href="../../flyer.html">Flyer</a>
</div>
<div class="menuitem">
<a title="" href="../../live-sites.html">Example sites</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2', '../../skin/')" id="menu_1.2Title" class="menutitle">Documentation</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/index.html">Overview</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/faq.html">FAQs</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/changes.html">Changes</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/todo.html">Todo</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/your-project.html">Using Forrest</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/validation.html">XML Validation</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/linking.html">Menus and Linking</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/searching.html">Searching</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/skins.html">Default Skins</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/skin-package.html">Skin Packages</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/views.html">Views-dev</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/forrest-contract.html">Our Contract</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/compliance.html">Standards Compliance</a>
</div>
<div onclick="SwitchMenu('menu_1.2.14', '../../skin/')" id="menu_1.2.14Title" class="menutitle">Advanced Topics</div>
<div id="menu_1.2.14" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/build.html">Building Forrest</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/catalog.html">Using DTD Catalogs</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/sitemap-ref.html">Sitemap Reference</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/project-sitemap.html">Project sitemap</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/cap.html">Sourcetype Action</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.15', '../../skin/')" id="menu_1.2.15Title" class="menutitle">Other versions</div>
<div id="menu_1.2.15" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs.html">Overview</a>
</div>
<div class="menuitem">
<a title="" href="http://forrest.apache.org/docs/../0.8/">0.8-dev</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/index.html">0.7 (current)</a>
</div>
<div class="menuitem">
<a title="" href="http://forrest.apache.org/docs/../0.6/">0.6</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.16', '../../skin/')" id="menu_1.2.16Title" class="menutitle">Upgrading</div>
<div id="menu_1.2.16" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/upgrading_07.html">Upgrading to 0.7</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/upgrading_06.html">Upgrading to 0.6</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.17', '../../skin/')" id="menu_1.2.17Title" class="menutitle">SubProjects</div>
<div id="menu_1.2.17" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/forrestbar.html">ForrestBar</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/forrestbot.html">Forrestbot</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/forrestbot-web-interface.html">Forrestbot Webapp</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.18', '../../skin/')" id="menu_1.2.18Title" class="menutitle">Reference docs</div>
<div id="menu_1.2.18" class="menuitemgroup">
<div onclick="SwitchMenu('menu_1.2.18.1', '../../skin/')" id="menu_1.2.18.1Title" class="menutitle">DTD documentation</div>
<div id="menu_1.2.18.1" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/dtd-docs.html">Overview</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/document-v20.dtdx.html">document-v20</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto-v20.dtdx.html">howto-v20</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/faq-v20.dtdx.html">faq-v20</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/document-v13.dtdx.html">document-v13</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto-v13.dtdx.html">howto-v13</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/faq-v13.dtdx.html">faq-v13</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.18.2', '../../skin/')" id="menu_1.2.18.2Title" class="menutitle">Doc samples</div>
<div id="menu_1.2.18.2" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/document-v13.html">document-v13</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/document-v20.html">document-v20</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.19', '../../skin/')" id="menu_1.2.19Title" class="menutitle">Older Docs</div>
<div id="menu_1.2.19" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/primer.html">Forrest Primer</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/libre-intro.html">Libre</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/dreams.html">Dream list</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.20', '../../skin/')" id="menu_1.2.20Title" class="menutitle">How-To</div>
<div id="menu_1.2.20" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/howto/index.html">Overview</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-howto.html">Write a How-to</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-asf-mirror.html">Download mirror</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-pdf-tab.html">Create tab PDF</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-editcss.html">Edit CSS (WYSIWYG)</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-corner-images.html">CSS corner SVG</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-forrest-from-maven.html">Maven Integration</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-buildPlugin.html">Build a Plugin</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/howto/howto-custom-html-source.html">Custom html source</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2.21', '../../skin/')" id="menu_1.2.21Title" class="menutitle">Plugins</div>
<div id="menu_1.2.21" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../docs/plugins/index.html">Index</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/plugins/usingPlugins.html">Using Plugins</a>
</div>
<div class="menuitem">
<a title="" href="../../docs/plugins/pluginInfrastructure.html">Plugin Infrastructure</a>
</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3', '../../skin/')" id="menu_1.3Title" class="menutitle">Getting Involved</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../contrib.html">Contributing</a>
</div>
<div class="menuitem">
<a title="" href="http://svn.apache.org/viewcvs.cgi/forrest/trunk/">Browse SVN</a>
</div>
<div class="menuitem">
<a title="" href="../../mail-lists.html">Mail lists</a>
</div>
<div class="menuitem">
<a title="" href="http://issues.cocoondev.org/secure/BrowseProject.jspa?id=10000">Bugs and Issues</a>
</div>
<div class="menuitem">
<a title="" href="../../forrest-issues.html">Release Issues</a>
</div>
<div class="menuitem">
<a title="" href="http://brutus.apache.org/gump/public/forrest/">Gump Integration</a>
</div>
<div class="menuitem">
<a title="" href="../../guidelines.html">Project guidelines</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4', '../../skin/')" id="menu_1.4Title" class="menutitle">Proposals</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a title="" href="../../proposal-asf-publish.html">ASF Publishing</a>
</div>
<div class="menuitem">
<a title="" href="../../proposal-asf-forrestbot.html">ASF Forrestbot</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.5', '../../skin/')" id="menu_1.5Title" class="menutitle">Related projects</div>
<div id="menu_1.5" class="menuitemgroup">
<div class="menuitem">
<a title="" href="http://gump.apache.org/">Apache Gump</a>
</div>
<div class="menuitem">
<a title="" href="http://cocoon.apache.org/">Apache Cocoon</a>
</div>
<div class="menuitem">
<a title="" href="http://lenya.apache.org/">Apache Lenya</a>
</div>
<div class="menuitem">
<a title="" href="http://xml.apache.org/">Apache XML</a>
</div>
<div class="menuitem">
<a title="" href="http://www.apache.org/~vgritsenko/stats/">Statistics</a>
</div>
</div>
<div id="credit">
<hr>
    This is documentation for current release v0.7
   (<a href="http://forrest.apache.org/docs.html">More</a> ...)</div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="../../skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="sitemap.xmap.pdf"><img alt="PDF -icon" src="../../skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<div class="trail">
	        Font size: 
	          &nbsp;<input value="Reset" class="resetfont" title="Reset text" onclick="ndeSetTextSize('reset'); return false;" type="button">      
	          &nbsp;<input value="-a" class="smallerfont" title="Shrink text" onclick="ndeSetTextSize('decr'); return false;" type="button">
	          &nbsp;<input value="+a" class="biggerfont" title="Enlarge text" onclick="ndeSetTextSize('incr'); return false;" type="button">
</div>
<h1>Annotated core sitemap.xmap</h1>
<div id="motd-area">
    This is documentation for current release v0.7
   (<a href="http://forrest.apache.org/docs.html">More</a> ...)</div>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#sitemap.xmap">sitemap.xmap</a>
<ul class="minitoc">
<li>
<a href="#Start+of+Sitemap">Start of Sitemap</a>
</li>
<li>
<a href="#Start+of+Pipelines">Start of Pipelines</a>
</li>
<li>
<a href="#Test+for+First+Pipeline">Test for First Pipeline</a>
</li>
<li>
<a href="#Insertion+Point+for+Project+Sitemap">Insertion Point for Project Sitemap</a>
</li>
<li>
<a href="#First+Match+for+%27**.xml%27">First Match for '**.xml'</a>
</li>
<li>
<a href="#First+Match+for+%27**body-*.html%27">First Match for '**body-*.html'</a>
</li>
<li>
<a href="#Second+Match+for+%27**body-*.html%27">Second Match for '**body-*.html'</a>
</li>
<li>
<a href="#Returning+to+the+%27**body-*.html%27+Pipeline">Returning to the '**body-*.html' Pipeline</a>
</li>
<li>
<a href="#First+Match+for+%22**%2F*.html%22">First Match for "**/*.html"</a>
</li>
</ul>
</li>
</ul>
</div>
<a name="N10010"></a><a name="sitemap.xmap"></a>
<h2 class="underlined_10">sitemap.xmap</h2>
<div class="section">
<pre>
&lt;?xml version="1.0"?&gt;
&lt;!-- ===============================================
Default Forrest sitemap, defining the whole site.
Delegates to the other *.xmap files.  See
http://forrest.apache.org/docs/sitemap-ref.html

$Revision: 1.12 $
==================================================== --&gt;
</pre>
<a name="N10016"></a><a name="Start+of+Sitemap"></a>
<h3 class="underlined_5">Start of Sitemap</h3>
<pre>
&lt;map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0"&gt;
  &lt;map:components&gt;
    &lt;map:generators default="file"&gt;
      &lt;map:generator name="file"      src="org.apache.cocoon.generation.FileGenerator" /&gt;
      &lt;map:generator name="html"
                     src="org.apache.cocoon.generation.HTMLGenerator"&gt;
        &lt;jtidy-config&gt;WEB-INF/jtidy.properties&lt;/jtidy-config&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="exception"
                  src="org.apache.cocoon.generation.ParseExceptionGenerator"/&gt;
      &lt;!--
      &lt;map:generator name="html"      src="org.apache.cocoon.generation.HTMLGenerator"&gt;
        &lt;jtidy-config&gt;jtidy.properties&lt;/jtidy-config&gt;
      &lt;/map:generator&gt;
      &lt;map:generator name="directory" src="org.apache.cocoon.generation.DirectoryGenerator" /&gt;
      --&gt;
      &lt;map:generator name="notifier" src="org.apache.cocoon.sitemap.NotifyingGenerator" /&gt;
      
      &lt;map:generator name="text2xml" logger="sitemap.generator.textgenerator"
                     src="org.apache.cocoon.generation.TextGenerator"&gt;
       &lt;parameter name="localizable" value="true"/&gt;
      &lt;/map:generator&gt;

    &lt;/map:generators&gt;

    &lt;map:transformers default="xslt"&gt;

      &lt;!-- Add values to skinconf that need extra processing like the color shades --&gt;
      &lt;map:transformer name="skinconf" src="org.apache.forrest.conf.SkinconfTransformer"/&gt;
              
      &lt;!-- Generates @id attributes from &lt;title&gt; strings --&gt;
      &lt;map:transformer name="idgen" src="org.apache.forrest.util.IdGeneratorTransformer"&gt;
        &lt;element&gt;//*[local-name() = 'section']&lt;/element&gt;
        &lt;id&gt;title/text()&lt;/id&gt;
      &lt;/map:transformer&gt;

      &lt;!-- Rewrites links, e.g. transforming href="site:index" to href="../index.html" --&gt;
      &lt;!-- See http://forrest.apache.org/docs/sitemap-ref.html#linkrewriting_impl --&gt;
      &lt;map:transformer name="linkrewriter" logger="sitemap.transformer.linkrewriter" src="org.apache.cocoon.transformation.LinkRewriterTransformer"&gt;
        &lt;link-attrs&gt;href src&lt;/link-attrs&gt;
        &lt;schemes&gt;site ext&lt;/schemes&gt;

        &lt;input-module name="site"&gt;
          &lt;input-module name="linkmap"&gt;
            &lt;file src="{src}" reloadable="true" /&gt;
          &lt;/input-module&gt;
          &lt;prefix&gt;/site//&lt;/prefix&gt;
          &lt;suffix&gt;/@href&lt;/suffix&gt;
        &lt;/input-module&gt;
        &lt;input-module name="ext"&gt;
          &lt;input-module name="linkmap"&gt;
            &lt;file src="{src}" reloadable="true" /&gt;
          &lt;/input-module&gt;
          &lt;prefix&gt;/site/external-refs//&lt;/prefix&gt;
          &lt;suffix&gt;/@href&lt;/suffix&gt;
        &lt;/input-module&gt;
      &lt;/map:transformer&gt;

      &lt;map:transformer name="xpath" logger="sitemap.transformer.xpath" src="org.apache.forrest.util.XPathTransformer" /&gt;
      
      &lt;map:transformer name="xslt" src="org.apache.cocoon.transformation.TraxTransformer" logger="sitemap.transformer.xslt" pool-max="32" pool-min="8" pool-grow="2"&gt;
        &lt;use-request-parameters&gt;false&lt;/use-request-parameters&gt;
        &lt;use-browser-capabilities-db&gt;false&lt;/use-browser-capabilities-db&gt;
        &lt;use-deli&gt;false&lt;/use-deli&gt;
        &lt;transformer-factory&gt;org.apache.xalan.processor.TransformerFactoryImpl&lt;/transformer-factory&gt;
        &lt;!--&lt;transformer-factory&gt;net.sf.saxon.TransformerFactoryImpl&lt;/transformer-factory&gt;--&gt;
        &lt;!--&lt;transformer-factory&gt;com.icl.saxon.TransformerFactoryImpl&lt;/transformer-factory&gt;--&gt;
        &lt;!--&lt;transformer-factory&gt;org.apache.xalan.xsltc.trax.TransformerFactoryImpl&lt;/transformer-factory&gt;--&gt;
      &lt;/map:transformer&gt;
      
      &lt;map:transformer name="xsltc" src="org.apache.cocoon.transformation.TraxTransformer" logger="sitemap.transformer.xslt" pool-max="32" pool-min="8" pool-grow="2"&gt;
        &lt;use-request-parameters&gt;false&lt;/use-request-parameters&gt;
        &lt;use-browser-capabilities-db&gt;false&lt;/use-browser-capabilities-db&gt;
        &lt;use-deli&gt;false&lt;/use-deli&gt;
        &lt;transformer-factory&gt;org.apache.xalan.xsltc.trax.TransformerFactoryImpl&lt;/transformer-factory&gt;
      &lt;/map:transformer&gt;

      &lt;map:transformer name="xslt-saxon"
         pool-grow="2" pool-max="32" pool-min="8"
         src="org.apache.cocoon.transformation.TraxTransformer"&gt;
       &lt;use-request-parameters&gt;false&lt;/use-request-parameters&gt;
       &lt;use-browser-capabilities-db&gt;false&lt;/use-browser-capabilities-db&gt;
       &lt;xslt-processor-role&gt;saxon&lt;/xslt-processor-role&gt;
     &lt;/map:transformer&gt;
      
      &lt;map:transformer name="xinclude" src="org.apache.cocoon.transformation.XIncludeTransformer" logger="sitemap.transformer.xinclude" pool-grow="2" pool-max="16" pool-min="2" /&gt;

      &lt;map:transformer name="cinclude" pool-grow="2" pool-max="16" pool-min="2" src="org.apache.cocoon.transformation.CIncludeTransformer" logger="sitemap.transformer.cinclude"/&gt;
   &lt;map:transformer name="pattern"
                    src="org.apache.cocoon.transformation.PatternTransformer" 
                    logger="sitemap.transformer.pattern"&gt;
    &lt;parameter name="groups" value="true"/&gt;
   &lt;/map:transformer&gt;
   &lt;map:transformer name="lexer"
                    src="org.apache.cocoon.transformation.LexicalTransformer" 
                    logger="sitemap.transformer.lexer"&gt;
    &lt;parameter name="localizable" value="true"/&gt;
   &lt;/map:transformer&gt;
   &lt;map:transformer name="parser"
                    src="org.apache.cocoon.transformation.ParserTransformer" 
                    logger="sitemap.transformer.parser"&gt;
    &lt;parameter name="flatten" value="true"/&gt;
    &lt;parameter name="recovery" value="true"/&gt;
    &lt;parameter name="localizable" value="true"/&gt;
   &lt;/map:transformer&gt;
    &lt;/map:transformers&gt;

    &lt;map:readers default="resource"&gt;
      &lt;map:reader name="resource" src="org.apache.cocoon.reading.ResourceReader"/&gt;
    &lt;/map:readers&gt;

    &lt;map:serializers default="html"&gt;
      &lt;map:serializer name="html" mime-type="text/html" src="org.apache.cocoon.serialization.HTMLSerializer"&gt;
        &lt;doctype-public&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/doctype-public&gt;
        &lt;doctype-system&gt;http://www.w3.org/TR/html4/loose.dtd&lt;/doctype-system&gt;
        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
      &lt;/map:serializer&gt;

      &lt;map:serializer name="xml" mime-type="text/xml" src="org.apache.cocoon.serialization.XMLSerializer"/&gt;

      &lt;map:serializer name="xml-document" mime-type="text/xml" src="org.apache.cocoon.serialization.XMLSerializer"&gt;
        &lt;cdata-section-elements&gt;source&lt;/cdata-section-elements&gt;
        &lt;doctype-public&gt;-//APACHE//DTD Documentation V1.3//EN&lt;/doctype-public&gt;
        &lt;doctype-system&gt;document-v13.dtd&lt;/doctype-system&gt;
      &lt;/map:serializer&gt;

      &lt;map:serializer name="links" src="org.apache.cocoon.serialization.LinkSerializer"&gt;
        &lt;encoding&gt;ISO-8859-1&lt;/encoding&gt;
      &lt;/map:serializer&gt;
      
      &lt;map:serializer name="svgxml" src="org.apache.cocoon.serialization.XMLSerializer" mime-type="image/svg+xml"&gt;
        &lt;doctype-public&gt;-//W3C//DTD SVG 1.0//EN&lt;/doctype-public&gt;
        &lt;doctype-system&gt;http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd&lt;/doctype-system&gt;
      &lt;/map:serializer&gt;
      &lt;map:serializer logger="sitemap.serializer.text" mime-type="text/plain" name="text" src="org.apache.cocoon.serialization.TextSerializer"&gt;
        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
      &lt;/map:serializer&gt;
      
     &lt;!--
      &lt;map:serializer mime-type="application/x-shockwave-flash" name="swf" src="org.apache.cocoon.serialization.SWFSerializer"/&gt;
      &lt;map:serializer mime-type="application/msword" name="fo2rtf" src="org.apache.cocoon.serialization.RTFSerializer"/&gt;
      --&gt;
    &lt;/map:serializers&gt;

    &lt;map:matchers default="wildcard"&gt;
      &lt;map:matcher name="wildcard" src="org.apache.cocoon.matching.WildcardURIMatcher"/&gt;
      &lt;map:matcher name="regexp" src="org.apache.cocoon.matching.RegexpURIMatcher"/&gt;
    &lt;/map:matchers&gt;

    &lt;map:selectors&gt;
      &lt;map:selector logger="sitemap.selector.exists" name="exists" src="org.apache.forrest.sourceexists.SourceExistsSelector" /&gt;
   &lt;map:selector logger="sitemap.selector.exception" name="exception"
                 src="org.apache.cocoon.selection.ExceptionSelector"&gt;
     &lt;exception name="syntax" class="net.sourceforge.chaperon.process.ParseException"/&gt;
     &lt;exception class="java.lang.Throwable" unroll="true"/&gt;
   &lt;/map:selector&gt;
    &lt;/map:selectors&gt;

    &lt;map:pipes default="caching"&gt;
      &lt;map:pipe name="caching" src="org.apache.cocoon.components.pipeline.impl.CachingProcessingPipeline"/&gt;
      &lt;!--
      &lt;map:pipe name="noncaching" src="org.apache.cocoon.components.pipeline.impl.NonCachingProcessingPipeline"/&gt;
      &lt;map:pipe name="profile-caching" src="org.apache.cocoon.components.profiler.ProfilingCachingProcessingPipeline"/&gt;
      &lt;map:pipe name="profile-noncaching" src="org.apache.cocoon.components.profiler.ProfilingNonCachingProcessingPipeline"/&gt;
      --&gt;
    &lt;/map:pipes&gt;
  &lt;/map:components&gt;

  &lt;!-- NOTE: the 'links view' is no longer used to discover a page's links.
       Instead of filterlinks.xsl, use cli.xconf include/exclude nodes to define which pages to render.
  &lt;map:views&gt;
    &lt;map:view name="links" from-position="last"&gt;
      &lt;map:transform src="{forrest:stylesheets}/filterlinks.xsl"&gt;
        &lt;map:parameter name="ctxbasedir" value="{realpath:.}/"/&gt;
      &lt;/map:transform&gt;
      &lt;map:serialize type="links"/&gt;
    &lt;/map:view&gt;
  &lt;/map:views&gt;
  --&gt;

  &lt;map:resources&gt;
    &lt;map:resource name="skinit"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:skins-dir}{forrest:skin}/xslt/html/{type}.xsl"&gt;
            &lt;map:transform src="{project:skins-dir}{forrest:skin}/xslt/html/{type}.xsl"&gt;
              &lt;map:parameter name="notoc" value="{notoc}"/&gt;
              &lt;!-- For backwards-compat with 0.2 - 0.4 skins --&gt;
              &lt;map:parameter name="isfaq" value="{notoc}"/&gt;
              &lt;map:parameter name="nopdf" value="{nopdf}"/&gt;
              &lt;map:parameter name="path" value="{path}"/&gt;
              &lt;map:parameter name="config-file" value="{project:skinconf}"/&gt;
            &lt;/map:transform&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:transform src="{forrest:context}/skins/{forrest:skin}/xslt/html/{type}.xsl"&gt;
              &lt;map:parameter name="notoc" value="{notoc}"/&gt;
              &lt;!-- For backwards-compat with 0.2 - 0.4 skins --&gt;
              &lt;map:parameter name="isfaq" value="{notoc}"/&gt;
              &lt;map:parameter name="nopdf" value="{nopdf}"/&gt;
              &lt;map:parameter name="path" value="{path}"/&gt;
              &lt;map:parameter name="config-file" value="{project:skinconf}"/&gt;
            &lt;/map:transform&gt;
          &lt;/map:otherwise&gt;
        &lt;/map:select&gt;
      &lt;map:serialize/&gt;
    &lt;/map:resource&gt;

  &lt;/map:resources&gt;
</pre>
<a name="N1001C"></a><a name="Start+of+Pipelines"></a>
<h3 class="underlined_5">Start of Pipelines</h3>
<pre>
  &lt;!-- =========================== Pipelines ================================= --&gt;
  &lt;map:pipelines&gt;

  &lt;map:pipeline type="caching" internal-only="true"&gt;
</pre>
<a name="N10022"></a><a name="Test+for+First+Pipeline"></a>
<h3 class="underlined_5">Test for First Pipeline</h3>
<pre>
      &lt;map:match pattern="*.xlex"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="resources/chaperon/grammars/{1}.xlex"&gt;
            &lt;map:read src="resources/chaperon/grammars/{1}.xlex"/&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:generate  type="text2xml"   src="{forrest:context}/resources/chaperon/grammars/{1}.grm"/&gt;
            &lt;map:transform type="lexer"  src="{forrest:context}/resources/chaperon/grammars/grm.xlex"/&gt;
            &lt;map:transform type="parser" src="{forrest:context}/resources/chaperon/grammars/grm.xgrm"/&gt;
            &lt;map:transform               src="{forrest:context}/resources/chaperon/stylesheets/text4regex.xsl"/&gt;
            &lt;map:transform type="lexer"  src="{forrest:context}/resources/chaperon/grammars/regex.xlex"/&gt;
            &lt;map:transform type="parser" src="{forrest:context}/resources/chaperon/grammars/regex.xgrm"/&gt;
            &lt;map:transform               src="{forrest:context}/resources/chaperon/stylesheets/grm2xlex.xsl"/&gt;
            &lt;map:serialize type="xml"/&gt;
          &lt;/map:otherwise&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;
    &lt;/map:pipeline&gt;
</pre>
<a name="N10028"></a><a name="Insertion+Point+for+Project+Sitemap"></a>
<h3 class="underlined_5">Insertion Point for Project Sitemap</h3>
<pre>
      &lt;!--
         This is the user pipeline, that can answer requests instead
         of the Forrest one, or let requests pass through.
         To take over the rendering of a file it must match the file name and path.
         To take over the generation of the intermediate format, it must give
         Forrest the same filename but ending with xml, and a DTD that Forrest
         recognizes.
      --&gt;
      &lt;map:pipeline internal-only="false"&gt;
           &lt;map:select type="exists"&gt;
             &lt;map:when test="{project:sitemap}"&gt;
               &lt;map:mount uri-prefix=""
                          src="{project:sitemap}" 
                          check-reload="yes" 
                          pass-through="true"/&gt;
             &lt;/map:when&gt;
           &lt;/map:select&gt;
      &lt;/map:pipeline&gt;
      
      &lt;map:pipeline internal-only="false"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:temp-dir}/internal.xmap"&gt;
            &lt;map:mount uri-prefix="" src="{project:temp-dir}/internal.xmap" check-reload="yes" pass-through="true"/&gt;
          &lt;/map:when&gt;
        &lt;/map:select&gt;
      &lt;/map:pipeline&gt;
      
      &lt;map:pipeline internal-only="false"&gt;
         &lt;map:match pattern="skinconf.xml"&gt;
           &lt;map:generate src="{project:skinconf}" /&gt;
           &lt;map:transform src="{forrest:stylesheets}/strip-doctype.xsl"/&gt;
           &lt;map:transform src="{forrest:stylesheets}/upgrade-skinconf.xsl"/&gt;
           &lt;map:select type="exists"&gt;
             &lt;map:when test="{project:skins-dir}{forrest:skin}/skinconf.xsl"&gt;
               &lt;map:transform src="{project:skins-dir}{forrest:skin}/skinconf.xsl"/&gt;
             &lt;/map:when&gt;
           &lt;/map:select&gt;
           &lt;map:select type="exists"&gt;
             &lt;map:when test="{forrest:context}/skins/{forrest:skin}/skinconf.xsl"&gt;
               &lt;map:transform src="{forrest:context}/skins/{forrest:skin}/skinconf.xsl"/&gt;
             &lt;/map:when&gt;
           &lt;/map:select&gt;
           &lt;map:transform src="{forrest:context}/skins/common/skinconf.xsl"/&gt;
           &lt;map:transform type="skinconf"/&gt;
           &lt;map:serialize type="xml" /&gt;
         &lt;/map:match&gt;

         &lt;!-- Add some build information, which is added to the html head --&gt;
         &lt;map:match pattern="build-info"&gt;
           &lt;map:generate src="{project:temp-dir}/build-info.xml"/&gt;
           &lt;map:serialize type="xml"/&gt;
         &lt;/map:match&gt;
       &lt;/map:pipeline&gt;
       
    &lt;map:pipeline internal-only="false"&gt;
      &lt;!-- ============================================================ --&gt;
      &lt;!-- SOURCE FORMATS                                               --&gt;
      &lt;!--                 Raw XML sources, typically doc-v12 format    --&gt;
      &lt;!-- ============================================================ --&gt;
      &lt;!-- http://forrest.apache.org/docs/sitemap-ref.html#source_pipelines --&gt;
</pre>
<a name="N1002E"></a><a name="First+Match+for+%27**.xml%27"></a>
<h3 class="underlined_5">First Match for '**.xml'</h3>
<pre>
      &lt;!-- Body content --&gt;
      &lt;map:match pattern="**.xml"&gt;
     
        &lt;map:match pattern="linkmap.xml"&gt;
          &lt;map:mount uri-prefix="" src="linkmap.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;
              
        &lt;map:match pattern="changes.xml"&gt;
          &lt;map:mount uri-prefix="" src="status.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="todo.xml"&gt;
          &lt;map:mount uri-prefix="" src="status.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="**dtdx.xml"&gt;
          &lt;map:mount uri-prefix="" src="dtd.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="forrest-issues.xml"&gt;
          &lt;map:mount uri-prefix="" src="issues.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="**faq.xml"&gt;
          &lt;map:mount uri-prefix="" src="faq.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="community/**index.xml"&gt;
          &lt;map:mount uri-prefix="" src="forrest.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:match pattern="community/*/**.xml"&gt;
          &lt;map:mount uri-prefix="" src="revisions.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;!-- wholesite is preferred; site is here for compatibility --&gt;
        &lt;map:match pattern="wholesite.xml"&gt;
          &lt;map:mount uri-prefix="" src="aggregate.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;
        &lt;map:match pattern="site.xml"&gt;
          &lt;map:mount uri-prefix="" src="aggregate.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;!-- Lucene index update and search --&gt;
        &lt;map:match pattern="lucene-*.xml"&gt;
          &lt;map:mount uri-prefix="" src="search.xmap" check-reload="yes"/&gt;
        &lt;/map:match&gt;

        &lt;!-- Default source types --&gt;
        &lt;map:mount uri-prefix="" src="forrest.xmap" check-reload="yes" /&gt;

      &lt;/map:match&gt;

      &lt;!-- Menu content --&gt;
      &lt;map:match pattern="abs-menulinks"&gt;
        &lt;map:mount uri-prefix="" src="menu.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**menulinks-*"&gt;
        &lt;map:mount uri-prefix="" src="menu.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;!-- Link maps --&gt;
      &lt;map:match pattern="abs-linkmap"&gt;
        &lt;map:mount uri-prefix="" src="linkmap.xmap"/&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**linkmap-*"&gt;
        &lt;map:match pattern="linkmap-wholesite.*"&gt;
          &lt;map:mount uri-prefix="" src="aggregate.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;
        &lt;map:match pattern="linkmap-site.*"&gt;
          &lt;map:mount uri-prefix="" src="aggregate.xmap" check-reload="yes" /&gt;
        &lt;/map:match&gt;

        &lt;map:mount uri-prefix="" src="linkmap.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

    &lt;/map:pipeline&gt;


    &lt;!-- ============================================================ --&gt;
    &lt;!-- INTERMEDIATE FORMATS                                         --&gt;
    &lt;!--                          Tabs, menus and body HTML.          --&gt;
    &lt;!--                       Called from output format pipelines    --&gt;
    &lt;!-- ============================================================ --&gt;
    &lt;!-- http://forrest.apache.org/docs/sitemap-ref.html#intermediate_pipelines --&gt;

    &lt;map:pipeline internal-only="false"&gt;

      &lt;!-- External matches --&gt;
      &lt;!-- (HTML rendered directly from special formats) --&gt;
      &lt;map:match pattern="**body-faq.html"&gt;
        &lt;map:mount uri-prefix="" src="faq.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
</pre>
<a name="N10034"></a><a name="First+Match+for+%27**body-*.html%27"></a>
<h3 class="underlined_5">First Match for '**body-*.html'</h3>
<pre>
      &lt;map:match pattern="**body-*.html"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:content.xdocs}{1}{2}.ehtml"&gt;
            &lt;map:generate src="{project:content.xdocs}{1}{2}.ehtml" /&gt;
            &lt;map:transform src="{forrest:stylesheets}/html2htmlbody.xsl" /&gt;
            &lt;map:transform type="linkrewriter" src="cocoon:/{1}linkmap-{2}.html"/&gt;
            &lt;map:transform src="resources/stylesheets/declare-broken-site-links.xsl" /&gt;
            &lt;map:serialize type="xml" /&gt;
          &lt;/map:when&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;
</pre>
<a name="N1003A"></a><a name="Second+Match+for+%27**body-*.html%27"></a>
<h3 class="underlined_5">Second Match for '**body-*.html'</h3>
<pre>
      &lt;!-- Default matches --&gt;
      &lt;!-- (HTML rendered from doc-v11 intermediate format --&gt;
      &lt;map:match pattern="**body-*.html"&gt;
        &lt;map:generate src="cocoon:/{1}{2}.xml"/&gt;
</pre>
<a name="N10040"></a><a name="Returning+to+the+%27**body-*.html%27+Pipeline"></a>
<h3 class="underlined_5">Returning to the '**body-*.html' Pipeline</h3>
<pre>
        &lt;map:transform type="idgen"/&gt;
        &lt;map:transform type="xinclude"/&gt;
        &lt;map:transform type="linkrewriter" src="cocoon:/{1}linkmap-{2}.html"/&gt;
        &lt;map:transform src="resources/stylesheets/declare-broken-site-links.xsl" /&gt;
        &lt;map:call resource="skinit"&gt;
          &lt;map:parameter name="type" value="document2html"/&gt;
          &lt;map:parameter name="path" value="{1}{2}.html"/&gt;
          &lt;map:parameter name="notoc" value="false"/&gt;
        &lt;/map:call&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**menu-*.html"&gt;
        &lt;map:generate src="cocoon:/{1}book-{2}.html"/&gt;
        &lt;map:transform type="linkrewriter" src="cocoon:/{1}linkmap-{2}.html"/&gt;
        &lt;map:transform src="resources/stylesheets/declare-broken-site-links.xsl" /&gt;
        &lt;map:call resource="skinit"&gt;
          &lt;map:parameter name="type" value="book2menu"/&gt;
          &lt;map:parameter name="path" value="{1}{2}.html"/&gt;
        &lt;/map:call&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**tab-*.html"&gt;
        &lt;map:mount uri-prefix="" src="tabs.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
      
      &lt;map:match pattern="**i18n-*.html"&gt;
        &lt;map:mount uri-prefix="" src="i18n.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**book-*.html"&gt;
        &lt;map:mount uri-prefix="" src="menu.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

    &lt;/map:pipeline&gt;

    &lt;!-- ============================================================ --&gt;
    &lt;!-- OUTPUT FORMATS                                               --&gt;
    &lt;!--                  Serves content directly to the user         --&gt;
    &lt;!-- +==========================================================+ --&gt;
    &lt;!-- http://forrest.apache.org/docs/sitemap-ref.html#output_pipelines --&gt;

    &lt;map:pipeline internal-only="false"&gt;
      &lt;map:select type="exists"&gt;
        &lt;map:when test="{project:temp-dir}/output.xmap"&gt;
          &lt;map:mount uri-prefix="" src="{project:temp-dir}/output.xmap" check-reload="yes" pass-through="true"/&gt;
        &lt;/map:when&gt;
      &lt;/map:select&gt;
    &lt;/map:pipeline&gt;

    &lt;map:pipeline internal-only="false"&gt;

      &lt;map:match pattern="*.html"&gt;
        &lt;map:aggregate element="site"&gt;
          &lt;map:part src="cocoon:/skinconf.xml"/&gt;
          &lt;map:part src="cocoon:/build-info"/&gt;
          &lt;map:part src="cocoon:/tab-{0}"/&gt;
          &lt;map:part src="cocoon:/menu-{0}"/&gt;
          &lt;map:part src="cocoon:/body-{0}"/&gt;
        &lt;/map:aggregate&gt;
        &lt;map:call resource="skinit"&gt;
          &lt;map:parameter name="type" value="site2xhtml"/&gt;
          &lt;map:parameter name="path" value="{0}"/&gt;
        &lt;/map:call&gt;
      &lt;/map:match&gt;
</pre>
<a name="N10046"></a><a name="First+Match+for+%22**%2F*.html%22"></a>
<h3 class="underlined_5">First Match for "**/*.html"</h3>
<pre>
  &lt;map:match pattern="**/*.html"&gt;
    &lt;map:aggregate element="site"&gt;
      &lt;map:part src="cocoon:/skinconf.xml"/&gt;
      &lt;map:part src="cocoon:/build-info"/&gt;
      &lt;map:part src="cocoon:/{1}/tab-{2}.html"/&gt;
      &lt;map:part src="cocoon:/{1}/menu-{2}.html"/&gt;
      &lt;map:part src="cocoon:/{1}/body-{2}.html"/&gt;
    &lt;/map:aggregate&gt;
    &lt;map:call resource="skinit"&gt;
      &lt;map:parameter name="type" value="site2xhtml"/&gt;
      &lt;map:parameter name="path" value="{0}"/&gt;
    &lt;/map:call&gt;
  &lt;/map:match&gt;

      &lt;map:match type="regexp" pattern="^.+$"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:content.xdocs}/{0}"&gt;
            &lt;map:mount uri-prefix="" src="raw.xmap" check-reload="yes" /&gt;
          &lt;/map:when&gt;
        &lt;/map:select&gt;
      &lt;/map:match&gt;

      &lt;!-- generate faq.fo specially  --&gt;
      &lt;map:match pattern="**faq.fo"&gt;
        &lt;map:mount uri-prefix="" src="faq.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;!-- generate .fo from .xml  --&gt;
      &lt;map:match type="regexp" pattern="^(.*?)([^/]*).fo$"&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:content.xdocs}{1}{2}.fo"&gt;
            &lt;map:generate src="{project:content.xdocs}{1}{2}.fo"/&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:aggregate element="site"&gt;
              &lt;map:part src="cocoon:/skinconf.xml"/&gt;
              &lt;map:part src="cocoon:/{1}{2}.xml"/&gt;
            &lt;/map:aggregate&gt;
            &lt;!-- &lt;map:transform type="idgen"/&gt; --&gt;
            &lt;map:transform type="xinclude"/&gt;
            &lt;map:transform type="linkrewriter" src="cocoon://{1}linkmap-{2}.fo"/&gt;
            &lt;map:select type="exists"&gt;
              &lt;map:when test="{project:skins-dir}{forrest:skin}/xslt/fo/document2fo.xsl"&gt;
                &lt;map:transform src="{project:skins-dir}{forrest:skin}/xslt/fo/document2fo.xsl"&gt;
                  &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
                  &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
                &lt;/map:transform&gt;
              &lt;/map:when&gt;
              &lt;map:when test="{forrest:context}/skins/{forrest:skin}/xslt/fo/document2fo.xsl"&gt;
                &lt;map:transform src="{forrest:context}/skins/{forrest:skin}/xslt/fo/document2fo.xsl"&gt;
                  &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
                  &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
                &lt;/map:transform&gt;
              &lt;/map:when&gt;
              &lt;map:otherwise&gt;
                &lt;map:transform src="{forrest:context}/skins/common/xslt/fo/document2fo.xsl"&gt;
                  &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
                  &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
                &lt;/map:transform&gt;
              &lt;/map:otherwise&gt;
            &lt;/map:select&gt;
        &lt;/map:otherwise&gt;
      &lt;/map:select&gt;
        &lt;map:serialize type="xml"/&gt;
      &lt;/map:match&gt;

      &lt;map:match type="regexp" pattern="^(.*?)([^/]*).svg$"&gt;
        &lt;map:generate src="cocoon:/{1}{2}.xml"/&gt;
        &lt;!-- &lt;map:transform type="idgen"/&gt; --&gt;
        &lt;map:transform type="xinclude"/&gt;
        &lt;map:transform type="linkrewriter" src="cocoon://{1}linkmap-{2}.svg"/&gt;
        &lt;map:transform src="resources/stylesheets/declare-broken-site-links.xsl" /&gt;
        &lt;map:select type="exists"&gt;
          &lt;map:when test="{project:skins-dir}{forrest:skin}/xslt/svg/document2svg.xsl"&gt;
            &lt;map:transform src="{project:skins-dir}{forrest:skin}/xslt/svg/document2svg.xsl"&gt;
              &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
              &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
            &lt;/map:transform&gt;
          &lt;/map:when&gt;
          &lt;map:when test="{forrest:context}/skins/{forrest:skin}/xslt/svg/document2svg.xsl"&gt;
            &lt;map:transform src="{forrest:context}/skins/{forrest:skin}/xslt/svg/document2svg.xsl"&gt;
              &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
              &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
            &lt;/map:transform&gt;
          &lt;/map:when&gt;
          &lt;map:otherwise&gt;
            &lt;map:transform src="{forrest:context}/skins/common/xslt/svg/document2svg.xsl"&gt;
              &lt;map:parameter name="imagesdir" value="{project:resources.images}/"/&gt;
              &lt;map:parameter name="xmlbasedir" value="{project:content.xdocs}{1}"/&gt;
            &lt;/map:transform&gt;
          &lt;/map:otherwise&gt;
        &lt;/map:select&gt;
        &lt;map:serialize type="svgxml"/&gt;
      &lt;/map:match&gt;
      
      &lt;map:match pattern="**changes.rss"&gt;
        &lt;map:mount uri-prefix="" src="status.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="profiler"&gt;
        &lt;map:mount uri-prefix="" src="profiler.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;map:match pattern="**.lucene"&gt;
        &lt;map:mount uri-prefix="" src="search.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;

      &lt;map:select type="exists"&gt;
         &lt;map:when test="{project:temp-dir}/resources.xmap"&gt;
           &lt;map:mount uri-prefix=""
                      src="{project:temp-dir}/resources.xmap" 
                      check-reload="yes" 
                      pass-through="true"/&gt;
        &lt;/map:when&gt;
      &lt;/map:select&gt;
      
      &lt;map:match pattern="**.js"&gt;
        &lt;map:mount uri-prefix="" src="resources.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
      &lt;map:match pattern="**.css"&gt;
        &lt;map:mount uri-prefix="" src="resources.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
      &lt;map:match pattern="**images**"&gt;
        &lt;map:mount uri-prefix="" src="resources.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
      &lt;map:match pattern="**.png"&gt;
        &lt;map:mount uri-prefix="" src="resources.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
     &lt;map:match pattern="**.ico"&gt;
        &lt;map:mount uri-prefix="" src="resources.xmap" check-reload="yes" /&gt;
      &lt;/map:match&gt;
    &lt;/map:pipeline&gt;



    &lt;!-- ============================================================ --&gt;
    &lt;!-- REDIRECTS                                                    --&gt;
    &lt;!-- ============================================================ --&gt;
    &lt;map:pipeline internal-only="false"&gt;

      &lt;map:match pattern=""&gt;
        &lt;map:redirect-to uri="index.html" /&gt;
      &lt;/map:match&gt;
      &lt;map:match type="regexp" pattern="^.+/$"&gt;
          &lt;map:redirect-to uri="index.html"/&gt;
      &lt;/map:match&gt;
    &lt;/map:pipeline&gt;

  &lt;/map:pipelines&gt;
&lt;/map:sitemap&gt;
</pre>
</div>
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
 Copyright &copy; 2002-2005 The Apache Software Foundation.</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
