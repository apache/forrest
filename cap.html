<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SourceTypeAction (content aware pipelines)</title>
<link type="text/css" href="skin/page.css" rel="stylesheet">
<link rel="shortcut icon" href="favicon.ico">
</head>
<body text="#000000" bgcolor="#FFFFFF">
<!--================= start Navigation Path ==================-->
<table summary="navigation path" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td nowrap="nowrap" valign="middle" bgcolor="#CFDCED" height="20"><img height="1" width="5" alt="" src="skin/images/spacer.gif" class="spacer"><!--===== breadcrumb trail (javascript-generated) ====--><font size="2" face="Arial, Helvetica, Sans-serif"><a href="http://www.apache.org/">apache</a> &gt; <a href="http://xml.apache.org/">xml.apache</a><script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script></font></td>
</tr>
<tr>
<td bgcolor="#4C6C8F" height="2"><img height="2" width="2" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
<!--================= end Navigation Path ==================-->
<!--================= start Banner ==================-->
<table summary="header with logos" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<!--================= start Group Logo ==================-->
<td bgcolor="#294563"><a href="http://xml.apache.org/"><img class="logoImage" alt="Apache XML" src="images/group-logo.gif"></a></td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td width="100%" align="center" bgcolor="#294563"><a href="http://xml.apache.org/forrest/"><img class="logoImage" alt="Forrest" src="images/project-logo.gif"></a></td>
<!--================= end Project Logo ==================-->
<!--================= start Search ==================--><td valign="top" rowspan="2" bgcolor="#294563">
<form target="_blank" action="http://www.google.com/search" method="get">
<table summary="search" border="0" cellspacing="0" cellpadding="0" bgcolor="#4C6C8F">
<tr>
<td colspan="3"><img height="10" width="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img height="1" width="1" alt="" src="skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap"><input value="xml.apache.org" name="as_sitesearch" type="hidden"><input size="15" name="as_q" id="query" type="text"><img height="1" width="5" alt="" src="skin/images/spacer.gif" class="spacer"><input name="Search" value="Search" type="submit">
<br>
<font face="Arial, Helvetica, Sans-serif" size="2" color="white">
                          the Apache XML site
                          
                          
                        </font></td><td><img height="1" width="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td><img alt="" border="0" height="10" width="9" src="skin/images/search-left.gif"></td><td><img height="1" width="1" alt="" src="skin/images/spacer.gif" class="spacer"></td><td><img alt="" border="0" height="10" width="9" src="skin/images/search-right.gif"></td>
</tr>
</table>
</form>
</td>
<!--================= end Search ==================--><td bgcolor="#294563"><img height="10" width="10" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td valign="bottom" bgcolor="#294563" colspan="2">
<!--================= start Tabs ==================-->
<div class="tab">
<table summary="tab bar" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="6"><img alt="" height="8" width="6" src="skin/images/spacer.gif"></td><td valign="bottom">
<table summary="selected tab" style="height: 1.8em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#4C6C8F"><img height="5" width="5" alt="" src="skin/images/tabSel-left.gif"></td><td valign="middle" bgcolor="#4C6C8F"><font color="#ffffff" size="2" face="Arial, Helvetica, Sans-serif"><b><a class="base-selected" href="index.html">Home</a></b></font></td><td valign="top" width="5" bgcolor="#4C6C8F"><img height="5" width="5" alt="" src="skin/images/tabSel-right.gif"></td>
</tr>
</table>
</td><td width="6"><img alt="" height="8" width="6" src="skin/images/spacer.gif"></td><td valign="bottom">
<table summary="non selected tab" style="height: 1.6em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="skin/images/tab-left.gif"></td><td valign="middle" bgcolor="#B2C4E0"><a class="base-not-selected" href="community/index.html">Community</a></td><td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="skin/images/tab-right.gif"></td>
</tr>
<tr>
<td colspan="3" height="1"></td>
</tr>
</table>
</td><td width="6"><img alt="" height="8" width="6" src="skin/images/spacer.gif"></td><td valign="bottom">
<table summary="non selected tab" style="height: 1.6em" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="skin/images/tab-left.gif"></td><td valign="middle" bgcolor="#B2C4E0"><a class="base-not-selected" href="community/howto/index.html">How-to</a></td><td valign="top" width="5" bgcolor="#B2C4E0"><img height="5" width="5" alt="" src="skin/images/tab-right.gif"></td>
</tr>
<tr>
<td colspan="3" height="1"></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<!--================= end Tabs ==================-->
</td><td bgcolor="#294563"></td>
</tr>
<tr>
<td height="10" bgcolor="#4C6C8F" colspan="4"></td>
</tr>
</table>
<!--================= end Banner ==================-->
<!--================= start Menu, NavBar, Content ==================-->
<table summary="page content" bgcolor="#ffffff" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top">
<table summary="menu" border="0" cellspacing="0" cellpadding="0">
<tr>
<!--================= start left top NavBar ==================-->
<td rowspan="3" valign="top">
<table summary="blue line" border="0" cellpadding="0" cellspacing="0">
<tr>
<td bgcolor="#294563"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td bgcolor="#CFDCED"><font color="#4C6C8F" size="4" face="Arial, Helvetica, Sans-serif">&nbsp;</font></td>
</tr>
<tr>
<td bgcolor="#294563"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
</td>
<!--================= end left top NavBar ==================--><td bgcolor="#294563"><img width="1" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td><td valign="bottom" bgcolor="#4C6C8F"><img width="10" height="10" alt="" src="skin/images/spacer.gif" class="spacer"></td><td nowrap="nowrap" valign="top" bgcolor="#4C6C8F">
<!--================= start Menu items ==================-->
<div class="menu">
<ul>
<li>
<font color="#CFDCED">About</font>
<ul>
    
<li>
<a href="index.html">Index</a>
</li>
    
<li>
<a href="license.html">License</a>
</li>
    
<li>
<a class="external" href="http://www.apache.org/dyn/closer.cgi/xml/forrest/">Download</a>
</li>
    
<li>
<a href="who.html">Who we are</a>
</li>
    
<li>
<a href="faq.html">FAQs</a>
</li>
    
<li>
<a href="changes.html">Changes</a>
</li>
    
    
<li>
<a href="todo.html">Todo</a>
</li>
    
<li>
<a href="live-sites.html">Example sites</a>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">Documentation</font>
<ul>
    
<li>
<a href="your-project.html">Using Forrest</a>
</li>
    
<li>
<a href="validation.html">XML Validation</a>
</li>
    
<li>
<a href="linking.html">Menus and Linking</a>
</li>
    
<li>
<a href="sitemap-ref.html">Sitemap Reference</a>
</li>
    
<li>
<a href="searching.html">Searching</a>
</li>
    
<li>
<a href="skin-package.html">Skin Packages</a>
</li>
    
    
<li>
<a href="forrest-contract.html">Our Contract</a>
</li>
    
<li>
<a href="compliance.html">Standards Compliance</a>
</li>
    
<li>
<a href="dtd-docs.html">DTD documentation</a>
</li>
    
<li>
<a href="catalog.html">Using DTD Catalogs</a>
</li>
    
<li>
<span class="sel"><font color="#ffcc00">Sourcetype Action</font></span>
</li>
    
<li>
<a href="oowriter.html">OpenOffice Writer docs</a>
</li>    
    
<li>
<a href="forrestbar.html">The ForrestBar</a>
</li>
    
<li>
<a href="forrestbot.html">Forrestbot (CVS)</a>
</li>
    
<li>
<a href="forrestbot-old.html">Forrestbot (stable)</a>
</li>
    
    
<li>
<a href="upgrading_06.html">Upgrading to 0.6</a>
</li>
    
<li>
<a href="upgrading_05.html">Upgrading to 0.5</a>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">Older Docs</font>
<ul>
    
<li>
<a href="primer.html">Forrest Primer</a>
</li>
    
<li>
<a href="libre-intro.html">Libre</a>
</li>
    
<li>
<a href="dreams.html">Dream list</a>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">Some Samples</font>
<ul>
    
<li>
<a href="document-v12.html">document-v12</a>
</li>
    
<li>
<a href="wiki-sample.html">Wiki Reference</a>
</li>
 
</ul>
</li>
<li>
<font color="#CFDCED">Getting Involved</font>
<ul>
    
<li>
<a href="contrib.html">Contributing</a>
</li>
    
<li>
<a href="build.html">Building Forrest</a>
</li>
    
<li>
<a class="external" href="http://svn.apache.org/viewcvs.cgi/forrest/trunk/?root=Apache-SVN">Browse SVN</a>
</li>
    
<li>
<a href="mail-lists.html">Mail lists</a>
</li>
    
<li>
<a href="mail-archives.html">Mail Archives</a>
</li>
    
<li>
<a class="external" href="http://issues.cocoondev.org/jira/secure/BrowseProject.jspa?id=10000">Bugs and Issues</a>
</li>
    
<li>
<a href="forrest-issues.html">Open Issues</a>
</li>
  
</ul>
</li>
<li>
<font color="#CFDCED">Related projects</font>
<ul>
    
<li>
<a class="external" href="http://gump.apache.org/">Apache Gump</a>
</li>
    
<li>
<a class="external" href="http://cocoon.apache.org/">Apache Cocoon</a>
</li>
    
<li>
<a class="external" href="http://cocoon.apache.org/lenya/">Apache Lenya</a>
</li>
    
<li>
<a class="external" href="http://www.krysalis.org/">Krysalis Centipede</a>
</li>
  
</ul>
</li>
</ul>
</div>
<!--================= end Menu items ==================-->
</td><td valign="bottom" bgcolor="#4C6C8F"><img width="10" height="10" alt="" src="skin/images/spacer.gif" class="spacer"></td><td bgcolor="#294563"><img width="1" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td valign="bottom" align="left" colspan="2" rowspan="2" bgcolor="#4C6C8F"><img height="10" width="10" border="0" alt="" src="skin/images/menu-left.gif"></td><td bgcolor="#4C6C8F"><img height="10" width="10" alt="" src="skin/images/spacer.gif" class="spacer"></td><td valign="bottom" align="right" colspan="2" rowspan="2" bgcolor="#4C6C8F"><img height="10" width="10" border="0" alt="" src="skin/images/menu-right.gif"></td>
</tr>
<tr>
<td height="1" bgcolor="#294563"><img width="1" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
</table>
</td><td valign="top" width="100%">
<table summary="content" width="100%" border="0" cellpadding="0" cellspacing="0">
<!--================= start middle NavBar ==================-->
<tr>
<td colspan="4" bgcolor="#294563"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td align="left" width="10" bgcolor="#CFDCED"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td><td align="left" width="50%" bgcolor="#CFDCED"><font color="#4C6C8F" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                
                </font><img width="10" height="8" alt="" src="skin/images/spacer.gif" class="spacer"></td><td align="right" width="50%" bgcolor="#CFDCED"><font color="#4C6C8F" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                
                </font><img width="10" height="8" alt="" src="skin/images/spacer.gif" class="spacer"></td><td width="10" bgcolor="#CFDCED"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<tr>
<td colspan="4" bgcolor="#294563"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<!--================= end middle NavBar ==================-->
<!--================= start Content==================-->
<tr>
<td align="left" width="10"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td><td colspan="2" align="left" width="100%">
<div class="content">
<table class="title" summary="">
<tr>
<td valign="middle">
<h1>SourceTypeAction (content aware pipelines)</h1>
</td><td nowrap="nowrap" width="40" align="center"><a class="dida" href="cap.pdf"><img alt="PDF" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a></td>
</tr>
</table>
<ul class="minitoc">
<li>
<a href="#Introduction">Introduction</a>
</li>
<li>
<a href="#Configuration">Configuration</a>
</li>
<li>
<a href="#Usage">Usage</a>
</li>
</ul> 
    
<a name="N1000E"></a><a name="Introduction"></a>
<h3>Introduction</h3>
<div style="margin-left: 0 ; border: 2px">
<p>SourceTypeAction assigns a "type" (a string) to an XML file. This is
        done based on information occuring in the header of the XML file, up to the
        document (root) element. This type is then returned to the sitemap as a
        variable with the name 'sourcetype'. If no matching sourcetype could be be
        found, null is returned and thus the contents of the action element will not be
        executed.</p>
<p>SourceTypeAction works by pull-parsing the document and collecting
        information such as the Public Id, the processing instructions, the document
        element local name and namespace, and the xsi:schemaLocation and
        xsi:noNamespaceSchemaLocation attributes. This information is then compared
        with the rules described in the configuration of the SourceTypeAction.</p>
</div> 
    
<a name="N1001B"></a><a name="Configuration"></a>
<h3>Configuration</h3>
<div style="margin-left: 0 ; border: 2px">
<p>The action should be declared and configured in the map:actions
        section of the sitemap. Example:</p>
<pre class="code">&lt;map:action name="sourcetype" src="org.apache.cocoon.acting.sourcetype.SourceTypeAction"&gt;
  &lt;sourcetype name="documentv11"&gt;
    &lt;document-declaration public-id="-//APACHE//DTD Documentation V1.1//EN"/&gt;
  &lt;/sourcetype&gt;
  &lt;sourcetype name="foo"&gt;
    &lt;document-element local-name="foo"&gt;
  &lt;/sourcetype&gt;
&lt;/map:action&gt;</pre>
<p>Each sourcetype-tag declares a source type. Inside the sourcetype-tag
        a number of rules can be defined, described below. The sourcetypes will be
        checked in the same order as they are defined in the configuration, the first
        sourcetype of which all rules match will be used.</p>
<p>These are the available rules:</p>
<dl> 
        
<dt>document-declaration</dt> 
        
<dd>This rule checks the public ID. It takes one attribute
          <span class="codefrag">public-id</span>.</dd> 
        
<dt>document-element</dt> 
        
<dd>This rule checks the local name and/or namespace of the document
          element. These are specified with the attributes <span class="codefrag">local-name</span> and
          <span class="codefrag">namespace</span>. At least one of these two is required.</dd> 
        
<dt>processing-instruction</dt> 
        
<dd>This rule checks a processing instruction. It can take two
          attributes: <span class="codefrag">target</span> and <span class="codefrag">data</span>. The target attribute is
          always required, the data attribute is optional.</dd> 
        
<dt>w3c-xml-schema</dt> 
        
<dd>This rule checks the value of the xsi:schemaLocation and
          xsi:noNamespaceSchemaLocation attributes on the document element. These are
          specified with the attributes <span class="codefrag">schema-location</span> and
          <span class="codefrag">no-namespace-schema-location</span>.</dd> 
      
</dl>
</div> 
    
<a name="N10060"></a><a name="Usage"></a>
<h3>Usage</h3>
<div style="margin-left: 0 ; border: 2px">
<p>The source of which the sourcetype must be defined must be specified
        using the 'src' attribute on the map:act element.</p>
<pre class="code">&lt;map:act type="sourcetype" src="{1}"&gt;
...
&lt;/map:act&gt;</pre>
</div> 
  
<div class="attribution"></div>
</div>
</td><td width="10"><img width="10" height="1" alt="" src="skin/images/spacer.gif" class="spacer"></td>
</tr>
<!--================= end Content==================-->
</table>
</td>
</tr>
</table>
<!--================= end Menu, NavBar, Content ==================-->
<!--================= start Footer ==================-->
<table summary="footer" cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>
<td colspan="2" height="1" bgcolor="#4C6C8F"><img height="1" width="1" alt="" src="skin/images/spacer.gif" class="spacer"><a href="skin/images/label.gif"></a><a href="skin/images/page.gif"></a><a href="skin/images/chapter.gif"></a><a href="skin/images/chapter_open.gif"></a><a href="skin/images/current.gif"></a></td>
</tr>
<tr>
<td colspan="2" bgcolor="#CFDCED" class="copyright" align="center"><font size="2" face="Arial, Helvetica, Sans-Serif"><a href="http://www.apache.org/licenses/LICENSE-2.0">
              Copyright &copy; 2002-2004&nbsp;
              The Apache Software Foundation.</a>
          All rights reserved.
          <script type="text/javascript" language="JavaScript"><!--
              document.write(" - "+"Last Published: " + document.lastModified);
            //  --></script></font></td>
</tr>
<tr>
<td colspan="2" align="left" bgcolor="#CFDCED" class="logos"></td>
</tr>
</table>
<!--================= end Footer ==================-->
</body>
</html>
