<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.8-dev">
<meta name="Forrest-skin-name" content="pelt">
<title>Welcome to the org.apache.forrest.plugin.input.Daisy Plugin</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<a href="http://forrest.apache.org/">Apache Forrest</a> &gt; <a href="http://forrest.apache.org/plugins/org.apache.forrest.plugin.input.Daisy">org.apache.forrest.plugin.input.Daisy</a><script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href="http://mygroup.org"><img class="logoImage" alt="MyGroup" src="images/group.png" title="MyGroup Description"></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogo">
<a href="http://myproj.mygroup.org/"><img class="logoImage" alt="org.apache.forrest.plugin.input.Daisy" src="images/project.png" title="org.apache.forrest.plugin.input.Daisy plugin for Apache Forrest"></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Search
    +-->
<div class="searchbox">
<form action="http://www.google.com/search" method="get" class="roundtopsmall">
<input value="mydomain" name="sitesearch" type="hidden"><input onFocus="getBlank (this, 'Search the site with google');" size="25" name="q" id="query" type="text" value="Search the site with google">&nbsp; 
                    <input name="Search" value="Search" type="submit">
</form>
</div>
<!--+
    |end search
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li class="current">
<a class="base-selected" href="index.html">Home</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
             
             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', 'skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">About</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menupage">
<div class="menupagetitle">Index</div>
</div>
<div class="menuitem">
<a href="changes.html" title="History of Changes">Changes</a>
</div>
<div class="menuitem">
<a href="todo.html" title="Todo List">Todo</a>
</div>
</div>
<div id="credit">
<hr>
<a href="http://forrest.apache.org/"><img border="0" title="Built with Apache Forrest" alt="Built with Apache Forrest - logo" src="images/built-with-forrest-button.png" style="width: 88px;height: 31px;"></a>
</div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="index.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Welcome to the org.apache.forrest.plugin.input.Daisy Plugin</h1>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Apache+Forrest+-+org.apache.forrest.plugin.input.Daisy+Plugin">Apache Forrest - org.apache.forrest.plugin.input.Daisy Plugin</a>
</li>
<li>
<a href="#Usage">Usage</a>
<ul class="minitoc">
<li>
<a href="#Locationmap">Locationmap</a>
</li>
<li>
<a href="#Using+Daisy+Navigation+Documents">Using Daisy Navigation Documents</a>
</li>
<li>
<a href="#Retrieving+RAW+content">Retrieving RAW content</a>
</li>
</ul>
</li>
<li>
<a href="#Filtering+Content">Filtering Content</a>
<ul class="minitoc">
<li>
<a href="#Pre-Filters">Pre-Filters</a>
</li>
<li>
<a href="#Post-Filters">Post-Filters</a>
</li>
</ul>
</li>
</ul>
</div> 
    
<a name="N1000D"></a><a name="Apache+Forrest+-+org.apache.forrest.plugin.input.Daisy+Plugin"></a>
<h2 class="boxed">Apache Forrest - org.apache.forrest.plugin.input.Daisy Plugin</h2>
<div class="section">
<p>This plugin retrieves documents from a 
      <a href="http://www.cocoondev.org/daisy">Daisy</a>
      repository.</p>
</div>
    
    
<a name="N1001B"></a><a name="Usage"></a>
<h2 class="boxed">Usage</h2>
<div class="section">
<p>Perhaps the most important thing to realise about this plugin is that 
      there is no relationship between the Forrest URL space and the URL space
      defined in the Daisy repository. That is the path to and the name of each
      document within Forrest needs not be the same as the path to and the name
      of the document within the Daisy repository.</p>
<p>This enables the repository to be structured in a way that is
      appropriate for it's editors and the Forrest document collection can
      be structured in a way that is appropriate for the target audience. In
      fact, it is possible to use the same document from a Daisy repository in
      multiple Forrest collections each using a completely different URL 
      space that is custom designed for the end user of the document
      collection.</p>
<a name="N10027"></a><a name="Locationmap"></a>
<h3 class="boxed">Locationmap</h3>
<p>In order to tell Forrest which document to retrieve from the
        repository you need to make use of the locationmap in Forrest. Your
        project must therefore provide a locationmap similar to the one 
        that follows.</p>
<div class="warning">
<div class="label">Warning</div>
<div class="content">The HTTP API in Daisy 1.3 has changed. The code below is for
        Daisy 1.2. We currently have experimental support for Daisy 1.3, if you
        wish to work with this version of daisy you should discuss your needs with
        the Forrest mail lists.</div>
</div>
<pre class="code">
&lt;locationmap xmlns="http://apache.org/forrest/locationmap/1.0"&gt;

  &lt;components&gt;
    &lt;matchers default="lm"&gt;
      &lt;matcher 
        name="lm" 
        src="org.apache.forrest.locationmap.WildcardLocationMapHintMatcher"/&gt;
    &lt;/matchers&gt;
  &lt;/components&gt;
  
  &lt;locator&gt;
   
     &lt;match pattern="index.xml"&gt;
         &lt;location src="cocoon://908.daisy.xml" /&gt;
     &lt;/match&gt;
   
     &lt;match pattern="*.daisy.source"&gt;
         &lt;location src="http://username:password@repository.domain.com:9263/publisher/document?documentId={1}&amp;amp;includeNavigation=false&amp;amp;locale=en_US&amp;amp;version=live" /&gt;
     &lt;/match&gt;
   
     &lt;match pattern="*.daisy.img"&gt;
         &lt;location src="http://username:password@repository.domain.com:9263/publisher/blob?documentId={1}&amp;amp;version=live&amp;amp;partType=3" /&gt;
     &lt;/match&gt;
   
     &lt;match pattern="*.daisy.navigation"&gt;
         &lt;location src="http://username:password@repository.domain.com:9263/publisher/blob?documentId={1}&amp;amp;version=live&amp;amp;partType=1" /&gt;
     &lt;/match&gt;
 
  &lt;/locator&gt;
&lt;/locationmap&gt;
        </pre>
<p>The first match (<span class="codefrag">pattern="index.xml"</span>) will redirect
        the request for index.xml to a named document
        in the daisy repository. If you provide your index.xml file locally then omit 
        this matcher.</p>
<p>The next match (<span class="codefrag">pattern="*.daisy.source"</span>) is used by the plugin
        to resolve requests for daisy documents.</p>
<p>The next match (<span class="codefrag">pattern="*.daisy.img"</span>) is used by the plugin
        to resolve requests for images stored in the daisy repository.</p>
<p>The next match (<span class="codefrag">pattern="*.daisy.navigation"</span>) is used by the plugin
        to resolve requests for daisy navigation documents.</p>
<div class="note">
<div class="label">Note</div>
<div class="content">In a future version of Forrest it planned to allow plugins to provide 
        locationmaps of their own. Therefore, the need for a project to provide this
        locationmap will be removed.</div>
</div>
<a name="N10053"></a><a name="Using+Daisy+Navigation+Documents"></a>
<h3 class="boxed">Using Daisy Navigation Documents</h3>
<p>It is possible to use a daisy navigation document in place of a local
        site.xml file. However, in order to allow other content to be added to the
        forrest publication without requiring write access to the Daisy repository
        your project still requries a site.xml file.</p>
<p>A minimal site.xml file for your project would be:</p>
<pre class="code">
&lt;site label="MyProj" href="" 
  xmlns="http://apache.org/forrest/linkmap/1.0" 
  xmlns:xi="http://www.w3.org/2001/XInclude" 
  tab=""&gt;
  &lt;xi:include href="cocoon://1208.daisy.navigation"/&gt;
&lt;/site&gt;
        </pre>
<p>Note that we use <span class="codefrag">xi:include</span> to include a navigation
        document in the site.xml file, in this case the document retrieved has
        id 1208. By using include in this way the site editor is free to use
        site.xml to reference content from other sources.</p>
<a name="N1006A"></a><a name="Retrieving+RAW+content"></a>
<h3 class="boxed">Retrieving RAW content</h3>
<p>If you want to retrieve the raw, unprocessed XML from
        Daisy simply request the file with a <span class="codefrag">.daisy.source</span>
        extenstion.</p>
</div>
      
      
<a name="N10078"></a><a name="Filtering+Content"></a>
<h2 class="boxed">Filtering Content</h2>
<div class="section">
<p>You may not have full control of the content in the repository, or
        you may wish to supress the presentation of some of the parts, for 
        example, the fields within the repository. There are two points at 
        which you can filter the content, at the point of retrieval (called a
        pre-filter) and once the file has been converted to the internal 
        Forrest format (called a post-filter).</p>
<a name="N10081"></a><a name="Pre-Filters"></a>
<h3 class="boxed">Pre-Filters</h3>
<p>Pre-Filters are applied to the XML retrieved from the 
          Daisy repository. To achieve this you can 
          provide an XSL file called <span class="codefrag">daisy/preFilter.xsl</span> in your 
          projects stylesheet directory (default location is 
          <span class="codefrag">PROJECT_HOME/src/documentation/resources/stylesheets</span>).</p>
<a name="N10091"></a><a name="Post-Filters"></a>
<h3 class="boxed">Post-Filters</h3>
<p>Post-Filters are applied to the XDoc generated by 
          Forrest. To achieve this you can 
          provide an XSL file called <span class="codefrag">daisy/postFilter.xsl</span> in your 
          projects stylesheet directory (default location is 
          <span class="codefrag">PROJECT_HOME/src/documentation/resources/stylesheets</span>).</p>
<p>The postFilter XSL file operates on the XDoc generated by Forrest. 
          If you wish to look at this format of the document simply request 
          the page with an <span class="codefrag">.xml</span> extension.</p>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2004 The Acme Software Foundation.</div>
<div id="logos">
<a href="http://validator.w3.org/check/referer"><img style="height: 31px; width: 88px;" title="Valid HTML 4.01!" alt="Valid HTML 4.01!" src="skin/images/valid-html401.png" class="logoImage"></a><a href="http://jigsaw.w3.org/css-validator/check/referer"><img style="height: 31px; width: 88px;" title="Valid CSS!" alt="Valid CSS!" src="skin/images/vcss.png" class="logoImage"></a>
</div>
<div id="feedback">
    Send feedback about the website to:
  <a id="feedbackto" href="mailto:webmaster@foo.com?subject=Feedback%C2%A0index.html">webmaster@foo.com</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
