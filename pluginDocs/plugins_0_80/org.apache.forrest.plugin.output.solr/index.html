<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <link href="themes/solr.css" media="screen" rel="stylesheet" title="Pelt" type="text/css" />
      <link href="index.solr.add.do.html" />
        <link href="themes/common.css" media="screen" rel="alternate stylesheet" title="common" type="text/css" />
        <link href="themes/leather-dev.css" media="screen" rel="alternate stylesheet" title="common" type="text/css" />
        <link href="themes/pelt.screen.css" media="screen" rel="stylesheet" title="Pelt" type="text/css" />
        
        <link href="index.dispatcher.css" media="screen" rel="stylesheet" title="Pelt" type="text/css" />
        <link href="themes/pelt.print.css" media="print" rel="stylesheet" title="Pelt" type="text/css" />
        <style type="text/css">/* Extra css */ 
p.quote {
 margin-left: 2em; 
 padding: .5em; 
 background-color: #f0f0f0; 
 font-family: monospace; 
}</style>
      <meta content="Apache Forrest" name="Generator" />
<meta content="0.8" name="Forrest-version" />
<meta content="pelt" name="Forrest-theme-name" />
<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
<!--+ |start navigation links +-->
<link href="index.html" rel="Index" title="Index..." />
<link href="linkmap.html" rel="CONTENTS" title="Site map..." />
<link href="screenshots.html" rel="NEXT" title="Screenshots" />
<link href="todo.html" rel="LAST" title="Todo" />
<!--+ |end navigation links +-->
<!--+|start favicon +-->
<link href="favicon.ico" rel="shortcut icon" />
<!--+|start favicon +-->
<script src="themes/getBlank.js" type="text/javascript"> </script>
<script src="themes/menu.js" type="text/javascript"> </script>
<!--+ |start content-title +-->
<title>Welcome to the org.apache.forrest.plugin.output.solr Plugin</title>
<!--+ |end content-title +-->
</head>
<body>
<div id="solr">
<div class="solrSearch">
<form action="solr-search.html" method="get" name="solr-search">
<div class="searchHidden">
<input name="version" type="hidden" value="2.2" />
<input name="hl" type="hidden" value="true" />
<input name="hl.fl" type="hidden" value="content" />
<input name="fl" type="hidden" value="id,title" />
<input name="indent" type="hidden" value="on" />
<input name="rows" type="hidden" value="10" />
<input name="start" type="hidden" value="0" />
</div>
<div class="searchField">
<input name="q" onblur="getPrompt(this, 'Search the site with solr');" onfocus="getBlank(this, 'Search the site with solr');" size="25" type="text" value="Search the site with solr" />
</div>
<div class="searchSubmit">
<input name="Search" type="submit" value="Search" />
</div>
</form>
</div>
</div>
<div id="container">
<!--+
    | start breadtrail
    +-->
<div class="breadtrail">
<a href="http://www.apache.org/">MyGroup</a>
                   &gt; <a href="http://forrest.apache.org/">MyProject</a>
<script src="themes/breadcrumbs.js" type="text/javascript"> </script>
</div>
<!--+
    | end breadtrail
    +-->
<div id="header">
<div id="branding-tagline-name">new 
            seed</div>
<div id="branding-tagline-tagline">powered by the 
            dispatcher</div>
<div class="logo">
<!--+
    |start Logo
    +-->
<a href="http://mygroup.org/">
<img alt="MyGroup" class="logoImage" src="images/group.png" title="MyGroup Description" />
</a>
<!--+
    |end group Logo
    +-->
</div>
<div class="logo">
<!--+
    |start Logo
    +-->
<a href="http://myproj.mygroup.org/">
<img alt="MyProject" class="logoImage" src="images/project.png" title="MyProject Description" />
</a>
<!--+
    |end group Logo
    +-->
</div>
<!--+
  |start Search
  +-->
<div class="searchbox">
<div class="round-top-left-small">
<div class="round-top-right-small">
<div class="search-input">
<form action="http://www.google.com/search" method="get">
<div class="search-hidden">
<input name="sitesearch" type="hidden" value="mydomain" />
</div>
<div class="search-field">
<input name="q" onblur="getPrompt(this, 'Search the site with google');" onfocus="getBlank(this, 'Search the site with google');" size="25" type="text" value="Search the site with google" />
</div>
<div class="search-submit">
<input name="Search" type="submit" value="Search" />
</div>
</form>
</div>
</div>
</div>
</div>
<!--+ |end search +-->
<div id="nav-main-hook">
<!--+ |start Tabs new +-->
<ul id="nav-main">
<li>
<a class="base-not-selected" href="http://forrest.apache.org/pluginDocs">Forrest Plugins</a>
</li>
<li class="current">
<a class="base-selected" href="index.html">Plugin Home</a>
</li>
</ul>
<!--+ |end Tabs +-->
<div id="publishedStrip"> <!--+
    |start nav-main-sub
    +--><!--+
    |end Endtabs
    +--><script type="text/javascript">document.write("Last Published: " + document.lastModified);</script>
</div>
</div>
</div>
<div id="page">
<div class="breadtrail"> </div>
<div id="leftbar">
<!--+ |start 0 menu +-->
<!--+ |start Menu +-->
<div id="nav-section">
<ul>
<li class="pagegroupselected" id="menu_selected_1.1Title">
<span onclick="SwitchMenu('menu_selected_1.1')">About</span>
<ul class="&#10;               selectedmenuitemgroup" id="menu_selected_1.1">
<li class="menupage">
<div class="menupagetitle">Index</div>
</li>
<li class="menuitem">
<a href="screenshots.html" title="screenshots of org.apache.forrest.plugin.output.solr">Screenshots</a>
</li>
<li class="menuitem">
<a href="http://forrest.apache.org/docs/plugins" title="Index of Forrest Plugins">Plugins Index</a>
</li>
<li class="menuitem">
<a href="changes.html" title="History of Changes">Changes</a>
</li>
<li class="menuitem">
<a href="todo.html" title="Todo List">Todo</a>
</li>
</ul>
</li>
</ul>
</div>
<!--+ |end menu +-->
<!--+ |start content-motd-page +-->
<!--+ |end content-motd-page +-->
<div id="roundbottom">
<div id="roundbottomLeft">
<img alt="spacer" src="themes/images/spacer.gif" />
</div>
</div>
</div>
<div id="export-link">
<a class="format" href="index.pdf">
<img alt="PDF - icon" class="skin" src="themes/images/pdfdoc.gif" />
<span class="caption">PDF</span>
</a>
</div>
<div id="content">
<!--+ |start content-title +-->
<h1 class="content-title">Welcome to the org.apache.forrest.plugin.output.solr Plugin</h1>
<!--+ |end content-title +-->
<!--+ |start content-abstract +-->
<!--+ |end content-abstract +-->
<!--+ |start content-minitoc +-->
<div id="content-minitoc-area">
<ul class="minitoc">
<li>
<a href="#overview">Apache Forrest - org.apache.forrest.plugin.output.solr Plugin</a>
</li>
<li>
<a href="#dispatcher">Dispatcher activation</a>
</li>
<li>
<a href="#solr">Solr activation</a>
</li>
<li>
<a href="#samples">Samples</a>
</li>
</ul>
</div>
<!--+ |end minitoc +-->
<!--+ |start content-main +-->
<a name="overview" title="Apache Forrest - org.apache.forrest.plugin.output.solr Plugin"> </a>
<h2 class="underlined_10">Apache Forrest - org.apache.forrest.plugin.output.solr Plugin</h2>
<div class="section">
<p> Generates
        <a href="http://incubator.apache.org/solr/">solr</a> documents from xdos. Further when run with the
        dispatcher in static mode it allows you to update a Solr server with the content of your
        website at the same time you generate the site ( solr-add contract). In dynamic mode
        (as servlet) it provides a GUI to manage your project in solr ( solr-actionbar
        contract ) and a search interface ( solr-search contract) to search your solr server.
        </p>
</div>
<a name="dispatcher" title="Dispatcher activation"> </a>
<h2 class="underlined_10">Dispatcher activation</h2>
<div class="section">
<p>You can see some
        <a href="/screenshots.html">screenshots</a> and activate the different
        contracts by using following snippets. Explanation given within xml comments.</p>
<pre class="code">    &lt;!-- default plugin CSS --&gt;
    &lt;forrest:contract name="branding-css-links"&gt;
      &lt;forrest:property name="branding-css-links-input"&gt;
        &lt;css url="solr.css" media="screen" theme="Pelt"/&gt;
      &lt;/forrest:property&gt;
    &lt;/forrest:contract&gt;
    &lt;!-- In static mode solr-add allows you to update a Solr server with the content of your
        website at the same time you generate the site. --&gt;
    &lt;forrest:contract name="solr-add"&gt;
      &lt;forrest:property name="request"&gt;#{$getRequest}&lt;/forrest:property&gt;
    &lt;/forrest:contract&gt;
    &lt;forrest:hook name="solr"&gt;
      &lt;forrest:hook class="solrSearch"&gt;
      &lt;!--Search interface (solr-search contract) to
        search your solr server. --&gt;
        &lt;forrest:contract name="solr-search"&gt;
          &lt;forrest:property name="contextPath"&gt;#{$contextPath}&lt;/forrest:property&gt;
          &lt;forrest:property name="hidden"&gt;
            &lt;input name="hl" type="hidden" value="true"/&gt;
            &lt;input name="hl.fl" type="hidden" value="content"/&gt;
            &lt;input name="fl" type="hidden" value="id,title"/&gt;
            &lt;input name="indent" type="hidden" value="on"/&gt;
            &lt;input name="rows" type="hidden" value="10"/&gt;
            &lt;input name="start" type="hidden" value="0"/&gt;
          &lt;/forrest:property&gt;
        &lt;/forrest:contract&gt;
      &lt;/forrest:hook&gt;
      &lt;!-- If the userAgent is the cocoon crawler then we do not want to 
      output the actionbar. The cocoon crawler does not provide the request
      header "User-Agent".--&gt;
      &lt;!-- HEADSUP 
        The jx:set var="userAgent" must be defined in the main structurer
        and cannot go into a tiles! --&gt;
      &lt;jx:set var="userAgent" value="${cocoon.request.getHeader('User-Agent')}"/&gt;
      &lt;jx:if test="${!userAgent.equals('')&amp;amp;null!=userAgent}"&gt;
        &lt;forrest:hook class="solrActionbar"&gt;
        &lt;!-- GUI to manage your project in solr. --&gt;
          &lt;forrest:contract name="solr-actionbar"&gt;
            &lt;forrest:property name="request"&gt;#{$getRequest}&lt;/forrest:property&gt;
            &lt;forrest:property name="contextPath"&gt;
              #{$contextPath}&lt;/forrest:property&gt;
          &lt;/forrest:contract&gt;
        &lt;/forrest:hook&gt;
      &lt;/jx:if&gt;
    &lt;/forrest:hook&gt; </pre>
<p>You can as well use the above aggregated to a tiles, like:</p>
<pre class="code">&lt;jx:import uri="cocoon://prepare.tiles.solrbar"/&gt;</pre>
</div>
<a name="solr" title="Solr activation"> </a>
<h2 class="underlined_10">Solr activation</h2>
<div class="section">
<p>The host server urls can be configured by adding the following properties to your
        project forrest.properties.xml in case you do not use the default values.</p>
<pre class="code">&lt;property name="solr.select.url" value="http://localhost:8983/solr/select"/&gt;
&lt;property name="solr.update.url" value="http://localhost:8983/solr/update"/&gt;</pre>
<p>In your solr server add the following field definitions to the schema.xml. We assume
        "id" is already set as "uniqueKey" and you changed the "defaultSearchField" to
        "content" otherwise you need to prefix your queries.</p>
<pre class="code">&lt;field name="content" type="text" indexed="true" stored="true" /&gt;
&lt;field name="title" type="text" indexed="true" stored="true"/&gt;
&lt;field name="subtitle" type="text" indexed="true" stored="true"/&gt;
&lt;field name="abstract" type="text" indexed="true" stored="true"/&gt;
&lt;field name="version" type="text" indexed="true" stored="true"/&gt;
&lt;field name="author" type="text" indexed="true" stored="true" multiValued="true"/&gt; </pre>
</div>
<a name="samples" title="Samples"> </a>
<h2 class="underlined_10">Samples</h2>
<div class="section">
<p>This section includes links to a number of samples using this plugin. The plugin is
        intended to be self documenting through these samples. If you require further help
        please ask on the user mailing list.</p>
<ul>
        <li>
          <a href="index.solr">index.solr</a> - the xdocs-to-solrDoc.xsl
          transforms xdocs to solr docs.</li>
        <li>
          <a href="index.solr.add">index.solr.add</a> - surround the solr docs with an
          add statement.</li>
        <li>
          <a href="index.solr.delete">index.solr.delete</a> - surround the solr docs id with a
          delete statement.</li>
        <li>
          <a href="solr.commit">solr.commit</a> - commit statement for solr.
        </li>
        <li>
          <a href="solr.optimize">solr.optimize</a> - optimize statement for solr.
        </li>
        <li>
          <a href="index-creation.solr.add">index-creation.solr.add</a> - is
          generating and adding an "add" statement for solr with the whole site as solr docs as
          input. This will index your whole project if you add ".do.html" to the url.</li>
      </ul>
<p>Aboves pages suffixed with
        <span class="codefrag">.do.html</span> will trigger the underlying statment on the solr server. We
        do not link them in this document since the links would be crawled. This is as well the
        reason why the gui is deactivated. Each the gui would trigger the delete,
        add, commit and optimze statement against the solr server for every page.</p>
</div>
<!--+ |end content-main +-->
</div>
</div>
<div id="footer">
<div class="lastmodified">
<script type="text/javascript">document.write("Last Published: " + document.lastModified);</script>
</div>
<div class="copyright">
            Copyright ©
             2002-2007 <a href="http://www.acme.org/licenses/">The Acme Software Organisation.</a> </div>
<!--+ |start compliance links +-->
<div id="siteinfo-compliance-links">
<a href="http://validator.w3.org/check?uri=referer">
<img alt="Valid XHTML 1.0!" height="31" src="http://www.w3.org/Icons/valid-xhtml10" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/check/referer">
<img alt="Valid CSS!" src="http://jigsaw.w3.org/css-validator/images/vcss" style="border:0;width:88px;height:31px" />
</a>
</div>
<!--+ |end compliance links +-->
<!-- |start siteinfo-credits -->
<div id="credit">
<a href="http://forrest.apache.org/">
<img alt="Built with Apache Forrest - logo" src="images/built-with-forrest-button.png" style="width: 88px;height: 31px;" title="Built with Apache Forrest" />
</a>
<a href="http://cocoon.apache.org/">
<img alt="Built with Cocoon - logo" src="http://forrest.apache.org/images/built-with-cocoon.gif" style="" title="Built with Cocoon" />
</a>
</div>
<!--+ |end siteinfo-credits +-->
</div>
</div>
</body>
</html>
