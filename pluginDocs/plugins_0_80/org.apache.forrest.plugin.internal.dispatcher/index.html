<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <link href="themes/common.css" media="screen" rel="alternate stylesheet" title="common" type="text/css" />
        <link href="themes/leather-dev.css" media="screen" rel="alternate stylesheet" title="common" type="text/css" />
        <link href="themes/pelt.screen.css" media="screen" rel="stylesheet" title="Pelt" type="text/css" />

        <link href="index.dispatcher.css" media="screen" rel="stylesheet" title="Pelt" type="text/css" />
        <link href="themes/pelt.print.css" media="print" rel="stylesheet" title="Pelt" type="text/css" />
        <style type="text/css">/* Extra css */ 
p.quote {
 margin-left: 2em; 
 padding: .5em; 
 background-color: #f0f0f0; 
 font-family: monospace; 
}</style>
      <meta content="Apache Forrest" name="Generator" />
<meta content="0.8" name="Forrest-version" />
<meta content="pelt" name="Forrest-theme-name" />
<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
<!--+ |start navigation links +-->
<link href="index.html" rel="Index" title="Index..." />
<link href="linkmap.html" rel="CONTENTS" title="Site map..." />
<link href="dispatcher-glossary.html" rel="NEXT" title="Glossary" />
<link href="todo.html" rel="LAST" title="Todo" />
<!--+ |end navigation links +-->
<!--+|start favicon +-->
<link href="favicon.ico" rel="shortcut icon" />
<!--+|start favicon +-->
<script src="themes/menu.js" type="text/javascript"> </script>
<!--+ |start content-title +-->
<title>Dispatcher (Draft - feature under development)</title>
<!--+ |end content-title +-->
</head>
<body>
<div id="container">
<!--+
    | start breadtrail
    +-->
<div class="breadtrail">
<a href="http://forrest.apache.org/">Apache Forrest</a>
<script src="themes/breadcrumbs.js" type="text/javascript"> </script>
</div>
<!--+
    | end breadtrail
    +-->
<div id="header">
<div id="branding-tagline-name">new 
            seed</div>
<div id="branding-tagline-tagline">powered by the 
            dispatcher</div>
<div class="logo">
<!--+
    |start Logo
    +-->
<a href="http://forrest.apache.org/">
<img alt="Apache Forrest Logo" class="logoImage" src="images/project-logo.gif" title="Apache Forrest" />
</a>
<!--+
    |end group Logo
    +-->
</div>
<div class="logo">
<!--+
    |start Logo
    +-->
<a href="http://forrest.apache.org/pluginDocs/">
<img alt="plugin logo" class="logoImage" src="images/project.png" title="org.apache.forrest.plugin.internal.dispatcher plugin for Apache Forrest" />
</a>
<!--+
    |end group Logo
    +-->
</div>
<!--+
  |start Search
  +-->
<div class="searchbox">
<div class="round-top-left-small">
<div class="round-top-right-small">
<div class="search-input">
<form action="http://www.google.com/search" method="get">
<div class="search-hidden">
<input name="sitesearch" type="hidden" value="mydomain" />
</div>
<div class="search-field">
<input name="q" onblur="getPrompt(this, 'Search the site with google');" onfocus="getBlank(this, 'Search the site with google');" size="25" type="text" value="Search the site with google" />
</div>
<div class="search-submit">
<input name="Search" type="submit" value="Search" />
</div>
</form>
</div>
</div>
</div>
</div>
<!--+ |end search +-->
<div id="nav-main-hook">
<!--+ |start Tabs new +-->
<ul id="nav-main">
<li>
<a class="base-not-selected" href="http://forrest.apache.org/pluginDocs">Forrest Plugins</a>
</li>
<li class="current">
<a class="base-selected" href="index.html">Home</a>
</li>
<li>
<a class="base-not-selected" href="how/howto-dispatcher-quickstart.html">HowTo</a>
</li>
<li>
<a class="base-not-selected" href="int/index.html">Internals</a>
</li>
</ul>
<!--+ |end Tabs +-->
<div id="publishedStrip"> <!--+
    |start nav-main-sub
    +--><!--+
    |end Endtabs
    +--><script type="text/javascript">document.write("Last Published: " + document.lastModified);</script>
</div>
</div>
</div>
<div id="page">
<div class="breadtrail"> </div>
<div id="leftbar">
<!--+ |start 0 menu +-->
<!--+ |start Menu +-->
<div id="nav-section">
<ul>
<li class="pagegroupselected" id="menu_selected_1.1Title">
<span onclick="SwitchMenu('menu_selected_1.1')">About</span>
<ul class="&#10;               selectedmenuitemgroup" id="menu_selected_1.1">
<li class="menupage">
<div class="menupagetitle">Dispatcher development</div>
</li>
<li class="menuitem">
<a href="dispatcher-glossary.html" title="(FIXME: add content) Dispactcher related terms and meanings">Glossary</a>
</li>
<li class="menuitem">
<a href="changes.html" title="History of Changes">Changes</a>
</li>
<li class="menuitem">
<a href="todo.html" title="Todo List">Todo</a>
</li>
</ul>
</li>
<li class="pagegroup" id="menu_1.2Title">
<span onclick="SwitchMenu('menu_1.2')">How to</span>
<ul class="menuitemgroup" id="menu_1.2">
<li class="menuitem">
<a href="how/howto-dispatcher-quickstart.html" title="">Quickstart</a>
</li>
<li class="menuitem">
<a href="how/howto-dispatcher-structurer.html" title="">Structurer</a>
</li>
<li class="menuitem">
<a href="how/howto-dispatcher-contracts.html" title="">Contracts</a>
</li>
</ul>
</li>
<li class="pagegroup" id="menu_1.3Title">
<span onclick="SwitchMenu('menu_1.3')">Internals</span>
<ul class="menuitemgroup" id="menu_1.3">
<li class="menuitem">
<a href="int/index.html" title="">Overview</a>
</li>
</ul>
</li>
</ul>
</div>
<!--+ |end menu +-->
<!--+ |start content-motd-page +-->
<!--+ |end content-motd-page +-->
<div id="roundbottom">
<div id="roundbottomLeft">
<img alt="spacer" src="themes/images/spacer.gif" />
</div>
</div>
</div>
<div id="content">
<!--+ |start content-title +-->
<h1 class="content-title">Dispatcher (Draft - feature under development)</h1>
<!--+ |end content-title +-->
<!--+ |start content-abstract +-->
<!--+ |end content-abstract +-->
<!--+ |start content-minitoc +-->
<div id="content-minitoc-area">
<ul class="minitoc">
<li>
<a href="#introduction">Introduction</a>
</li>
<li>
<a href="#dispatcher">Dispatcher - advanced separation of concerns</a>
<ul class="minitoc">
<li>
<a href="#structurer">Structurer - configuration for themes</a>
</li>
<li>
<a href="#contracts">Contracts - grouped functionality</a>
</li>
</ul>
</li>
<li>
<a href="#background">Background</a>
<ul class="minitoc">
<li>
<a href="#nc-definition">Definition of naming conventions</a>
</li>
<li>
<a href="#leather">leather-dev</a>
</li>
</ul>
</li>
<li>
<a href="#info">Further information</a>
</li>
</ul>
</div>
<!--+ |end minitoc +-->
<!--+ |start content-main +-->
<div class="warning">
<div class="label">Warning</div>
<div class="content">
      The "dispatcher" is new functionality which is still in development phase.
      That is why it is in the "whiteboard" section of the Forrest distribution.
      We are working at the moment on moving this plugin from the whiteboard
      into the core plugins. Further all dispatcher related documents will be
      moved into the plugin as well. See
      <a href="http://forrest.apache.org/docs_0_80/status-themes.html">Status
      of Themes: Skins and Dispatcher</a>.
    </div>
</div>
<a name="introduction" title="Introduction"> </a>
<h2 class="underlined_10">Introduction</h2>
<div class="section">
<p>
        As stated in the Skin documentation the aim of the Forrest skins is to
        provide many capabilities so that extra skins are not needed. Experience
        showed that many Forrest users still decided to create a new skin
        because the default skin did not offer the features that they wanted or
        they "just" needed extra content in some pages. We introduced
        skinconf.xml where the user could configure some features of skins but
        it was up to the skin to support it and did not solve the problem to add
        page specific extra content. That led us to develop a new concept of
        creating skins (we called the result "themes") which would be more
        easily extensible by a user.
      </p>
</div>
<a name="dispatcher" title="Dispatcher - advanced separation of concerns"> </a>
<h2 class="underlined_10">Dispatcher - advanced separation of concerns</h2>
<div class="section">
<p>
        The aim of the "dispatcher" concept is to provide a flexible framework
        for creating site and page specific layout in different formats from
        different content through an advanced seperation of concerns.
      </p>
<p>
        The dispatcher is a filter that limits the data-model to a minimum by
        only requesting what the structurer (e.g. common-html.vt.xml) need. This
        leads to a different URL handling focus - away from document centric. A
        document can (but does not have to) be behind a certain URL. Like said a
        structurer can request any given data as input not only a document and
        the forrest core contracts (like navigation). It may be the main
        enhancement in comparison to skins that this concept lets you easily
        extend the default data models provided by forrest.
      </p>
<p>
        Since the dispatcher has implemented a fallback concept it makes
        maintenance of custom themes which are based on forrest core ones very
        easy and less time consuming. The principal is to override or extend
        only certain parts (contracts) of the core. This is based on the
        observation that normally only a small percentage of core skin contracts
        have been changed. At the same time the new plugin system emerged.
        Plugins are a way of extending Forrest to satisfy site-specific needs.
        This includes to provide for plugin specific contracts.
      </p>
<a name="structurer" title="Structurer - configuration for themes"> </a>
<h3 class="underlined_5">Structurer - configuration for themes</h3>
<div class="section">
<p>
          We developed<strong> the structurer</strong> to let the user decide
          where to place elements in e.g. html pages. We started this work with
          the <span class="codefrag">skinconf.xml</span> where you could configure certain
          elements and their positions. These elements were known under certain
          names. It was up to the skin designer to support this configuration
          and the elements.
        </p>
<p>
          The work started with grouping elements (the ones from skinconf). We
          used css-contracts that we added as @attributes e.g. <span class="codefrag">
&lt;div id="content-main"/&gt;
          </span>. That made it possible to use the same elements in different
          skins. For the full list refer to the
          <a href="http://svn.apache.org/repos/asf/forrest/trunk/main/webapp/skins/leather-dev/contracts.initial.txt">
          initial contract list </a>
        </p>
<p>
          Around this contracts we developed a configuration Domain Specific
          Language - called <strong>the structurer</strong>. The
          <strong>structurer</strong> allows us to define the order in which
          <strong>forrest:contract</strong>s appear, and also to group them
          using <strong>forrest:hook</strong>s.
        </p>
<p>
          <strong>forrest:hook</strong>s are containers that are only used for
          layout reasons. They <strong>do not</strong> add any content nor
          functionality to the output. They add <strong>only</strong> layout
          information to the output. Actually e.g. a <span class="codefrag">
&lt;forrest:hook name="layoutId"/&gt;
          </span> will be transformed to <span class="codefrag">
&lt;div id="layoutId"/&gt;
          </span>
        </p>
<p>
          <strong>forrest:contract</strong>s are functionality or extra content
          that a theme can use to display the request. Sometimes a contract
          delivers <strong>format-specific markup</strong>, other times it
          delivers a <strong>format-independent string</strong>. We decide
          different kind of contracts, static one (like described in the
          contract howto), semi static (which offer configuration parameter in
          the structurer) and dynamic contracts (which offer semi-static
          configuration and/or requesting the content).
        </p>
<p>
          The structurer is also a configuration file for the dispatcher. The
          new thinking on the dispatcher is that one can include any content
          from any given business service by dispatching a request against it.
          In "old fashion" skins and in v1 contracts we assumed a given data
          model. In the dispatcher there is <strong>no</strong> given data model
          any more. All data has to be defined in the structurer so that they
          can be dispatched.
        </p>
</div>
<a name="contracts" title="Contracts - grouped functionality"> </a>
<h3 class="underlined_5">Contracts - grouped functionality</h3>
<div class="section">
<p>
          The result of the leather-dev development was grouped functionality in
          named containers. We gave those code snippets names (based on their
          functionality) and called them <strong>contracts</strong>. This naming
          enabled us to keep the contract separate from the positioning of the
          code itself. Furthermore, since major parts of the code of skins has
          never been documented, we started to add for each contract a
          description and an explanation on how to use this contract. The
          skinconf.xml gave an excellent source for this documentation effort,
          since it described most features of the pelt skin.
        </p>
<p>
          Contracts are standalone, self explaining, configurable pieces of xsl
          templates created purely for ease of maintenance.
        </p>
<p>
          Since these contracts are working from the input given in the
          <a href="#structurer">structurer</a>, it works on
          different input sources. One can pass variables into the contracts
          that can be used to apply presentation logic in the xsl (like sorting
          order, ...).
        </p>
</div>
</div>
<a name="background" title="Background"> </a>
<h2 class="underlined_10">Background</h2>
<div class="section">
<p>
        The problem with the forrest skins so far has been that even if "only"
        the design changed (html-skeleton), we still had to write a completely
        new skin and implement all functionality. Another problem was that the
        functionality was not easily extensible by a user. We decided to support
        a standard regarding naming conventions for css elements. This standard
        has been developed on the
        <a href="http://www.oscom.org/events/oscom4/proposals/skins.html">
        OSCOM website</a>, where you can find some more background information.
      </p>
<a name="nc-definition" title="Definition of naming conventions"> </a>
<h3 class="underlined_5">Definition of naming conventions</h3>
<div class="section">
<p>
          "A naming convention is an attempt to systematize names in a field so
          they unambiguously convey similar information in a similar manner."
          <a href="http://en.wikipedia.org/wiki/Naming_conventions">wikipedia</a>
        </p>
</div>
<a name="leather" title="leather-dev"> </a>
<h3 class="underlined_5">leather-dev</h3>
<div class="section">
<p>
          That led to the development of the "leather-dev" skin which
          established a semantic container approach for div elements.
          Leather-dev evolved from the "pelt" skin and used almost the same
          functionality (contracts). We had started to encapsulate functional
          code into templates, but there have been still in 4 xsl files and
          without any documentation on what they are doing and how to use them.
          The problems with leather-dev was pointed out in the mail
          "<a href="http://marc.theaimsgroup.com/?l=forrest-dev&amp;m=111049344517653">status
          on leather-dev?</a>". The main proplem was to limit users to only one
          html-skeleton which was way too limiting regarding design. Since we
          had now grouped functionality in named containers we were ready to
          start the dispatcher (aka forrest:views).
        </p>
</div>
</div>
<a name="info" title="Further information"> </a>
<h2 class="underlined_10">Further information</h2>
<div class="section">
<p>
        See the various How-to documents about the dispatcher, starting with the
        <a href="how/howto-dispatcher-quickstart.html">quickstart</a>. It would also be
        useful to familiarise yourself with some of the terms used in the
        dispatcher, the <a href="dispatcher-glossary.html">Dispatcher Glossary</a>
        contains some of the terms used.
      </p>
<p>
        Apache Forrest 1.0 Specification (Draft, not yet published):
        <span class="codefrag">site-author/content/xdocs/TR/2005/WD-forrest10.html</span>
      </p>
</div>
<!--+ |end content-main +-->
</div>
</div>
<div id="footer">
<div class="lastmodified">
<script type="text/javascript">document.write("Last Published: " + document.lastModified);</script>
</div>
<div class="copyright">
            Copyright ©
             2002-2007 <a href="http://www.apache.org/licenses/">The Apache Software Foundation.</a> </div>
<!--+ |start compliance links +-->
<div id="siteinfo-compliance-links">
<a href="http://validator.w3.org/check?uri=referer">
<img alt="Valid XHTML 1.0!" height="31" src="http://www.w3.org/Icons/valid-xhtml10" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/check/referer">
<img alt="Valid CSS!" src="http://jigsaw.w3.org/css-validator/images/vcss" style="border:0;width:88px;height:31px" />
</a>
</div>
<!--+ |end compliance links +-->
<!-- |start siteinfo-credits -->
<div id="credit">
<a href="http://forrest.apache.org/">
<img alt="Built with Apache Forrest - logo" src="images/built-with-forrest-button.png" style="width: 88px;height: 31px;" title="Built with Apache Forrest" />
</a>
<a href="http://cocoon.apache.org/">
<img alt="Built with Cocoon - logo" src="http://forrest.apache.org/images/built-with-cocoon.gif" style="" title="Built with Cocoon" />
</a>
</div>
<!--+ |end siteinfo-credits +-->
</div>
</div>
</body>
</html>
